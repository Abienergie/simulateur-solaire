const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-BURjk_nZ.js","assets/vendor-DMMN5fcA.js"])))=>i.map(i=>d[i]);
var au=Object.defineProperty;var iu=(A,e,t)=>e in A?au(A,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):A[e]=t;var MA=(A,e,t)=>iu(A,typeof e!="symbol"?e+"":e,t);import{r as x,a as ou,b as lu,c as Re,u as ht,d as ft,L as it,N as cu,H as uu,e as du,f as Te,R as hu}from"./vendor-DMMN5fcA.js";import{_ as ot,E as fu,P as Oa}from"./pdf-IMRTdm3b.js";import{R as Da,B as Ra,C as Ka,X as Ma,Y as Va,T as Ga,L as $a,a as cs}from"./charts-Bj3Wjc6S.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var ko={exports:{}},dr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mu=x,gu=Symbol.for("react.element"),pu=Symbol.for("react.fragment"),Bu=Object.prototype.hasOwnProperty,wu=mu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xu={key:!0,ref:!0,__self:!0,__source:!0};function To(A,e,t){var s,n={},a=null,i=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(i=e.ref);for(s in e)Bu.call(e,s)&&!xu.hasOwnProperty(s)&&(n[s]=e[s]);if(A&&A.defaultProps)for(s in e=A.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:gu,type:A,key:a,ref:i,props:n,_owner:wu.current}}dr.Fragment=pu;dr.jsx=To;dr.jsxs=To;ko.exports=dr;var r=ko.exports,Lo,Ja=ou;Lo=Ja.createRoot,Ja.hydrateRoot;const Po=x.createContext(void 0),ua="solar_client_data";function yu(A){try{const e={clientInfo:{civilite:A.clientInfo.civilite||"",nom:A.clientInfo.nom||"",prenom:A.clientInfo.prenom||"",telephone:A.clientInfo.telephone||"",email:A.clientInfo.email||"",adresse:A.clientInfo.adresse||"",codePostal:A.clientInfo.codePostal||"",ville:A.clientInfo.ville||""},address:{rue:A.address.rue||"",codePostal:A.address.codePostal||"",ville:A.address.ville||"",pays:A.address.pays||"France",region:A.address.region||"",coordinates:A.address.coordinates||void 0}};localStorage.setItem(ua,JSON.stringify(e))}catch(e){console.error("Error saving client data:",e)}}function bu(){try{const A=localStorage.getItem(ua);if(!A)return null;const e=JSON.parse(A);return!e.clientInfo||!e.address?(console.warn("Invalid client data structure in storage, resetting"),yn(),null):e}catch(A){return console.error("Error loading client data:",A),yn(),null}}function yn(){try{localStorage.removeItem(ua);const A=sessionStorage.getItem("auth_token");A&&sessionStorage.setItem("auth_token",A)}catch(A){console.error("Error clearing client data:",A)}}const Dr={civilite:"",nom:"",prenom:"",telephone:"",email:"",adresse:"",codePostal:"",ville:""},Rr={rue:"",codePostal:"",ville:"",pays:"France",region:"",coordinates:void 0};function Cu({children:A}){const[e,t]=x.useState(Dr),[s,n]=x.useState(Rr);x.useEffect(()=>{const l=bu();l&&(console.log("Chargement des données client depuis le stockage:",l),t(c=>({...Dr,...l.clientInfo})),n(c=>({...Rr,...l.address})))},[]),x.useEffect(()=>{console.log("Sauvegarde des données client:",{clientInfo:e,address:s}),yu({clientInfo:e,address:s})},[e,s]);const a=l=>{console.log("Mise à jour des informations client:",l),t(c=>({...c,...l})),(l.adresse!==void 0||l.codePostal!==void 0||l.ville!==void 0)&&(n(c=>({...c,rue:l.adresse!==void 0?l.adresse:c.rue,codePostal:l.codePostal!==void 0?l.codePostal:c.codePostal,ville:l.ville!==void 0?l.ville:c.ville})),console.log("Synchronisation des champs d'adresse de clientInfo vers address:",{rue:l.adresse,codePostal:l.codePostal,ville:l.ville}))},i=l=>{console.log("Mise à jour de l'adresse:",l),n(c=>({...c,...l})),(l.rue!==void 0||l.codePostal!==void 0||l.ville!==void 0)&&(t(c=>({...c,adresse:l.rue!==void 0?l.rue:c.adresse,codePostal:l.codePostal!==void 0?l.codePostal:c.codePostal,ville:l.ville!==void 0?l.ville:c.ville})),console.log("Synchronisation des champs d'adresse de address vers clientInfo:",{adresse:l.rue,codePostal:l.codePostal,ville:l.ville}))},o=()=>{console.log("Réinitialisation des données client"),t({...Dr}),n({...Rr}),yn()};return r.jsx(Po.Provider,{value:{clientInfo:e,address:s,updateClientInfo:a,updateAddress:i,resetClientInfo:o},children:A})}function sA(){const A=x.useContext(Po);if(A===void 0)throw new Error("useClient must be used within a ClientProvider");return A}const vu=A=>{let e;return A?e=A:typeof fetch>"u"?e=(...t)=>ot(async()=>{const{default:s}=await Promise.resolve().then(()=>mt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class da extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Qu extends da{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Uu extends da{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Fu extends da{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var bn;(function(A){A.Any="any",A.ApNortheast1="ap-northeast-1",A.ApNortheast2="ap-northeast-2",A.ApSouth1="ap-south-1",A.ApSoutheast1="ap-southeast-1",A.ApSoutheast2="ap-southeast-2",A.CaCentral1="ca-central-1",A.EuCentral1="eu-central-1",A.EuWest1="eu-west-1",A.EuWest2="eu-west-2",A.EuWest3="eu-west-3",A.SaEast1="sa-east-1",A.UsEast1="us-east-1",A.UsWest1="us-west-1",A.UsWest2="us-west-2"})(bn||(bn={}));var Eu=function(A,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{c(s.next(u))}catch(d){i(d)}}function l(u){try{c(s.throw(u))}catch(d){i(d)}}function c(u){u.done?a(u.value):n(u.value).then(o,l)}c((s=s.apply(A,e||[])).next())})};class Nu{constructor(e,{headers:t={},customFetch:s,region:n=bn.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=vu(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return Eu(this,void 0,void 0,function*(){try{const{headers:n,method:a,body:i}=t;let o={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let c;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=i):typeof i=="string"?(o["Content-Type"]="text/plain",c=i):typeof FormData<"u"&&i instanceof FormData?c=i:(o["Content-Type"]="application/json",c=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:c}).catch(m=>{throw new Qu(m)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new Uu(u);if(!u.ok)throw new Fu(u);let h=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(n){return{data:null,error:n}}})}}var Ee={},ha={},hr={},ts={},fr={},mr={},ju=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},lt=ju();const Iu=lt.fetch,Oo=lt.fetch.bind(lt),Do=lt.Headers,Su=lt.Request,Hu=lt.Response,mt=Object.freeze(Object.defineProperty({__proto__:null,Headers:Do,Request:Su,Response:Hu,default:Oo,fetch:Iu},Symbol.toStringTag,{value:"Module"})),_u=lu(mt);var gr={};Object.defineProperty(gr,"__esModule",{value:!0});let ku=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};gr.default=ku;var Ro=Re&&Re.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(mr,"__esModule",{value:!0});const Tu=Ro(_u),Lu=Ro(gr);let Pu=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Tu.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var i,o,l;let c=null,u=null,d=null,h=a.status,f=a.statusText;if(a.ok){if(this.method!=="HEAD"){const p=await a.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=p:u=JSON.parse(p))}const B=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),g=(o=a.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");B&&g&&g.length>1&&(d=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const B=await a.text();try{c=JSON.parse(B),Array.isArray(c)&&a.status===404&&(u=[],c=null,h=200,f="OK")}catch{a.status===404&&B===""?(h=204,f="No Content"):c={message:B}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,f="OK"),c&&this.shouldThrowOnError)throw new Lu.default(c)}return{error:c,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(n=n.catch(a=>{var i,o,l;return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=a==null?void 0:a.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}};mr.default=Pu;var Ou=Re&&Re.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(fr,"__esModule",{value:!0});const Du=Ou(mr);let Ru=class extends Du.default{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};fr.default=Ru;var Ku=Re&&Re.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(ts,"__esModule",{value:!0});const Mu=Ku(fr);let Vu=class extends Mu.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};ts.default=Vu;var Gu=Re&&Re.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(hr,"__esModule",{value:!0});const xt=Gu(ts);let $u=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",i),s&&(this.headers.Prefer=`count=${s}`),new xt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),t&&a.push(`count=${t}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const i=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(i.length>0){const o=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new xt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:a=!0}={}){const i="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),a||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new xt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new xt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new xt.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};hr.default=$u;var pr={},Br={};Object.defineProperty(Br,"__esModule",{value:!0});Br.version=void 0;Br.version="0.0.0-automated";Object.defineProperty(pr,"__esModule",{value:!0});pr.DEFAULT_HEADERS=void 0;const Ju=Br;pr.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Ju.version}`};var Ko=Re&&Re.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(ha,"__esModule",{value:!0});const Wu=Ko(hr),Xu=Ko(ts),qu=pr;let zu=class Mo{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},qu.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new Wu.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Mo(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:a}={}){let i;const o=new URL(`${this.url}/rpc/${e}`);let l;s||n?(i=s?"HEAD":"GET",Object.entries(t).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{o.searchParams.append(u,d)})):(i="POST",l=t);const c=Object.assign({},this.headers);return a&&(c.Prefer=`count=${a}`),new Xu.default({method:i,url:o,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};ha.default=zu;var gt=Re&&Re.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.PostgrestError=Ee.PostgrestBuilder=Ee.PostgrestTransformBuilder=Ee.PostgrestFilterBuilder=Ee.PostgrestQueryBuilder=Ee.PostgrestClient=void 0;const Vo=gt(ha);Ee.PostgrestClient=Vo.default;const Go=gt(hr);Ee.PostgrestQueryBuilder=Go.default;const $o=gt(ts);Ee.PostgrestFilterBuilder=$o.default;const Jo=gt(fr);Ee.PostgrestTransformBuilder=Jo.default;const Wo=gt(mr);Ee.PostgrestBuilder=Wo.default;const Xo=gt(gr);Ee.PostgrestError=Xo.default;var Yu=Ee.default={PostgrestClient:Vo.default,PostgrestQueryBuilder:Go.default,PostgrestFilterBuilder:$o.default,PostgrestTransformBuilder:Jo.default,PostgrestBuilder:Wo.default,PostgrestError:Xo.default};const{PostgrestClient:Zu,PostgrestQueryBuilder:nb,PostgrestFilterBuilder:ab,PostgrestTransformBuilder:ib,PostgrestBuilder:ob,PostgrestError:lb}=Yu,ed="2.11.2",Ad={"X-Client-Info":`realtime-js/${ed}`},td="1.0.0",qo=1e4,sd=1e3;var rt;(function(A){A[A.connecting=0]="connecting",A[A.open=1]="open",A[A.closing=2]="closing",A[A.closed=3]="closed"})(rt||(rt={}));var Se;(function(A){A.closed="closed",A.errored="errored",A.joined="joined",A.joining="joining",A.leaving="leaving"})(Se||(Se={}));var Ve;(function(A){A.close="phx_close",A.error="phx_error",A.join="phx_join",A.reply="phx_reply",A.leave="phx_leave",A.access_token="access_token"})(Ve||(Ve={}));var Cn;(function(A){A.websocket="websocket"})(Cn||(Cn={}));var FA;(function(A){A.Connecting="connecting",A.Open="open",A.Closing="closing",A.Closed="closed"})(FA||(FA={}));class rd{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),a=t.getUint8(2);let i=this.HEADER_LENGTH+2;const o=s.decode(e.slice(i,i+n));i=i+n;const l=s.decode(e.slice(i,i+a));i=i+a;const c=JSON.parse(s.decode(e.slice(i,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class zo{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var re;(function(A){A.abstime="abstime",A.bool="bool",A.date="date",A.daterange="daterange",A.float4="float4",A.float8="float8",A.int2="int2",A.int4="int4",A.int4range="int4range",A.int8="int8",A.int8range="int8range",A.json="json",A.jsonb="jsonb",A.money="money",A.numeric="numeric",A.oid="oid",A.reltime="reltime",A.text="text",A.time="time",A.timestamp="timestamp",A.timestamptz="timestamptz",A.timetz="timetz",A.tsrange="tsrange",A.tstzrange="tstzrange"})(re||(re={}));const Wa=(A,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,i)=>(a[i]=nd(i,A,e,n),a),{})},nd=(A,e,t,s)=>{const n=e.find(o=>o.name===A),a=n==null?void 0:n.type,i=t[A];return a&&!s.includes(a)?Yo(a,i):vn(i)},Yo=(A,e)=>{if(A.charAt(0)==="_"){const t=A.slice(1,A.length);return ld(e,t)}switch(A){case re.bool:return ad(e);case re.float4:case re.float8:case re.int2:case re.int4:case re.int8:case re.numeric:case re.oid:return id(e);case re.json:case re.jsonb:return od(e);case re.timestamp:return cd(e);case re.abstime:case re.date:case re.daterange:case re.int4range:case re.int8range:case re.money:case re.reltime:case re.text:case re.time:case re.timestamptz:case re.timetz:case re.tsrange:case re.tstzrange:return vn(e);default:return vn(e)}},vn=A=>A,ad=A=>{switch(A){case"t":return!0;case"f":return!1;default:return A}},id=A=>{if(typeof A=="string"){const e=parseFloat(A);if(!Number.isNaN(e))return e}return A},od=A=>{if(typeof A=="string")try{return JSON.parse(A)}catch(e){return console.log(`JSON parse error: ${e}`),A}return A},ld=(A,e)=>{if(typeof A!="string")return A;const t=A.length-1,s=A[t];if(A[0]==="{"&&s==="}"){let a;const i=A.slice(1,t);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(o=>Yo(e,o))}return A},cd=A=>typeof A=="string"?A.replace(" ","T"):A,Zo=A=>{let e=A;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Kr{constructor(e,t,s={},n=qo){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Xa;(function(A){A.SYNC="sync",A.JOIN="join",A.LEAVE="leave"})(Xa||(Xa={}));class Tt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:a,onLeave:i,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Tt.syncState(this.state,n,a,i),this.pendingDiffs.forEach(l=>{this.state=Tt.syncDiff(this.state,l,a,i)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:a,onLeave:i,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Tt.syncDiff(this.state,n,a,i),o())}),this.onJoin((n,a,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:a,newPresences:i})}),this.onLeave((n,a,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const a=this.cloneDeep(e),i=this.transformState(t),o={},l={};return this.map(a,(c,u)=>{i[c]||(l[c]=u)}),this.map(i,(c,u)=>{const d=a[c];if(d){const h=u.map(g=>g.presence_ref),f=d.map(g=>g.presence_ref),m=u.filter(g=>f.indexOf(g.presence_ref)<0),B=d.filter(g=>h.indexOf(g.presence_ref)<0);m.length>0&&(o[c]=m),B.length>0&&(l[c]=B)}else o[c]=u}),this.syncDiff(a,{joins:o,leaves:l},s,n)}static syncDiff(e,t,s,n){const{joins:a,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(a,(o,l)=>{var c;const u=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),u.length>0){const d=e[o].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[o].unshift(...h)}s(o,u,l)}),this.map(i,(o,l)=>{let c=e[o];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[o]=c,n(o,c,l),c.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qa;(function(A){A.ALL="*",A.INSERT="INSERT",A.UPDATE="UPDATE",A.DELETE="DELETE"})(qa||(qa={}));var za;(function(A){A.BROADCAST="broadcast",A.PRESENCE="presence",A.POSTGRES_CHANGES="postgres_changes",A.SYSTEM="system"})(za||(za={}));var eA;(function(A){A.SUBSCRIBED="SUBSCRIBED",A.TIMED_OUT="TIMED_OUT",A.CLOSED="CLOSED",A.CHANNEL_ERROR="CHANNEL_ERROR"})(eA||(eA={}));class fa{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Kr(this,Ve.join,this.params,this.timeout),this.rejoinTimer=new zo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Se.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ve.reply,{},(n,a)=>{this._trigger(this._replyEventName(a),n)}),this.presence=new Tt(this),this.broadcastEndpointURL=Zo(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:i,private:o}}=this.params;this._onError(u=>e==null?void 0:e(eA.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(eA.CLOSED));const l={},c={broadcast:a,presence:i,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&n!==void 0?n:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(eA.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,m=[];for(let B=0;B<f;B++){const g=h[B],{filter:{event:p,schema:w,table:N,filter:Q}}=g,v=u&&u[B];if(v&&v.event===p&&v.schema===w&&v.table===N&&v.filter===Q)m.push(Object.assign(Object.assign({},g),{id:v.id}));else{this.unsubscribe(),e==null||e(eA.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(eA.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(eA.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(eA.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:i}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,o,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(i=this.params)===null||i===void 0?void 0:i.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Se.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ve.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(s=>{const n=new Kr(this,Ve.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}async _fetchWithTimeout(e,t,s){const n=new AbortController,a=setTimeout(()=>n.abort(),s),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),i}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Kr(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,a;const i=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=Ve;if(s&&[o,l,c,u].indexOf(i)>=0&&s!==this._joinRef())return;let h=this._onMessage(i,t,s);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var m,B,g;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((g=(B=f.filter)===null||B===void 0?void 0:B.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===i}).map(f=>f.callback(h,s)):(a=this.bindings[i])===null||a===void 0||a.filter(f=>{var m,B,g,p,w,N;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in f){const Q=f.id,v=(m=f.filter)===null||m===void 0?void 0:m.event;return Q&&((B=t.ids)===null||B===void 0?void 0:B.includes(Q))&&(v==="*"||(v==null?void 0:v.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const Q=(w=(p=f==null?void 0:f.filter)===null||p===void 0?void 0:p.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return Q==="*"||Q===((N=t==null?void 0:t.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===i}).map(f=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:B,table:g,commit_timestamp:p,type:w,errors:N}=m;h=Object.assign(Object.assign({},{schema:B,table:g,commit_timestamp:p,eventType:w,new:{},old:{},errors:N}),this._getPayloadRecords(m))}f.callback(h,s)})}_isClosed(){return this.state===Se.closed}_isJoined(){return this.state===Se.joined}_isJoining(){return this.state===Se.joining}_isLeaving(){return this.state===Se.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var a;return!(((a=n.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&fa.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ve.close,{},e)}_onError(e){this._on(Ve.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Se.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Wa(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Wa(e.columns,e.old_record)),t}}const ud=()=>{},dd=typeof WebSocket<"u",hd=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fd{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Ad,this.params={},this.timeout=qo,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=ud,this.conn=null,this.sendBuffer=[],this.serializer=new rd,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>ot(async()=>{const{default:l}=await Promise.resolve().then(()=>mt);return{default:l}},void 0).then(({default:l})=>l(...o)):i=fetch,(...o)=>i(...o)},this.endPoint=`${e}/${Cn.websocket}`,this.httpEndpoint=Zo(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(a,i)=>i(JSON.stringify(a)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new zo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(dd){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new md(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ot(async()=>{const{default:e}=await import("./browser-BURjk_nZ.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:td}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case rt.connecting:return FA.Connecting;case rt.open:return FA.Open;case rt.closing:return FA.Closing;default:return FA.Closed}}isConnected(){return this.connectionState()===FA.Open}channel(e,t={config:{}}){const s=new fa(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:n,ref:a}=e,i=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${s} (${a})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let s=null;try{s=JSON.parse(atob(t.split(".")[1]))}catch{}if(s&&s.exp&&!(Math.floor(Date.now()/1e3)-s.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${s.exp}`);this.accessTokenValue=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(Ve.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(sd,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:a,ref:i}=t;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${n} ${i&&"("+i+")"||""}`,a),this.channels.filter(o=>o._isMember(s)).forEach(o=>o._trigger(n,a,i)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ve.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([hd],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class md{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=rt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class ma extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ge(A){return typeof A=="object"&&A!==null&&"__isStorageError"in A}class gd extends ma{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Qn extends ma{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var pd=function(A,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{c(s.next(u))}catch(d){i(d)}}function l(u){try{c(s.throw(u))}catch(d){i(d)}}function c(u){u.done?a(u.value):n(u.value).then(o,l)}c((s=s.apply(A,e||[])).next())})};const el=A=>{let e;return A?e=A:typeof fetch>"u"?e=(...t)=>ot(async()=>{const{default:s}=await Promise.resolve().then(()=>mt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Bd=()=>pd(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ot(()=>Promise.resolve().then(()=>mt),void 0)).Response:Response}),Un=A=>{if(Array.isArray(A))return A.map(t=>Un(t));if(typeof A=="function"||A!==Object(A))return A;const e={};return Object.entries(A).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[n]=Un(s)}),e};var OA=function(A,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{c(s.next(u))}catch(d){i(d)}}function l(u){try{c(s.throw(u))}catch(d){i(d)}}function c(u){u.done?a(u.value):n(u.value).then(o,l)}c((s=s.apply(A,e||[])).next())})};const Mr=A=>A.msg||A.message||A.error_description||A.error||JSON.stringify(A),wd=(A,e,t)=>OA(void 0,void 0,void 0,function*(){const s=yield Bd();A instanceof s&&!(t!=null&&t.noResolveJson)?A.json().then(n=>{e(new gd(Mr(n),A.status||500))}).catch(n=>{e(new Qn(Mr(n),n))}):e(new Qn(Mr(A),A))}),xd=(A,e,t,s)=>{const n={method:A,headers:(e==null?void 0:e.headers)||{}};return A==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function ss(A,e,t,s,n,a){return OA(this,void 0,void 0,function*(){return new Promise((i,o)=>{A(t,xd(e,s,n,a)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>wd(l,o,s))})})}function qs(A,e,t,s){return OA(this,void 0,void 0,function*(){return ss(A,"GET",e,t,s)})}function oA(A,e,t,s,n){return OA(this,void 0,void 0,function*(){return ss(A,"POST",e,s,n,t)})}function yd(A,e,t,s,n){return OA(this,void 0,void 0,function*(){return ss(A,"PUT",e,s,n,t)})}function bd(A,e,t,s){return OA(this,void 0,void 0,function*(){return ss(A,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Al(A,e,t,s,n){return OA(this,void 0,void 0,function*(){return ss(A,"DELETE",e,s,n,t)})}var Qe=function(A,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{c(s.next(u))}catch(d){i(d)}}function l(u){try{c(s.throw(u))}catch(d){i(d)}}function c(u){u.done?a(u.value):n(u.value).then(o,l)}c((s=s.apply(A,e||[])).next())})};const Cd={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ya={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vd{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=el(n)}uploadOrUpdate(e,t,s,n){return Qe(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},Ya),n);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const l=i.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",i.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=s,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:o},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(a){if(ge(a))return{data:null,error:a};throw a}})}upload(e,t,s){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return Qe(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${i}`);o.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:Ya.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",c.cacheControl)):(l=s,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:a,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(ge(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Qe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const a=yield oA(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(this.url+a.url),o=i.searchParams.get("token");if(!o)throw new ma("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}update(e,t,s){return Qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Qe(this,void 0,void 0,function*(){try{return{data:yield oA(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}copy(e,t,s){return Qe(this,void 0,void 0,function*(){try{return{data:{path:(yield oA(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return Qe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield oA(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return Qe(this,void 0,void 0,function*(){try{const n=yield oA(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}download(e,t){return Qe(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=a?`?${a}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield qs(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ge(o))return{data:null,error:o};throw o}})}info(e){return Qe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield qs(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Un(s),error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}exists(e){return Qe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield bd(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ge(s)&&s instanceof Qn){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&n.push(l);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${c}`)}}}remove(e){return Qe(this,void 0,void 0,function*(){try{return{data:yield Al(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}list(e,t,s){return Qe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Cd),t),{prefix:e||""});return{data:yield oA(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Qd="2.7.1",Ud={"X-Client-Info":`storage-js/${Qd}`};var VA=function(A,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{c(s.next(u))}catch(d){i(d)}}function l(u){try{c(s.throw(u))}catch(d){i(d)}}function c(u){u.done?a(u.value):n(u.value).then(o,l)}c((s=s.apply(A,e||[])).next())})};class Fd{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Ud),t),this.fetch=el(s)}listBuckets(){return VA(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ge(e))return{data:null,error:e};throw e}})}getBucket(e){return VA(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return VA(this,void 0,void 0,function*(){try{return{data:yield oA(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return VA(this,void 0,void 0,function*(){try{return{data:yield yd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}emptyBucket(e){return VA(this,void 0,void 0,function*(){try{return{data:yield oA(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}deleteBucket(e){return VA(this,void 0,void 0,function*(){try{return{data:yield Al(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}}class Ed extends Fd{constructor(e,t={},s){super(e,t,s)}from(e){return new vd(this.url,this.headers,e,this.fetch)}}const Nd="2.48.1";let Ft="";typeof Deno<"u"?Ft="deno":typeof document<"u"?Ft="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ft="react-native":Ft="node";const jd={"X-Client-Info":`supabase-js-${Ft}/${Nd}`},Id={headers:jd},Sd={schema:"public"},Hd={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_d={};var kd=function(A,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{c(s.next(u))}catch(d){i(d)}}function l(u){try{c(s.throw(u))}catch(d){i(d)}}function c(u){u.done?a(u.value):n(u.value).then(o,l)}c((s=s.apply(A,e||[])).next())})};const Td=A=>{let e;return A?e=A:typeof fetch>"u"?e=Oo:e=fetch,(...t)=>e(...t)},Ld=()=>typeof Headers>"u"?Do:Headers,Pd=(A,e,t)=>{const s=Td(t),n=Ld();return(a,i)=>kd(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:A;let c=new n(i==null?void 0:i.headers);return c.has("apikey")||c.set("apikey",A),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),s(a,Object.assign(Object.assign({},i),{headers:c}))})};var Od=function(A,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{c(s.next(u))}catch(d){i(d)}}function l(u){try{c(s.throw(u))}catch(d){i(d)}}function c(u){u.done?a(u.value):n(u.value).then(o,l)}c((s=s.apply(A,e||[])).next())})};function Dd(A){return A.replace(/\/$/,"")}function Rd(A,e){const{db:t,auth:s,realtime:n,global:a}=A,{db:i,auth:o,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},i),t),auth:Object.assign(Object.assign({},o),s),realtime:Object.assign(Object.assign({},l),n),global:Object.assign(Object.assign({},c),a),accessToken:()=>Od(this,void 0,void 0,function*(){return""})};return A.accessToken?u.accessToken=A.accessToken:delete u.accessToken,u}const tl="2.67.3",Kd="http://localhost:9999",Md="supabase.auth.token",Vd={"X-Client-Info":`gotrue-js/${tl}`},Za=10,Fn="X-Supabase-Api-Version",sl={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Gd(A){return Math.round(Date.now()/1e3)+A}function $d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(A){const e=Math.random()*16|0;return(A=="x"?e:e&3|8).toString(16)})}const Xe=()=>typeof window<"u"&&typeof document<"u",bA={tested:!1,writable:!1},Lt=()=>{if(!Xe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bA.tested)return bA.writable;const A=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(A,A),globalThis.localStorage.removeItem(A),bA.tested=!0,bA.writable=!0}catch{bA.tested=!0,bA.writable=!1}return bA.writable};function Jd(A){const e={},t=new URL(A);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,a)=>{e[a]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const rl=A=>{let e;return A?e=A:typeof fetch>"u"?e=(...t)=>ot(async()=>{const{default:s}=await Promise.resolve().then(()=>mt);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Wd=A=>typeof A=="object"&&A!==null&&"status"in A&&"ok"in A&&"json"in A&&typeof A.json=="function",nl=async(A,e,t)=>{await A.setItem(e,JSON.stringify(t))},us=async(A,e)=>{const t=await A.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ds=async(A,e)=>{await A.removeItem(e)};function Xd(A){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,n,a,i,o,l,c,u=0;for(A=A.replace("-","+").replace("_","/");u<A.length;)i=e.indexOf(A.charAt(u++)),o=e.indexOf(A.charAt(u++)),l=e.indexOf(A.charAt(u++)),c=e.indexOf(A.charAt(u++)),s=i<<2|o>>4,n=(o&15)<<4|l>>2,a=(l&3)<<6|c,t=t+String.fromCharCode(s),l!=64&&n!=0&&(t=t+String.fromCharCode(n)),c!=64&&a!=0&&(t=t+String.fromCharCode(a));return t}class wr{constructor(){this.promise=new wr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}wr.promiseConstructor=Promise;function ei(A){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=A.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(Xd(s))}async function qd(A){return await new Promise(e=>{setTimeout(()=>e(null),A)})}function zd(A,e){return new Promise((s,n)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await A(a);if(!e(a,null,i)){s(i);return}}catch(i){if(!e(a,i)){n(i);return}}})()})}function Yd(A){return("0"+A.toString(16)).substr(-2)}function Zd(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let a=0;a<56;a++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Yd).join("")}async function eh(A){const t=new TextEncoder().encode(A),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(a=>String.fromCharCode(a)).join("")}function Ah(A){return btoa(A).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function th(A){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),A;const t=await eh(A);return Ah(t)}async function GA(A,e,t=!1){const s=Zd();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await nl(A,`${e}-code-verifier`,n);const a=await th(s);return[a,s===a?"plain":"s256"]}const sh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rh(A){const e=A.headers.get(Fn);if(!e||!e.match(sh))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class ga extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function J(A){return typeof A=="object"&&A!==null&&"__isAuthError"in A}class nh extends ga{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function ah(A){return J(A)&&A.name==="AuthApiError"}class al extends ga{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class DA extends ga{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class rA extends DA{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ih(A){return J(A)&&A.name==="AuthSessionMissingError"}class Vr extends DA{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class hs extends DA{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fs extends DA{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function oh(A){return J(A)&&A.name==="AuthImplicitGrantRedirectError"}class Ai extends DA{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class En extends DA{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Gr(A){return J(A)&&A.name==="AuthRetryableFetchError"}class ti extends DA{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var lh=function(A,e){var t={};for(var s in A)Object.prototype.hasOwnProperty.call(A,s)&&e.indexOf(s)<0&&(t[s]=A[s]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(A);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(A,s[n])&&(t[s[n]]=A[s[n]]);return t};const QA=A=>A.msg||A.message||A.error_description||A.error||JSON.stringify(A),ch=[502,503,504];async function si(A){var e;if(!Wd(A))throw new En(QA(A),0);if(ch.includes(A.status))throw new En(QA(A),A.status);let t;try{t=await A.json()}catch(a){throw new al(QA(a),a)}let s;const n=rh(A);if(n&&n.getTime()>=sl["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new ti(QA(t),A.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new rA}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new ti(QA(t),A.status,t.weak_password.reasons);throw new nh(QA(t),A.status||500,s)}const uh=(A,e,t,s)=>{const n={method:A,headers:(e==null?void 0:e.headers)||{}};return A==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function X(A,e,t,s){var n;const a=Object.assign({},s==null?void 0:s.headers);a[Fn]||(a[Fn]=sl["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const i=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(i.redirect_to=s.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await dh(A,e,t+o,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function dh(A,e,t,s,n,a){const i=uh(e,s,n,a);let o;try{o=await A(t,Object.assign({},i))}catch(l){throw console.error(l),new En(QA(l),0)}if(o.ok||await si(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(l){await si(l)}}function nA(A){var e;let t=null;gh(A)&&(t=Object.assign({},A),A.expires_at||(t.expires_at=Gd(A.expires_in)));const s=(e=A.user)!==null&&e!==void 0?e:A;return{data:{session:t,user:s},error:null}}function ri(A){const e=nA(A);return!e.error&&A.weak_password&&typeof A.weak_password=="object"&&Array.isArray(A.weak_password.reasons)&&A.weak_password.reasons.length&&A.weak_password.message&&typeof A.weak_password.message=="string"&&A.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=A.weak_password),e}function uA(A){var e;return{data:{user:(e=A.user)!==null&&e!==void 0?e:A},error:null}}function hh(A){return{data:A,error:null}}function fh(A){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a}=A,i=lh(A,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a},l=Object.assign({},i);return{data:{properties:o,user:l},error:null}}function mh(A){return A}function gh(A){return A.access_token&&A.refresh_token&&A.expires_in}var ph=function(A,e){var t={};for(var s in A)Object.prototype.hasOwnProperty.call(A,s)&&e.indexOf(s)<0&&(t[s]=A[s]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(A);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(A,s[n])&&(t[s[n]]=A[s[n]]);return t};class Bh{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=rl(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await X(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(J(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await X(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:uA})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=ph(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:fh,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(J(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await X(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:uA})}catch(t){if(J(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,a,i,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:mh});if(u.error)throw u.error;const d=await u.json(),h=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,f=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const B=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(m.split(";")[1].split("=")[1]);c[`${g}Page`]=B}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(J(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await X(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:uA})}catch(t){if(J(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await X(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:uA})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await X(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:uA})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await X(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(J(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await X(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}}}const wh={getItem:A=>Lt()?globalThis.localStorage.getItem(A):null,setItem:(A,e)=>{Lt()&&globalThis.localStorage.setItem(A,e)},removeItem:A=>{Lt()&&globalThis.localStorage.removeItem(A)}};function ni(A={}){return{getItem:e=>A[e]||null,setItem:(e,t)=>{A[e]=t},removeItem:e=>{delete A[e]}}}function xh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $A={debug:!!(globalThis&&Lt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class il extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class yh extends il{}async function bh(A,e,t){$A.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",A,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),$A.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",A)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(A,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){$A.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",A,n.name);try{return await t()}finally{$A.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",A,n.name)}}else{if(e===0)throw $A.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",A),new yh(`Acquiring an exclusive Navigator LockManager lock "${A}" immediately failed`);if($A.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}xh();const Ch={url:Kd,storageKey:Md,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vd,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},yt=30*1e3,ai=3;async function ii(A,e,t){return await t()}class $t{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$t.nextInstanceID,$t.nextInstanceID+=1,this.instanceID>0&&Xe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Ch),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Bh({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=rl(n.fetch),this.lock=n.lock||ii,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Xe()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=bh:this.lock=ii,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Lt()?this.storage=wh:(this.memoryStorage={},this.storage=ni(this.memoryStorage)):(this.memoryStorage={},this.storage=ni(this.memoryStorage)),Xe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tl}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Jd(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),Xe()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),oh(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return J(t)?{error:t}:{error:new al("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const a=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:nA}),{data:i,error:o}=a;if(o||!i)return{data:{user:null,session:null},error:o};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if(J(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,n;try{let a;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await GA(this.storage,this.storageKey)),a=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:m},xform:nA})}else if("phone"in e){const{phone:u,password:d,options:h}=e;a=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},channel:(n=h==null?void 0:h.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:nA})}else throw new hs("You must provide either an email or phone number and a password");const{data:i,error:o}=a;if(o||!i)return{data:{user:null,session:null},error:o};const l=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if(J(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:i,options:o}=e;t=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ri})}else if("phone"in e){const{phone:a,password:i,options:o}=e;t=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ri})}else throw new hs("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Vr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(J(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await us(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:a,error:i}=await X(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:nA});if(await ds(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Vr}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:n??null}),error:i})}catch(a){if(J(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:a,nonce:i}=e,o=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:nA}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Vr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(J(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,a,i;try{if("email"in e){const{email:o,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await GA(this.storage,this.storageKey));const{error:d}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:u}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new hs("You must provide either an email or phone number.")}catch(o){if(J(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{let n,a;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:o}=await X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:nA});if(o)throw o;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,c=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await GA(this.storage,this.storageKey)),await X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:hh})}catch(a){if(J(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new rA;const{error:n}=await X(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(J(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:a}=e,{error:i}=await X(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:s,type:n,options:a}=e,{data:i,error:o}=await X(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:o}}throw new hs("You must provide either an email or phone number and a type")}catch(t){if(J(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await us(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!i&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:uA}):await this._useSession(async t=>{var s,n,a;const{data:i,error:o}=t;if(o)throw o;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rA}:await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0,xform:uA})})}catch(t){if(J(t))return ih(t)&&(await this._removeSession(),await ds(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:a}=s;if(a)throw a;if(!n.session)throw new rA;const i=n.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await GA(this.storage,this.storageKey));const{data:c,error:u}=await X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:i.access_token,xform:uA});if(u)throw u;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return ei(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new rA;const t=Date.now()/1e3;let s=t,n=!0,a=null;const i=ei(e.access_token);if(i.exp&&(s=i.exp,n=s<=t),n){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(J(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:i,error:o}=t;if(o)throw o;e=(s=i.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new rA;const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(J(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Xe())throw new fs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Ai("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fs("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ai("No code detected.");const{data:w,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const Q=new URL(window.location.href);return Q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Q.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:a,refresh_token:i,expires_in:o,expires_at:l,token_type:c}=e;if(!a||!o||!i||!c)throw new fs("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(o);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=yt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const m=h-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,u);const{data:B,error:g}=await this._getUser(a);if(g)throw g;const p={provider_token:s,provider_refresh_token:n,access_token:a,expires_in:d,expires_at:h,refresh_token:i,token_type:c,user:B.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(s){if(J(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await us(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{error:a};const i=(s=n.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:o}=await this.admin.signOut(i,e);if(o&&!(ah(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await ds(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=$d(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:a},error:i}=t;if(i)throw i;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await GA(this.storage,this.storageKey,!0));try{return await X(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(J(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(J(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async a=>{var i,o,l,c,u;const{data:d,error:h}=a;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await X(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Xe()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(J(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:i}=t;if(i)throw i;return await X(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(J(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await zd(async n=>(n>0&&await qd(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nA})),(n,a)=>{const i=200*Math.pow(2,n);return a&&Gr(a)&&Date.now()+i-s<yt})}catch(s){if(this._debug(t,"error",s),J(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Xe()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await us(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=Math.round(Date.now()/1e3),a=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<n+Za;if(this._debug(t,`session has${a?"":" not"} expired with margin of ${Za}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Gr(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new rA;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new wr;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new rA;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(n,"error",a),J(a)){const i={session:null,error:a};return Gr(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){a.push(l)}});if(await Promise.all(i),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await nl(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ds(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),yt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/yt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${yt}ms, refresh threshold is ${ai} ticks`),n<=ai&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof il)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,i]=await GA(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);n.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await X(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(J(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:i}=t;if(i)return{data:null,error:i};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await X(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(J(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{data:null,error:a};const{data:i,error:o}=await X(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})})}catch(t){if(J(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await X(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(J(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=s.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:s,totp:n,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:a}=e;if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}$t.nextInstanceID=0;const vh=$t;class Qh extends vh{constructor(e){super(e)}}var Uh=function(A,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{c(s.next(u))}catch(d){i(d)}}function l(u){try{c(s.throw(u))}catch(d){i(d)}}function c(u){u.done?a(u.value):n(u.value).then(o,l)}c((s=s.apply(A,e||[])).next())})};class Fh{constructor(e,t,s){var n,a,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=Dd(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:Sd,realtime:_d,auth:Object.assign(Object.assign({},Hd),{storageKey:l}),global:Id},u=Rd(s??{},c);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=Pd(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Zu(`${o}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Nu(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ed(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Uh(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:a,flowType:i,lock:o,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Qh({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:i,lock:o,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new fd(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Eh=(A,e,t)=>new Fh(A,e,t),ol="https://xpxbxfuckljqdvkajlmx.supabase.co",Nh="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhweGJ4ZnVja2xqcWR2a2FqbG14Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDYyODc4MDMsImV4cCI6MjA2MTg2MzgwM30.7NKWDfbBdCzvH39BrZBUopr12V_bKUqnNI-OdR-MdIs";console.log("Supabase URL:",ol);console.log("Supabase Anon Key:","Provided");const rs=Eh(ol,Nh,{auth:{autoRefreshToken:!0,persistSession:!0}});console.log("Initializing Supabase connection...");rs.auth.onAuthStateChange((A,e)=>{A==="SIGNED_IN"?console.log("Connected to Supabase successfully"):A==="SIGNED_OUT"&&console.log("Disconnected from Supabase")});const jh={baseKwhPrice:.26,surplusSellPrices:{under9kw:.04,from9to36kw:.11,from36to100kw:.09},totalSellPrices:{under9kw:.2,from9to36kw:.17,from36to100kw:.14},sellPriceDate:"2025-02-01",defaultAutoconsumption:75,defaultEnergyRevaluation:7,defaultSellIndexation:2,defaultPanelDegradation:-.2},Ih={25:{2.5:49,3:59,3.5:68.5,4:78,4.5:87,5:96,5.5:105.5,6:115,6.5:124,7:132,7.5:140,8:149,8.5:158,9:167},20:{2.5:51.6,3:63.6,3.5:72,4:82.8,4.5:92,5:100.8,5.5:111.6,6:120,6.5:129.6,7:138,7.5:146.4,8:156,8.5:164.4,9:174},15:{2.5:56.4,3:73.2,3.5:80.4,4:91.2,4.5:102,5:111.6,5.5:122.4,6:130.8,6.5:142.8,7:150,7.5:159.6,8:169.2,8.5:177.6,9:189.6},10:{2.5:67.2,3:86.4,3.5:97.2,4:106.8,4.5:120,5:134.4,5.5:144,6:153.6,6.5:165.6,7:174,7.5:178.8,8:192,8.5:200.4,9:206.4}},Sh={2.5:6890,3:7890,3.5:8890,4:9890,4.5:10890,5:11890,5.5:12890,6:14890,6.5:15890,7:16890,7.5:17890,8:18890,8.5:19890,9:19890};function ll(){try{const A=localStorage.getItem("installation_prices");if(!A)return console.log("No custom prices found in localStorage"),[];let e;try{e=JSON.parse(A)}catch(s){return console.error("Invalid JSON in localStorage:",s),localStorage.removeItem("installation_prices"),[]}if(!Array.isArray(e))return console.warn("Custom prices must be an array"),[];const t=e.filter(s=>typeof s=="object"&&s!==null&&typeof s.power=="number"&&typeof s.price=="number"&&s.power>0&&s.price>0);return t.sort((s,n)=>s.power-n.power),console.log("Loaded custom prices:",t),t}catch(A){return console.error("Error loading custom prices:",A),[]}}function Hh(A,e){try{const t=ll(),s=t.findIndex(n=>Math.abs(n.power-A)<.01);s>=0?t[s].price=e:t.push({power:A,price:e}),t.sort((n,a)=>n.power-a.power),localStorage.setItem("installation_prices",JSON.stringify(t)),window.dispatchEvent(new CustomEvent("customPricesUpdated",{detail:t})),console.log("Saved custom price:",{power:A,price:e})}catch(t){throw console.error("Error saving custom price:",t),t}}function Nn(A,e){var n;if(!((n=e==null?void 0:e.subsidies)!=null&&n.length))return console.log("No subsidies found in settings"),0;console.log("Calculating subsidy for power:",A,"kWc");const t=e.subsidies.find(a=>{const i=a.min,o=a.max;if(typeof i!="number"||typeof o!="number")return console.log("Subsidy ignored due to invalid min/max:",{min:i,max:o}),!1;const l=A>=i&&A<=o;return console.log(`Checking range ${i}-${o}kWc:`,l?"applicable":"not applicable"),l});if(!t)return console.log("No applicable subsidy found for this power"),0;console.log("Found applicable subsidy:",t);const s=Math.round(t.amount*A);return console.log("Calculated subsidy amount:",s,"€"),s}function Jt(A){const e=Math.round(A*2)/2;console.log(`Getting price for ${e} kWc`);const t=ll(),s=t.find(a=>Math.abs(a.power-e)<.01);if(s)return console.log(`Found exact custom price match: ${s.price}€ for ${s.power} kWc`),s.price;if(e<=9){const a=Sh[e];return a?(console.log(`Using default price for ${e} kWc: ${a}€`),a):(console.warn(`No default price found for ${e} kWc`),0)}const n=t.filter(a=>a.power>9);if(n.length>0){const a=n.reduce((i,o)=>Math.abs(o.power-e)<Math.abs(i.power-e)?o:i);return console.log(`Using closest pro price: ${a.price}€ for ${a.power} kWc`),a.price}return console.log(`No price found for ${e} kWc`),0}function zs(A,e){var s;const t=Math.round(A*2)/2;return((s=Ih[e.toString()])==null?void 0:s[t])||0}function pa(A){return A<=3?1500:A<=6?1800:2200}function _h(A,e,t,s=!1){const n=Jt(A);if(n===0)return console.error(`Could not find price for power ${A} kWc`),0;const a=s?pa(A):0;return n+a-e-t}const jn=[{power:2.5,price:6890},{power:3,price:7890},{power:3.5,price:8890},{power:4,price:9890},{power:4.5,price:10890},{power:5,price:11890},{power:5.5,price:12890},{power:6,price:14890},{power:6.5,price:15890},{power:7,price:16890},{power:7.5,price:17890},{power:8,price:18890},{power:8.5,price:19890},{power:9,price:19890}],Ue={...jh,installationPrices:jn},cl=x.createContext(void 0);function kh({children:A}){const[e,t]=x.useState(()=>{try{const i={...Ue,baseKwhPrice:parseFloat(localStorage.getItem("base_kwh_price")||Ue.baseKwhPrice.toString()),surplusSellPrices:{under9kw:parseFloat(localStorage.getItem("surplus_sell_price_under_9kw")||Ue.surplusSellPrices.under9kw.toString()),from9to36kw:parseFloat(localStorage.getItem("surplus_sell_price_9to36kw")||Ue.surplusSellPrices.from9to36kw.toString()),from36to100kw:parseFloat(localStorage.getItem("surplus_sell_price_36to100kw")||Ue.surplusSellPrices.from36to100kw.toString())},totalSellPrices:{under9kw:parseFloat(localStorage.getItem("total_sell_price_under_9kw")||Ue.totalSellPrices.under9kw.toString()),from9to36kw:parseFloat(localStorage.getItem("total_sell_price_9to36kw")||Ue.totalSellPrices.from9to36kw.toString()),from36to100kw:parseFloat(localStorage.getItem("total_sell_price_36to100kw")||Ue.totalSellPrices.from36to100kw.toString())},sellPriceDate:localStorage.getItem("sell_price_date")||Ue.sellPriceDate,defaultAutoconsumption:parseFloat(localStorage.getItem("default_autoconsumption")||Ue.defaultAutoconsumption.toString()),defaultEnergyRevaluation:parseFloat(localStorage.getItem("default_energy_revaluation")||Ue.defaultEnergyRevaluation.toString()),defaultSellIndexation:parseFloat(localStorage.getItem("default_sell_indexation")||Ue.defaultSellIndexation.toString()),defaultPanelDegradation:parseFloat(localStorage.getItem("default_panel_degradation")||Ue.defaultPanelDegradation.toString()),installationPrices:[...jn],subsidies:[]},o=localStorage.getItem("installation_prices");if(o)try{const l=JSON.parse(o);if(Array.isArray(l)){const c=l.filter(h=>h&&typeof h.power=="number"&&typeof h.price=="number"&&h.power>0),u=i.installationPrices.map(h=>c.find(m=>Math.abs(m.power-h.power)<.01)||h),d=c.filter(h=>h.power>9);i.installationPrices=[...u,...d].sort((h,f)=>h.power-f.power),console.log("Loaded custom prices:",c)}}catch(l){console.error("Error parsing custom prices:",l)}return i}catch(i){return console.error("Error loading settings:",i),Ue}});x.useEffect(()=>{const i=o=>{const l=o.detail;Array.isArray(l)&&t(c=>{const u=c.installationPrices.filter(f=>f.power<=9).map(f=>l.find(B=>Math.abs(B.power-f.power)<.01)||f),d=l.filter(f=>f.power>9),h=[...u,...d].sort((f,m)=>f.power-m.power);return{...c,installationPrices:h}})};return window.addEventListener("customPricesUpdated",i),()=>{window.removeEventListener("customPricesUpdated",i)}},[]),x.useEffect(()=>{(async()=>{try{const o=new Date().toISOString().split("T")[0],{data:l,error:c}=await rs.from("subsidies").select("id, amount, effective_date, power_range").lte("effective_date",o).order("effective_date",{ascending:!1});if(c)throw c;const u=l.reduce((d,h)=>{const[f,m]=h.power_range.split("-").map(Number);return d.findIndex(g=>g.min===f&&g.max===m)===-1&&d.push({min:f,max:m,amount:h.amount}),d},[]);t(d=>({...d,subsidies:u}))}catch(o){console.error("Error loading subsidies:",o)}})()},[]);const s=i=>{t(o=>{const l={...o,...i};if(i.baseKwhPrice!==void 0&&localStorage.setItem("base_kwh_price",i.baseKwhPrice.toString()),i.surplusSellPrices&&Object.entries(i.surplusSellPrices).forEach(([c,u])=>{localStorage.setItem(`surplus_sell_price_${c}`,u.toString())}),i.totalSellPrices&&Object.entries(i.totalSellPrices).forEach(([c,u])=>{localStorage.setItem(`total_sell_price_${c}`,u.toString())}),i.sellPriceDate&&localStorage.setItem("sell_price_date",i.sellPriceDate),i.defaultAutoconsumption!==void 0&&localStorage.setItem("default_autoconsumption",i.defaultAutoconsumption.toString()),i.defaultEnergyRevaluation!==void 0&&localStorage.setItem("default_energy_revaluation",i.defaultEnergyRevaluation.toString()),i.defaultSellIndexation!==void 0&&localStorage.setItem("default_sell_indexation",i.defaultSellIndexation.toString()),i.defaultPanelDegradation!==void 0&&localStorage.setItem("default_panel_degradation",i.defaultPanelDegradation.toString()),i.installationPrices){const c=i.installationPrices.filter(h=>h.power<=9).map(h=>({power:h.power,price:h.price})),u=localStorage.getItem("installation_prices");let d=[];try{d=u?JSON.parse(u):[],d=d.filter(h=>h.power>9)}catch(h){console.error("Error parsing existing prices:",h)}c.forEach(h=>{const f=jn.find(m=>m.power===h.power);f&&h.price!==f.price&&d.push(h)}),localStorage.setItem("installation_prices",JSON.stringify(d)),window.dispatchEvent(new CustomEvent("customPricesUpdated",{detail:d}))}return l})},n=(i,o)=>{if(i<=0||o<=0){console.error("Power and price must be positive");return}t(l=>{const c=l.installationPrices.findIndex(d=>Math.abs(d.power-i)<.01);let u;return c>=0?(u=[...l.installationPrices],u[c]={power:i,price:o}):u=[...l.installationPrices,{power:i,price:o}],u.sort((d,h)=>d.power-h.power),Hh(i,o),{...l,installationPrices:u}})},a=i=>{if(i<=9){console.error("Cannot remove default prices");return}t(o=>{const l=o.installationPrices.filter(u=>Math.abs(u.power-i)>=.01),c=localStorage.getItem("installation_prices");if(c)try{const d=JSON.parse(c).filter(h=>Math.abs(h.power-i)>=.01);localStorage.setItem("installation_prices",JSON.stringify(d)),window.dispatchEvent(new CustomEvent("customPricesUpdated",{detail:d}))}catch(u){console.error("Error updating localStorage after price removal:",u)}return{...o,installationPrices:l}})};return r.jsx(cl.Provider,{value:{settings:e,updateSettings:s,addInstallationPrice:n,removeInstallationPrice:a},children:A})}function RA(){const A=x.useContext(cl);if(A===void 0)throw new Error("useFinancialSettings must be used within a FinancialSettingsProvider");return A}/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Th={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=A=>A.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),T=(A,e)=>{const t=x.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:l,...c},u)=>x.createElement("svg",{ref:u,...Th,width:n,height:n,stroke:s,strokeWidth:i?Number(a)*24/Number(n):a,className:["lucide",`lucide-${Lh(A)}`,o].join(" "),...c},[...e.map(([d,h])=>x.createElement(d,h)),...Array.isArray(l)?l:[l]]));return t.displayName=`${A}`,t};/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=T("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=T("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=T("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=T("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=T("BatteryCharging",[["path",{d:"M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2",key:"1sdynx"}],["path",{d:"M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1",key:"1gkd3k"}],["path",{d:"m11 7-3 5h4l-3 5",key:"b4a64w"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=T("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=T("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=T("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=T("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=T("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=T("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=T("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=T("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=T("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=T("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=T("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=T("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=T("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=T("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=T("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=T("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=T("CloudLightning",[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=T("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=T("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=T("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=T("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=T("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=T("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=T("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=T("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=T("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=T("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=T("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=T("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=T("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=T("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=T("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=T("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=T("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=T("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=T("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=T("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=T("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=T("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=T("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=T("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=T("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=T("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=T("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=T("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=T("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=T("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=T("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=T("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z",key:"uf6l00"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h0",key:"k2aug8"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=T("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=T("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=T("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=T("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=T("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=T("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl=T("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=T("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=T("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=T("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=T("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=T("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=T("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=T("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=T("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=T("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=T("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=T("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function LA(A="smooth"){window.scrollTo({top:0,behavior:A})}function gf({isCollapsed:A}){const e=ht(),t=ft(),{clientInfo:s}=sA(),n=!!(s.civilite&&s.nom&&s.prenom&&s.telephone&&s.email),a=[{path:"/",label:"Dimensionnement",icon:$h,description:"Caractéristiques de votre installation"},{path:"/projection",label:"Projection financière",icon:xa,description:"Simulation de rentabilité"},{path:"/eligibilite",label:"Tester mon éligibilité",icon:Vh,description:"Vérification des conditions"},{path:"/report",label:"Rapport PDF",icon:pl,description:"Générer un rapport détaillé"},{path:"/modalites-abonnement",label:"Modalités d'abonnement",icon:dA,description:"Conditions et engagements",isStatic:!0},{path:"/modalites-sortie",label:"Modalités de sortie",icon:Wh,description:"Conditions de résiliation",isStatic:!0}],i=(o,l)=>{if(l||o==="/abie-link"||o==="/settings"||o==="/test-icoll"||o==="/agence"){t(o),LA();return}if(!n&&o!=="/"){alert("Veuillez remplir tous les champs obligatoires avant de continuer.");return}t(o),LA()};return r.jsx("nav",{className:`h-full py-6 transition-all duration-300 ${A?"px-2":"px-4"}`,children:r.jsxs("div",{className:"space-y-1",children:[a.map((o,l)=>{const c=o.icon,u=e.pathname===o.path,d=!o.isStatic&&!n&&o.path!=="/";return r.jsxs("button",{onClick:()=>i(o.path,o.isStatic),disabled:d,title:A?o.label:void 0,className:`w-full flex items-start gap-3 p-3 rounded-lg transition-colors ${u?"bg-[#2F80ED]/10 text-[#2F80ED]":d?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:bg-white/75"}`,children:[r.jsx("div",{className:"flex-shrink-0 flex items-center justify-center mt-0.5",children:r.jsx(c,{className:`h-5 w-5 ${u?"text-[#2F80ED]":d?"text-gray-300":"text-gray-400"}`})}),!A&&r.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[r.jsx("span",{className:"block text-sm font-medium",children:o.label}),r.jsx("span",{className:"block text-xs text-gray-500 mt-0.5 line-clamp-2",children:o.description})]})]},o.path)}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-300/50 space-y-2",children:[r.jsxs("button",{onClick:()=>i("/abie-link"),title:A?"Abie Link":void 0,className:`w-full flex items-center gap-3 p-3 rounded-lg transition-colors ${e.pathname==="/abie-link"?"bg-[#F2994A]/10 text-[#F2994A]":"text-gray-600 hover:bg-white/75"}`,children:[r.jsx(ba,{className:`h-5 w-5 ${e.pathname==="/abie-link"?"text-[#F2994A]":"text-gray-400"}`}),!A&&r.jsx("span",{className:"text-sm font-medium",children:"Abie Link"})]}),r.jsxs("button",{onClick:()=>i("/agence"),title:A?"Info agence":void 0,className:`w-full flex items-center gap-3 p-3 rounded-lg transition-colors ${e.pathname==="/agence"?"bg-[#2F80ED]/10 text-[#2F80ED]":"text-gray-600 hover:bg-white/75"}`,children:[r.jsx(dl,{className:`h-5 w-5 ${e.pathname==="/agence"?"text-[#2F80ED]":"text-gray-400"}`}),!A&&r.jsx("span",{className:"text-sm font-medium",children:"Info agence"})]}),r.jsxs("button",{onClick:()=>i("/test-icoll"),title:A?"Test iColl":void 0,className:`w-full flex items-center gap-3 p-3 rounded-lg transition-colors ${e.pathname==="/test-icoll"?"bg-[#F2994A]/10 text-[#F2994A]":"text-gray-600 hover:bg-white/75"}`,children:[r.jsx(Oh,{className:`h-5 w-5 ${e.pathname==="/test-icoll"?"text-[#F2994A]":"text-gray-400"}`}),!A&&r.jsx("span",{className:"text-sm font-medium",children:"Test iColl"})]})]}),r.jsx("div",{className:"mt-4",children:r.jsxs("button",{onClick:()=>i("/settings"),title:A?"Réglages":void 0,className:`w-full flex items-center gap-3 p-3 rounded-lg transition-colors ${e.pathname==="/settings"?"bg-white/75 text-gray-900":"text-gray-600 hover:bg-white/75"}`,children:[r.jsx(hf,{className:`h-5 w-5 ${e.pathname==="/settings"?"text-gray-900":"text-gray-400"}`}),!A&&r.jsx("span",{className:"text-sm font-medium",children:"Réglages"})]})})]})})}function pf({children:A}){const[e,t]=x.useState(!1);return x.useEffect(()=>{const s=()=>{window.innerWidth>=1024&&t(!1)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),r.jsxs("div",{className:"min-h-screen flex flex-col",children:[r.jsx("div",{className:"fixed inset-y-0 left-0 z-30",children:r.jsxs("div",{className:`fixed inset-y-0 bg-gradient-to-b from-[#F6F9FC] to-[#EDF3F8] border-r border-gray-200 transition-all duration-300 ease-in-out ${e?"w-64":"w-16"}`,children:[r.jsx("button",{onClick:()=>t(!e),className:"absolute top-4 left-4 p-1 rounded-lg transition-colors hover:bg-white/50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2F80ED]","aria-label":e?"Réduire le menu":"Ouvrir le menu",children:e?r.jsx(qt,{className:"h-5 w-5 text-[#2F80ED]"}):r.jsx(rf,{className:"h-5 w-5 text-[#2F80ED]"})}),r.jsx("div",{className:"h-full pt-16",children:r.jsx(gf,{isCollapsed:!e})})]})}),e&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 transition-opacity lg:hidden z-20",onClick:()=>t(!1)}),r.jsx("div",{className:`flex-1 transition-all duration-300 ${e?"lg:pl-64":"lg:pl-16"}`,children:A})]})}function di(){return r.jsx("div",{className:"h-32",children:r.jsx("img",{src:"https://i.postimg.cc/7Z49VZpw/ABI-e-nergie-Blanc.png",alt:"ABI Énergie",className:"h-full w-auto"})})}function Bf(){const A=ht();return["/modalites-abonnement","/modalites-sortie"].includes(A.pathname)?r.jsx("header",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(di,{})}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Xt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-400"}),r.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Simulateur Solaire"})]})]})})}):r.jsxs("header",{className:"relative w-full bg-gradient-to-b from-blue-900 to-blue-700",children:[r.jsx("div",{className:"absolute inset-0",children:r.jsx("img",{src:"https://images.unsplash.com/photo-1508514177221-188b1cf16e9d?auto=format&fit=crop&q=80",alt:"Solar panels under blue sky with sun",className:"w-full h-80 object-cover brightness-50"})}),r.jsx("div",{className:"relative z-10 h-80",children:r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(di,{})}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Xt,{className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-400"}),r.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-white",children:"Simulateur Solaire"})]})]})})}),r.jsx("div",{className:"flex-1 flex items-center",children:r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white mb-3",children:"Optimisez votre transition énergétique"}),r.jsx("p",{className:"text-base sm:text-lg text-gray-200 max-w-2xl mx-auto",children:"Calculez votre potentiel solaire et découvrez les économies possibles avec une installation photovoltaïque adaptée à vos besoins"})]})})})})]})})]})}const wf={"01":1320,"02":1140,"03":1290,"04":1540,"05":1540,"06":1590,"07":1450,"08":1070,"09":1350,10:1210,11:1580,12:1410,13:1580,14:1170,15:1290,16:1340,17:1450,18:1250,19:1320,21:1240,22:1200,23:1280,24:1360,25:1240,26:1470,27:1220,28:1220,29:1200,30:1580,31:1430,32:1400,33:1400,34:1580,35:1220,36:1280,37:1280,38:1390,39:1270,40:1380,41:1250,42:1380,43:1330,44:1290,45:1220,46:1390,47:1420,48:1380,49:1290,50:1150,51:1170,52:1170,53:1220,54:1170,55:1170,56:1290,57:1220,58:1270,59:1050,60:1180,61:1180,62:1120,63:1300,64:1340,65:1350,66:1580,67:1190,68:1190,69:1340,70:1190,71:1290,72:1220,73:1380,74:1310,75:1140,76:1140,77:1140,78:1180,79:1330,80:1120,81:1410,82:1420,83:1560,84:1630,85:1340,86:1310,87:1320,88:1220,89:1210,90:1190,91:1210,92:1180,93:1180,94:1180,95:1180,971:2e3,972:2e3,973:1800,974:2200,976:1800,"2B":1580};function br(A){const e=wf[A];return e||(console.warn(`Pas de données d'ensoleillement pour le département ${A}, utilisation de la moyenne nationale`),1300)}const $r={[-90]:{0:1,10:.99,15:.99,20:.97,25:.97,30:.94,35:.94,40:.9,45:.9,50:.84,55:.84,60:.81,90:.58},90:{0:1,10:.99,15:.99,20:.97,25:.97,30:.94,35:.94,40:.9,45:.9,50:.84,55:.84,60:.81,90:.58},0:{0:1,10:1.1,15:1.1,20:1.14,25:1.14,30:1.15,35:1.15,40:1.14,45:1.14,50:1.1,55:1.1,60:1.08,90:.79},[-45]:{0:1,10:1.07,15:1.07,20:1.09,25:1.09,30:1.09,35:1.09,40:1.07,45:1.07,50:1.03,55:1.03,60:1,90:.74},45:{0:1,10:1.07,15:1.07,20:1.09,25:1.09,30:1.09,35:1.09,40:1.07,45:1.07,50:1.03,55:1.03,60:1,90:.74}};function Cl(A,e){const t=Math.max(-90,Math.min(90,A)),n=Object.keys($r).map(Number).reduce((l,c)=>Math.abs(c-t)<Math.abs(l-t)?c:l),a=Math.max(0,Math.min(90,e)),o=Object.keys($r[n]).map(Number).reduce((l,c)=>Math.abs(c-a)<Math.abs(l-a)?c:l);return $r[n][o]}function xf(A,e,t,s,n,a=0){const i=br(n),o=Cl(s,t);let l=i*o*A;return l=l*(1-e/100),l=l*(1-a/100),Math.round(l)}async function yf(A){if(!A.adresse.codePostal)throw new Error("Code postal manquant");if(!A.typeCompteur)throw new Error("Type de compteur manquant");const e=A.nombreModules*A.puissanceModules/1e3,t=A.nombreModules*A.puissanceModules/500*2.25;try{const s=A.adresse.codePostal.substring(0,2);return{productionAnnuelle:xf(e,A.pertes,A.inclinaison,A.orientation,s,A.masqueSolaire),puissanceCrete:Math.round(e*100)/100,surfaceTotale:Math.round(t*100)/100,typeCompteur:A.typeCompteur}}catch(s){throw console.error("Erreur lors du calcul:",s),new Error("Erreur lors du calcul de la production")}}const hi={monophase:6,triphase:9};function vl(A){return A==="monophase"?hi.monophase:hi.triphase}const bf={LOAD_SHIFTING:1.05,PEAK_HOURS:{SUMMER:{start:11,end:16},WINTER:{start:12,end:15}},SHIFTABLE_LOADS:{WASHING_MACHINE:{power:2e3,duration:2},DISHWASHER:{power:1500,duration:1.5},DRYER:{power:2500,duration:1},WATER_HEATER:{power:2e3,duration:2},POOL_PUMP:{power:800,duration:6}}};function Cf(A,e){if(!e||!A)return 0;const t=A/e;let s;return t<=.35?s=.95:t<=.45?s=.9:t<=.6?s=.85:s=.75,s*=bf.LOAD_SHIFTING,Math.round(s*100)}function vf(A){return A>=90?"Optimisation maximale : excellente rentabilité grâce au déplacement intelligent des consommations":A>=85?"Très forte rentabilité grâce à une autoconsommation optimisée aux heures solaires":A>=75?"Excellent retour sur investissement avec une consommation adaptée à la production":"Forte rentabilité grâce à une bonne gestion de la consommation"}const Qf=.25,Uf=.1269;function Ff(A,e){const t=A*e/100,s=A-t,n=t*Qf,a=s*Uf;return{economiesAnnuelles:Math.round(n),reventeAnnuelle:Math.round(a)}}function Ef(A){const{consommationAnnuelle:e,codePostal:t,typeCompteur:s}=A;if(!e||!t||e<=0)return null;const n=t.substring(0,2),a=br(n),i=9/1e4;let o=e*i;o=Math.max(o,3);const l=vl(s),c=Math.min(o,l),u=Math.ceil(c*1e3/500),d=u*500/1e3,h=Math.round(d*a),f=Cf(h,e),{economiesAnnuelles:m,reventeAnnuelle:B}=Ff(h,f);let g=null;return o>l&&(g=`Une installation plus puissante de ${o.toFixed(1)} kWc maximiserait vos économies. Contactez-nous pour étudier la possibilité de passer en triphasé ou d'installer plusieurs onduleurs.`),{nombreModules:u,puissanceCrete:d,production:h,tauxAutoconsommation:f,economiesAnnuelles:m,reventeAnnuelle:B,avertissement:g}}function ms({label:A,name:e,value:t,onChange:s,placeholder:n,disabled:a}){return r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:A}),r.jsx("input",{type:"text",name:e,value:t,onChange:s,placeholder:n,disabled:a,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 disabled:bg-gray-100",required:!a})]})}const gs=new Map,Jr={failures:0,lastFailure:0,threshold:10,resetTimeout:3e5,isOpen:function(){if(this.failures>=this.threshold){if(Date.now()-this.lastFailure<this.resetTimeout)return!0;this.failures=0}return!1},recordFailure:function(){this.failures++,this.lastFailure=Date.now(),console.log(`Circuit breaker failures: ${this.failures}/${this.threshold}`)},reset:function(){this.failures=0,this.lastFailure=0}},fi={Paris:{lat:48.8566,lon:2.3522},Lyon:{lat:45.7578,lon:4.832},Marseille:{lat:43.2965,lon:5.3698},Bordeaux:{lat:44.8378,lon:-.5792},Lille:{lat:50.6292,lon:3.0573},Toulouse:{lat:43.6047,lon:1.4442},Nice:{lat:43.7102,lon:7.262},Nantes:{lat:47.2184,lon:-1.5536},Strasbourg:{lat:48.5734,lon:7.5734},Montpellier:{lat:43.6108,lon:3.8767},Rennes:{lat:48.1173,lon:-1.6778},Grenoble:{lat:45.1885,lon:5.7245},Rouen:{lat:49.4431,lon:1.0993},Toulon:{lat:43.1242,lon:5.928},Dijon:{lat:47.322,lon:5.0415}};async function Nf(A){if(!A||A.length<3)return[];try{const e=A.trim(),t=e.toLowerCase();if(gs.has(t))return console.log("Using cached address suggestions for:",e),gs.get(t)||[];if(Jr.isOpen())return console.log("Circuit breaker is open - using fallback data immediately"),Wr(e);const s=new AbortController,n=setTimeout(()=>{s.abort(),console.log("Aborting address API request due to timeout (20s)")},2e4);try{console.log("Fetching address suggestions for:",e);const a=`https://api-adresse.data.gouv.fr/search/?q=${encodeURIComponent(e)}&limit=5&autocomplete=1`,i=await jf(a,{signal:s.signal,headers:{Accept:"application/json","User-Agent":"Simulateur Solaire/1.0"}},3);if(clearTimeout(n),!i.ok)throw console.error(`API address error: ${i.status} ${i.statusText}`),new Error(`HTTP Error: ${i.status}`);const o=await i.json();if(!Array.isArray(o.features))throw console.error("Invalid response format:",o),new Error("Invalid response format");const l=o.features.filter(c=>c.properties.type==="housenumber"||c.properties.type==="street");return console.log(`Received ${l.length} address suggestions`),gs.set(t,l),Jr.reset(),l}catch(a){if(clearTimeout(n),Jr.recordFailure(),a.name==="AbortError"){console.error("Address API request timeout");const i=gs.get(t);if(i)return i}return console.error("Address API network error:",{message:a.message,name:a.name,stack:a.stack,cause:a.cause}),Wr(e)}}catch(e){return console.error("Error retrieving address suggestions:",e),Wr(A.trim())}}function Wr(A){const e=A.toLowerCase(),t=Object.keys(fi).filter(s=>s.toLowerCase().includes(e)||e.includes(s.toLowerCase()));return t.length>0?t.map(s=>{const n=fi[s];return{type:"Feature",geometry:{type:"Point",coordinates:[n.lon,n.lat]},properties:{label:`${s} (Service temporairement indisponible - Saisie manuelle recommandée)`,score:1,type:"city",name:s,postcode:"",citycode:"",x:n.lon,y:n.lat,city:s,context:"",id:"",importance:1,street:"",housenumber:""}}}):[{type:"Feature",geometry:{type:"Point",coordinates:[2.3522,48.8566]},properties:{label:"Service de suggestion d'adresses temporairement indisponible. Veuillez saisir votre adresse manuellement.",score:0,type:"message",name:"",postcode:"",citycode:"",x:2.3522,y:48.8566,city:"",context:"",id:"",importance:0,street:"",housenumber:""}}]}async function jf(A,e,t){var n,a;let s=null;for(let i=0;i<t;i++)try{if(i>0){const l=Math.min(1e3*Math.pow(2,i)+Math.random()*1e3,2e4);console.log(`Retry attempt ${i+1}/${t} for ${A} after ${Math.round(l)}ms`),await new Promise(c=>setTimeout(c,l))}if((n=e.signal)!=null&&n.aborted)throw new Error("Request was aborted");const o=await fetch(A,e);if(o.status===504)throw new Error("Gateway Timeout - Service temporarily unavailable");if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o}catch(o){if(console.error(`Fetch attempt ${i+1} failed:`,{attempt:i+1,maxRetries:t,url:A,error:{name:o.name,message:o.message,stack:o.stack,cause:o.cause}}),s=o instanceof Error?o:new Error(String(o)),o instanceof Error&&(o.name==="AbortError"||(a=e.signal)!=null&&a.aborted))throw o;if(i===t-1)throw s}throw s||new Error(`Failed to fetch after ${t} attempts`)}function If({value:A,onChange:e,onSelect:t}){const[s,n]=x.useState([]),[a,i]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(null),[d,h]=x.useState(!1),[f,m]=x.useState(!1),[B,g]=x.useState(""),[p,w]=x.useState(""),N=x.useRef(null),Q=x.useRef();x.useEffect(()=>{const C=async()=>{if(!A||A.length<3||d||f){n([]),u(null);return}l(!0),u(null);try{const U=await Nf(A);n(U),i(U.length>0),U.length===0&&A.length>5&&u("Aucune adresse trouvée. Essayez la saisie manuelle.")}catch(U){console.error("Erreur lors de la récupération des suggestions:",U),u("Impossible de récupérer les suggestions. Veuillez réessayer."),n([])}finally{l(!1)}};return Q.current&&clearTimeout(Q.current),Q.current=setTimeout(C,300),()=>{Q.current&&clearTimeout(Q.current)}},[A,d,f]),x.useEffect(()=>{const C=U=>{N.current&&!N.current.contains(U.target)&&i(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const v=C=>{h(!1),u(null);const U=C.target.value||"";e(U)},y=C=>{const{properties:U,geometry:j}=C,O={lat:j.coordinates[1],lon:j.coordinates[0]},_=U.housenumber?`${U.housenumber} ${U.street}`:U.street;console.log("Suggestion sélectionnée:",{streetAddress:_,postcode:U.postcode,city:U.city,coordinates:O}),h(!0),e(_),t(_,U.postcode,U.city,O),i(!1),n([])},E=()=>{m(!0),i(!1),n([]),u(null)},b=()=>{if(A&&B&&p){const C={lat:46.603354,lon:1.888334};console.log("Adresse manuelle saisie:",{rue:A,codePostal:B,ville:p,coordinates:C}),h(!0),t(A,B,p,C),m(!1)}else u("Veuillez remplir tous les champs d'adresse")};return r.jsxs("div",{ref:N,className:"relative",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:A||"",onChange:v,onFocus:()=>!d&&!f&&i(!0),placeholder:"Entrez votre adresse...",className:`w-full pl-10 pr-4 py-2 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 ${c?"border-red-300":"border-gray-300"}`}),r.jsx(yl,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),o&&r.jsx("div",{className:"absolute right-3 top-2.5",children:r.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 rounded-full border-t-transparent"})})]}),c&&r.jsxs("div",{className:"mt-1 flex items-start gap-1",children:[r.jsx(ye,{className:"h-4 w-4 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("div",{children:r.jsx("p",{className:"text-sm text-red-600",children:c})})]}),!f&&!d&&r.jsx("div",{className:"mt-1 text-right",children:r.jsx("button",{onClick:E,className:"text-xs text-gray-500 hover:text-gray-700",children:"Saisie manuelle"})}),f&&r.jsxs("div",{className:"mt-2 space-y-3 p-3 border border-gray-200 rounded-md bg-gray-50",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Saisie manuelle de l'adresse"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Code postal"}),r.jsx("input",{type:"text",value:B,onChange:C=>g(C.target.value),placeholder:"75001",className:"w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm",maxLength:5})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Ville"}),r.jsx("input",{type:"text",value:p,onChange:C=>w(C.target.value),placeholder:"Paris",className:"w-full rounded-md border-gray-300 shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[r.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800",children:"Annuler"}),r.jsx("button",{type:"button",onClick:b,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"Valider"})]})]}),a&&s.length>0&&r.jsx("ul",{className:"absolute z-10 w-full mt-1 bg-white shadow-lg max-h-60 rounded-md py-1 text-base overflow-auto focus:outline-none sm:text-sm",children:s.map(C=>r.jsx("li",{onClick:()=>y(C),className:"cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-blue-50",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ks,{className:"h-4 w-4 text-gray-400 mr-2 flex-shrink-0"}),r.jsx("span",{className:"font-normal block truncate",children:C.properties.label})]})},C.properties.id))})]})}const Sf={"01":"Auvergne-Rhône-Alpes","03":"Auvergne-Rhône-Alpes","07":"Auvergne-Rhône-Alpes",15:"Auvergne-Rhône-Alpes",26:"Auvergne-Rhône-Alpes",38:"Auvergne-Rhône-Alpes",42:"Auvergne-Rhône-Alpes",43:"Auvergne-Rhône-Alpes",63:"Auvergne-Rhône-Alpes",69:"Auvergne-Rhône-Alpes",73:"Auvergne-Rhône-Alpes",74:"Auvergne-Rhône-Alpes",21:"Bourgogne-Franche-Comté",25:"Bourgogne-Franche-Comté",39:"Bourgogne-Franche-Comté",58:"Bourgogne-Franche-Comté",70:"Bourgogne-Franche-Comté",71:"Bourgogne-Franche-Comté",89:"Bourgogne-Franche-Comté",90:"Bourgogne-Franche-Comté",22:"Bretagne",29:"Bretagne",35:"Bretagne",56:"Bretagne",18:"Centre-Val de Loire",28:"Centre-Val de Loire",36:"Centre-Val de Loire",37:"Centre-Val de Loire",41:"Centre-Val de Loire",45:"Centre-Val de Loire","2A":"Corse","2B":"Corse","08":"Grand Est",10:"Grand Est",51:"Grand Est",52:"Grand Est",54:"Grand Est",55:"Grand Est",57:"Grand Est",67:"Grand Est",68:"Grand Est",88:"Grand Est","02":"Hauts-de-France",59:"Hauts-de-France",60:"Hauts-de-France",62:"Hauts-de-France",80:"Hauts-de-France",75:"Île-de-France",77:"Île-de-France",78:"Île-de-France",91:"Île-de-France",92:"Île-de-France",93:"Île-de-France",94:"Île-de-France",95:"Île-de-France",14:"Normandie",27:"Normandie",50:"Normandie",61:"Normandie",76:"Normandie",16:"Nouvelle-Aquitaine",17:"Nouvelle-Aquitaine",19:"Nouvelle-Aquitaine",23:"Nouvelle-Aquitaine",24:"Nouvelle-Aquitaine",33:"Nouvelle-Aquitaine",40:"Nouvelle-Aquitaine",47:"Nouvelle-Aquitaine",64:"Nouvelle-Aquitaine",79:"Nouvelle-Aquitaine",86:"Nouvelle-Aquitaine",87:"Nouvelle-Aquitaine","09":"Occitanie",11:"Occitanie",12:"Occitanie",30:"Occitanie",31:"Occitanie",32:"Occitanie",34:"Occitanie",46:"Occitanie",48:"Occitanie",65:"Occitanie",66:"Occitanie",81:"Occitanie",82:"Occitanie",44:"Pays de la Loire",49:"Pays de la Loire",53:"Pays de la Loire",72:"Pays de la Loire",85:"Pays de la Loire","04":"Provence-Alpes-Côte d'Azur","05":"Provence-Alpes-Côte d'Azur","06":"Provence-Alpes-Côte d'Azur",13:"Provence-Alpes-Côte d'Azur",83:"Provence-Alpes-Côte d'Azur",84:"Provence-Alpes-Côte d'Azur"};function mi(A){const e=A.substring(0,2);return Sf[e]||""}function Hf({address:A,onChange:e}){const{updateClientInfo:t}=sA();x.useEffect(()=>{if(A.codePostal&&!A.region){const n=mi(A.codePostal);n&&e("region",n)}},[A.codePostal,A.region,e]);const s=(n,a,i,o)=>{e("rue",""),e("codePostal",""),e("ville",""),e("region",""),e("coordinates",{lat:0,lon:0}),setTimeout(()=>{e("rue",n||""),e("codePostal",a||""),e("ville",i||""),e("coordinates",o);const l=mi(a);l&&e("region",l),t({adresse:n||"",codePostal:a||"",ville:i||""}),console.log("Adresse sélectionnée et enregistrée:",{rue:n,codePostal:a,ville:i,coordinates:o,region:l||""}),console.log("🚀 Adresse mise à jour via autocomplétion :",{rue:n,codePostal:a,ville:i})},10)};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rechercher votre adresse"}),r.jsx(If,{value:A.rue||"",onChange:n=>e("rue",n),onSelect:s})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ms,{label:"Code postal",name:"codePostal",value:A.codePostal||"",onChange:n=>{e("codePostal",n.target.value),t({codePostal:n.target.value})},placeholder:"75001",disabled:!!A.codePostal}),r.jsx(ms,{label:"Ville",name:"ville",value:A.ville||"",onChange:n=>{e("ville",n.target.value),t({ville:n.target.value})},placeholder:"Paris",disabled:!!A.ville})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(ms,{label:"Région",name:"region",value:A.region||"",onChange:n=>e("region",n.target.value),disabled:!0}),r.jsx(ms,{label:"Pays",name:"pays",value:A.pays||"France",onChange:n=>e("pays",n.target.value),disabled:!0})]}),A.coordinates&&r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Coordonnées: ",A.coordinates.lat.toFixed(6),", ",A.coordinates.lon.toFixed(6)]})]})}const gi={nombreModules:6,surfaceUnitaire:2.3,inclinaison:30,orientation:0,puissanceModules:500,pertes:14,masqueSolaire:0,typeCompteur:"monophase",consommationAnnuelle:1e4,microOnduleurs:!1,bifacial:!1,adresse:{rue:"",codePostal:"",ville:"",pays:"France"}},_f=[{value:"monophase",label:"Monophasé (limité à 6 kWc)"},{value:"triphase",label:"Triphasé"}];function Ot({label:A,name:e,value:t,onChange:s,options:n,unit:a}){return r.jsxs("div",{children:[r.jsxs("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700 mb-1",children:[A," ",a&&r.jsxs("span",{className:"text-gray-500",children:["(",a,")"]})]}),r.jsx("select",{id:e,name:e,value:t,onChange:s,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:n.map(i=>r.jsx("option",{value:i.value,children:i.label},i.value))})]})}function nt({label:A,name:e,value:t,onChange:s,min:n,max:a,step:i=1,unit:o,disabled:l=!1}){const c=Number.isFinite(t)?t:"";return r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[A," ",o&&r.jsxs("span",{className:"text-gray-500",children:["(",o,")"]})]}),r.jsx("input",{type:"number",name:e,value:c,onChange:s,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 disabled:bg-gray-100",min:n,max:a,step:i,disabled:l,required:!l})]})}function kf({value:A,onChange:e,label:t="Consommation annuelle estimée"}){const s=()=>{LA()};return r.jsxs("div",{className:"space-y-4",children:[r.jsx(nt,{label:t,name:"consommationAnnuelle",value:A,onChange:e,min:0,max:1e5,step:100,unit:"kWh/an"}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Vous trouverez votre consommation annuelle sur votre facture d'électricité."}),r.jsxs(it,{to:"/abie-link",onClick:s,className:"relative block bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl border border-blue-200 hover:border-blue-300 transition-colors group overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0",children:r.jsx("div",{className:"bg-amber-500 text-white text-xs px-3 py-1 rounded-bl-xl font-medium transform rotate-0",children:"Bientôt disponible"})}),r.jsxs("div",{className:"p-4 flex items-center gap-3",children:[r.jsx("div",{className:"flex-shrink-0 p-2.5 bg-blue-100 rounded-lg group-hover:bg-blue-200 transition-colors",children:r.jsx(zt,{className:"h-5 w-5 text-blue-600"})}),r.jsxs("div",{className:"flex-grow",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-blue-600",children:"Connecter mon compteur Linky"}),r.jsx("span",{className:"text-xs px-2 py-0.5 bg-white/80 text-blue-600 rounded-full border border-blue-200",children:"Optionnel"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Récupérez automatiquement vos données de consommation"})]}),r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"p-2 rounded-full group-hover:bg-blue-200/50 transition-colors",children:r.jsx(ba,{className:"h-5 w-5 text-blue-400 group-hover:text-blue-600 transition-colors"})})})]})]})]})]})}function Tf({typeCompteur:A,consommationAnnuelle:e,onTypeCompteurChange:t,onConsommationChange:s}){return r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dimensionnement"}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ot,{label:"Type de compteur",name:"typeCompteur",value:A,onChange:t,options:_f}),r.jsx(kf,{value:e,onChange:s})]})]})}function H(A){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:!1}).format(A)}function Lf(A){return A.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})}function Pf({recommendation:A,consommationAnnuelle:e,departement:t}){if(!A||!e)return null;const s=Math.round(A.production/e*100),n=A.economiesAnnuelles+A.reventeAnnuelle;return r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-6 rounded-lg shadow-lg",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Af,{className:"h-7 w-7 text-blue-500"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Solution photovoltaïque recommandée"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(Xt,{className:"h-5 w-5 text-amber-500"}),r.jsx("h4",{className:"font-medium text-gray-900",children:"Votre installation"})]}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[A.puissanceCrete.toFixed(2)," kWc"]}),r.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[A.nombreModules," panneaux haute performance de 500W"]})]}),r.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(Yh,{className:"h-5 w-5 text-green-500"}),r.jsx("h4",{className:"font-medium text-gray-900",children:"Production solaire"})]}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[A.production.toLocaleString()," kWh/an"]}),r.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[s,"% de votre consommation actuelle"]})]}),r.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(EA,{className:"h-5 w-5 text-blue-500"}),r.jsx("h4",{className:"font-medium text-gray-900",children:"Autonomie énergétique"})]}),r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[A.tauxAutoconsommation,"%"]}),r.jsx("p",{className:"text-gray-600",children:"d'autoconsommation"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:vf(A.tauxAutoconsommation)})]}),r.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(xl,{className:"h-5 w-5 text-emerald-500"}),r.jsx("h4",{className:"font-medium text-gray-900",children:"Économies 1ère année"})]}),r.jsxs("p",{className:"text-2xl font-bold text-emerald-600",children:[H(n),"/an"]}),r.jsxs("div",{className:"text-sm text-gray-600 mt-2 space-y-1",children:[r.jsxs("p",{children:["• Économies : ",H(A.economiesAnnuelles),"/an"]}),r.jsxs("p",{children:["• Revente : ",H(A.reventeAnnuelle),"/an"]})]})]})]}),A.avertissement?r.jsxs("div",{className:"mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-3",children:[r.jsx(ul,{className:"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-amber-800",children:A.avertissement})]}):r.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:r.jsx("p",{className:"text-sm text-green-800",children:"Cette installation est parfaitement dimensionnée pour maximiser vos économies tout en optimisant votre investissement. Vous bénéficierez d'excellentes performances et d'un retour sur investissement optimal."})})]})}function Dt({content:A}){const[e,t]=x.useState(!1);return r.jsxs("div",{className:"relative inline-block",children:[r.jsx(xr,{className:"h-4 w-4 text-gray-400 hover:text-gray-600 cursor-help inline-block ml-1",onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1)}),e&&r.jsxs("div",{className:"absolute z-10 w-72 px-4 py-3 text-sm bg-gray-900 text-white rounded-lg shadow-lg left-1/2 -translate-x-1/2 top-6",children:[r.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"}),A]})]})}function In({label:A,unit:e,tooltipContent:t,...s}){return r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[A," ",e&&r.jsxs("span",{className:"text-gray-500",children:["(",e,")"]})]}),r.jsx(Dt,{content:t})]}),r.jsx(nt,{label:"",...s,className:"mt-0"})]})}function Of({value:A,onChange:e,typeCompteur:t}){const{settings:s}=RA(),[n,a]=x.useState([]);x.useEffect(()=>{i();const o=()=>{i()};return window.addEventListener("customPricesUpdated",o),()=>{window.removeEventListener("customPricesUpdated",o)}},[s,t]);const i=()=>{const o=[{value:2.5,label:"2.5 kWc"}],l=s.installationPrices.map(h=>h.power).filter(h=>h>2.5).sort((h,f)=>h-f),c=vl(t),u=l.filter(h=>h<=9&&h<=c),d=l.filter(h=>h>9);[...u,...d].forEach(h=>{o.push({value:h,label:`${h.toFixed(1)} kWc${h>9?" (Pro)":""}`})}),a(o),console.log("Updated power options:",o)};return r.jsxs("div",{className:"space-y-2",children:[r.jsx(Ot,{label:"Puissance de l'installation",name:"puissanceCrete",value:A,onChange:o=>e(parseFloat(o.target.value)),options:n,unit:"kWc"}),t==="monophase"&&A<=9&&r.jsx("p",{className:"text-sm text-gray-500",children:"Limité à 6 kWc en monophasé"}),A>9&&r.jsx("p",{className:"text-sm text-amber-500",children:"Installation professionnelle - Paiement comptant uniquement"})]})}const Ql=[{value:-90,label:"EST"},{value:-45,label:"SUD-EST"},{value:0,label:"SUD"},{value:45,label:"SUD-OUEST"},{value:90,label:"OUEST"}],Df=Array.from({length:19},(A,e)=>({value:e*5,label:`${e*5}°`}));function Rf(A){const e=Ql.find(t=>t.value===A);return e?e.label:`${A}°`}const Kf=[{value:0,label:"Aucun ombrage (0% de pertes)"},{value:5,label:"Ombrage léger - arbres éloignés (5% de pertes)"},{value:10,label:"Ombrage modéré - quelques arbres proches (10% de pertes)"},{value:15,label:"Ombrage important - bâtiments voisins (15% de pertes)"},{value:20,label:"Ombrage très important - environnement dense (20% de pertes)"}];function Mf({orientation:A,inclinaison:e}){const t=Cl(A,e);return r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coefficient inclinaison/orientation"}),r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.toFixed(2)}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t>=1.1?"Excellent":t>=1?"Très bon":t>=.9?"Bon":t>=.8?"Acceptable":"Sous-optimal"})]})}function Vf({params:A,onChange:e,onSelectChange:t,onParamsChange:s}){const n=a=>{const i=Math.ceil(a*1e3/A.puissanceModules);s({nombreModules:i})};return r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Installation"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(Of,{value:A.nombreModules*A.puissanceModules/1e3,onChange:n,typeCompteur:A.typeCompteur}),r.jsx(nt,{label:"Nombre de modules",name:"nombreModules",value:A.nombreModules,onChange:e,min:1,max:100,disabled:!0}),r.jsx(Ot,{label:"Inclinaison",name:"inclinaison",value:A.inclinaison,onChange:t,options:Df,unit:"°"}),r.jsx(Ot,{label:"Orientation",name:"orientation",value:A.orientation,onChange:t,options:Ql}),r.jsx(In,{label:"Pertes système",name:"pertes",value:A.pertes,onChange:e,min:0,max:100,unit:"%",tooltipContent:"Les pertes système incluent les pertes dues aux câbles électriques, à la conversion DC/AC par l'onduleur, aux salissures sur les panneaux, et aux variations de température."}),r.jsx(Ot,{label:"Masque solaire",name:"masqueSolaire",value:A.masqueSolaire,onChange:t,options:Kf}),r.jsx("div",{className:"md:col-span-2",children:r.jsx(Mf,{orientation:A.orientation,inclinaison:A.inclinaison})})]})]})}function Ul({result:A,onModifyPower:e}){const t=A.puissanceCrete*1e3/500*2.25;return r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Résultats estimés"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Production annuelle"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[A.productionAnnuelle.toLocaleString()," kWh/an"]})]}),r.jsxs("div",{className:"relative bg-blue-50 p-4 rounded-lg group",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Puissance crête"}),r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[A.puissanceCrete.toFixed(1)," kWc"]}),e&&r.jsx("button",{onClick:e,className:"text-sm text-blue-600 hover:text-blue-800 opacity-0 group-hover:opacity-100 transition-opacity",children:"Modifier"})]})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Surface totale"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[t.toFixed(1)," m²"]})]})]})]})}function Gf({onReset:A,canProceed:e,result:t}){const s=ft(),n=ht(),{clientInfo:a}=sA(),i=!!(a.civilite&&a.nom&&a.prenom&&a.telephone&&a.email),o=()=>{if(!i){alert("Veuillez remplir tous les champs obligatoires avant de continuer.");return}if(!t){alert("Veuillez attendre la fin du calcul avant de continuer.");return}const l=n.state||{};s("/projection",{state:{...l,productionAnnuelle:t.productionAnnuelle,puissanceCrete:t.puissanceCrete,surfaceTotale:t.surfaceTotale}}),LA()};return r.jsxs("div",{className:"flex justify-between items-center mt-8 pt-4 border-t border-gray-200",children:[r.jsxs("button",{type:"button",onClick:A,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[r.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Réinitialiser"]}),r.jsxs("button",{type:"button",disabled:!e||!i,onClick:o,className:`inline-flex items-center px-6 py-2 shadow-sm text-sm font-medium rounded-md text-white transition-colors
          ${e&&i?"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"bg-gray-300 cursor-not-allowed"}`,children:["Continuer",r.jsx(wa,{className:"h-4 w-4 ml-2"})]})]})}function $f({codePostal:A}){if(!A)return null;const e=A.substring(0,2),t=br(e);return r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-yellow-50 p-4 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Xt,{className:"h-6 w-6 text-yellow-500"}),r.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Ensoleillement de votre région",r.jsx(Dt,{content:"Données issues de PVGIS (Photovoltaic Geographical Information System) de la Commission Européenne. L'ensoleillement est mesuré sur une surface horizontale en kWh/m²/an."})]})]}),r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsx("span",{className:"text-3xl font-bold text-blue-600",children:t.toLocaleString()}),r.jsx("span",{className:"text-gray-600",children:"kWh/m²/an"})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:t>=1500?"Excellent potentiel solaire":t>=1300?"Très bon potentiel solaire":t>=1100?"Bon potentiel solaire":"Potentiel solaire modéré"})]})}let ps=!1,JA=null;const Jf=()=>{var A;return(A=window.google)!=null&&A.maps?Promise.resolve():JA||(JA=new Promise((e,t)=>{if(ps)return;ps=!0;const s="AIzaSyASRVXnrCTIr-5qmuNljc_LMnSeHOUAVXc",n=document.createElement("script");n.src=`https://maps.googleapis.com/maps/api/js?key=${s}&libraries=places`,n.async=!0,n.defer=!0,n.onload=()=>{ps=!1,JA=null,e()},n.onerror=()=>{ps=!1,JA=null,t(new Error("Failed to load Google Maps API"))},document.head.appendChild(n)}),JA)};function Wf({coordinates:A,onCoordinatesChange:e}){const t=x.useRef(null),[s,n]=x.useState(null),[a,i]=x.useState(null),[o,l]=x.useState(!1),[c,u]=x.useState(!0),[d,h]=x.useState(null),[f,m]=x.useState(!1),[B,g]=x.useState(!1),[p,w]=x.useState(null),[N,Q]=x.useState(null);x.useEffect(()=>{let C=!0;return(async()=>{if(t.current)try{if(u(!0),await Jf(),!C)return;if(!s){const j=A?{lat:A.lat,lng:A.lon}:{lat:48.8566,lng:2.3522},O=new google.maps.Map(t.current,{center:j,zoom:18,mapTypeId:"satellite",mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_RIGHT,mapTypeIds:["roadmap","satellite"]},fullscreenControl:!1,streetViewControl:!0,zoomControl:!0,tilt:0});if(n(O),A){const _=new google.maps.Marker({position:{lat:A.lat,lng:A.lon},map:O,draggable:!0,animation:google.maps.Animation.DROP,title:"Votre installation"});i(_),_.addListener("dragend",()=>{const R=_.getPosition();R&&e&&(e({lat:R.lat(),lon:R.lng()}),E(R.lat(),R.lng()))}),O.addListener("click",R=>{R.latLng&&_&&(_.setPosition(R.latLng),e&&(e({lat:R.latLng.lat(),lon:R.latLng.lng()}),E(R.latLng.lat(),R.latLng.lng())))}),E(A.lat,A.lon)}}u(!1)}catch(j){console.error("Error initializing map:",j),C&&(h("Error initializing map"),u(!1))}})(),()=>{C=!1,a&&a.setMap(null),s&&google.maps.event.clearInstanceListeners(s)}},[]),x.useEffect(()=>{if(s&&A){if(s.setCenter({lat:A.lat,lng:A.lon}),a)a.setPosition({lat:A.lat,lng:A.lon});else{const C=new google.maps.Marker({position:{lat:A.lat,lng:A.lon},map:s,draggable:!0,animation:google.maps.Animation.DROP,title:"Votre installation"});i(C),C.addListener("dragend",()=>{const U=C.getPosition();U&&e&&(e({lat:U.lat(),lon:U.lng()}),E(U.lat(),U.lng()))})}E(A.lat,A.lon)}},[A,s,e]),x.useEffect(()=>{if(s){const C=()=>{google.maps.event.trigger(s,"resize"),A&&s.setCenter({lat:A.lat,lng:A.lon})};return window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C)}}},[s,A]);const v=()=>{l(!o),setTimeout(()=>{s&&(google.maps.event.trigger(s,"resize"),A&&s.setCenter({lat:A.lat,lng:A.lon}))},300)},y=()=>{s&&A&&(s.setCenter({lat:A.lat,lng:A.lon}),s.setZoom(18),a&&(a.setPosition({lat:A.lat,lng:A.lon}),e&&e(A),E(A.lat,A.lon)))},E=(C,U)=>{try{const j="AIzaSyASRVXnrCTIr-5qmuNljc_LMnSeHOUAVXc",O=`https://maps.googleapis.com/maps/api/staticmap?center=${C},${U}&zoom=20&size=600x400&maptype=satellite&markers=color:red%7C${C},${U}&key=${j}`;Q(null);const _=new Image;_.onload=()=>{w(O),localStorage.setItem("satellite_image_url",O),Q(null)},_.onerror=R=>{console.error("Failed to load static map image:",R),Q("Failed to load satellite image. Please verify your Google Maps API key configuration."),localStorage.removeItem("satellite_image_url"),w(null)},_.crossOrigin="anonymous",_.src=O}catch(j){console.error("Error generating static map image:",j),Q("Error generating satellite image"),localStorage.removeItem("satellite_image_url"),w(null)}},b=async()=>{if(!A){h("Impossible de capturer la carte. Coordonnées non disponibles.");return}try{m(!0),g(!1);const C="AIzaSyASRVXnrCTIr-5qmuNljc_LMnSeHOUAVXc",U=`https://maps.googleapis.com/maps/api/staticmap?center=${A.lat},${A.lon}&zoom=20&size=600x400&maptype=satellite&markers=color:red%7C${A.lat},${A.lon}&key=${C}`,j=new Image;j.crossOrigin="anonymous";const O=new Promise((_,R)=>{j.onload=_,j.onerror=R});j.src=U,await O,localStorage.setItem("satellite_image_url",U),w(U),Q(null),m(!1),g(!0),setTimeout(()=>g(!1),3e3)}catch(C){console.error("Erreur lors de la capture de la carte:",C),m(!1),Q("Impossible de capturer la carte satellite. Vérifiez votre clé API Google Maps."),localStorage.removeItem("satellite_image_url"),w(null)}};return r.jsxs("div",{className:`bg-white rounded-lg shadow transition-all duration-300 ${o?"fixed inset-4 z-50":""}`,children:[r.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ks,{className:"h-5 w-5 text-blue-500"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Vue satellite"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:b,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors",title:"Capturer pour le rapport PDF",disabled:f||!A,children:f?r.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 rounded-full border-t-transparent"}):r.jsx(oi,{className:"h-5 w-5"})}),r.jsx("button",{onClick:y,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors",title:"Réinitialiser la vue",children:r.jsx(cf,{className:"h-5 w-5"})}),r.jsx("button",{onClick:v,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors",title:o?"Réduire":"Agrandir",children:o?r.jsx(nf,{className:"h-5 w-5"}):r.jsx(sf,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{className:`relative ${o?"h-[calc(100%-60px)]":"h-[300px]"}`,children:[c&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 bg-opacity-75 z-10",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),d&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 z-10",children:r.jsxs("div",{className:"text-center p-4",children:[r.jsx("div",{className:"bg-red-100 p-2 rounded-full inline-flex items-center justify-center mb-2",children:r.jsx(Ks,{className:"h-6 w-6 text-red-500"})}),r.jsx("p",{className:"text-red-600",children:d}),r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Vérifiez que la clé API Google Maps est correctement configurée et que les APIs nécessaires sont activées."}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Réessayer"})]})}),r.jsx("div",{ref:t,className:"w-full h-full"}),!c&&!d&&r.jsx("div",{className:"absolute top-4 left-4 bg-white bg-opacity-90 px-3 py-2 rounded-lg shadow-md z-10",children:r.jsxs("p",{className:"text-sm text-gray-700 flex items-center gap-1",children:[r.jsx(Ks,{className:"h-4 w-4 text-blue-500"}),"Cliquez pour positionner votre maison"]})}),N&&r.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-red-100 text-red-800 px-4 py-2 rounded-lg shadow-md z-[1000] flex items-center gap-2",children:r.jsx("span",{children:N})}),B&&r.jsxs("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-green-100 text-green-800 px-4 py-2 rounded-lg shadow-md z-[1000] flex items-center gap-2",children:[r.jsx(oi,{className:"h-4 w-4"}),r.jsx("span",{children:"Image capturée avec succès pour le rapport PDF"})]}),A&&!d&&r.jsx("div",{className:"absolute bottom-4 left-4 bg-white bg-opacity-90 px-3 py-2 rounded-lg shadow-md z-10",children:r.jsxs("p",{className:"text-xs text-gray-700",children:["Coordonnées: ",A.lat.toFixed(6),", ",A.lon.toFixed(6)]})})]})]})}function Qa(){const[A,e]=x.useState(()=>{const a=localStorage.getItem("solarParams"),i=localStorage.getItem("selectedPower");if(a){const o=JSON.parse(a);if(o.orientation=Number(o.orientation),i){const l=parseFloat(i);isNaN(l)||(o.nombreModules=Math.ceil(l*1e3/o.puissanceModules))}return o}return gi}),[t,s]=x.useState(()=>{const a=localStorage.getItem("solarResult");return a?JSON.parse(a):null});return x.useEffect(()=>{localStorage.setItem("solarParams",JSON.stringify(A)),localStorage.setItem("orientation",A.orientation.toString()),localStorage.setItem("orientationLabel",Rf(A.orientation))},[A]),x.useEffect(()=>{t&&localStorage.setItem("solarResult",JSON.stringify(t))},[t]),{params:A,setParams:e,result:t,setResult:s,resetData:()=>{e(gi),s(null),localStorage.removeItem("solarParams"),localStorage.removeItem("solarResult"),localStorage.removeItem("orientation"),localStorage.removeItem("orientationLabel"),localStorage.removeItem("selectedPower")}}}function Xf(){ft();const{clientInfo:A,updateClientInfo:e,address:t,updateAddress:s,resetClientInfo:n}=sA(),{params:a,setParams:i,result:o,setResult:l,resetData:c}=Qa(),[u,d]=x.useState(!1),[h,f]=x.useState(null);x.useEffect(()=>{const v=setTimeout(async()=>{if(!a.adresse.codePostal||!a.consommationAnnuelle){l(null);return}d(!0),f(null);try{const y=await yf(a),E=Ef({consommationAnnuelle:a.consommationAnnuelle,codePostal:a.adresse.codePostal,typeCompteur:a.typeCompteur});l({...y,recommandation:E}),localStorage.setItem("solarResults",JSON.stringify(y))}catch(y){console.error("Erreur de calcul:",y),f(y instanceof Error?y.message:"Erreur de calcul"),l(null)}finally{d(!1)}},500);return()=>clearTimeout(v)},[a,l]);const m=()=>{n(),c(),l(null),d(!1),f(null)},B=Q=>{const{name:v,value:y}=Q.target,E=parseFloat(y);Number.isNaN(E)||i(b=>({...b,[v]:E}))},g=Q=>{const{name:v,value:y}=Q.target;i(E=>({...E,[v]:y}))},p=Q=>{const{name:v,value:y}=Q.target;e({[v]:y})},w=(Q,v)=>{s({[Q]:v}),i(y=>({...y,adresse:{...y.adresse,[Q]:v}}))},N=Q=>{s({coordinates:Q}),i(v=>({...v,adresse:{...v.adresse,coordinates:Q}}))};return r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8 text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Estimez votre production d'énergie solaire"}),r.jsx("p",{className:"text-gray-600",children:"Calculez le potentiel de production d'énergie solaire de votre installation en fonction de vos paramètres spécifiques."})]}),r.jsxs("form",{onSubmit:Q=>Q.preventDefault(),className:"space-y-8",children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Informations personnelles"}),r.jsxs("div",{className:"relative group",children:[r.jsx("button",{type:"button",onClick:m,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:r.jsx(Zs,{className:"h-5 w-5"})}),r.jsx("div",{className:"absolute right-0 top-full mt-2 px-2 py-1 bg-gray-900 text-white text-sm rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:"Réinitialiser"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Civilité"}),r.jsxs("select",{name:"civilite",value:A.civilite,onChange:p,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Sélectionner"}),r.jsx("option",{value:"M",children:"Monsieur"}),r.jsx("option",{value:"Mme",children:"Madame"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),r.jsx("input",{type:"text",name:"nom",value:A.nom,onChange:p,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prénom"}),r.jsx("input",{type:"text",name:"prenom",value:A.prenom,onChange:p,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone"}),r.jsx("input",{type:"tel",name:"telephone",value:A.telephone,onChange:p,placeholder:"06 12 34 56 78",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",name:"email",value:A.email,onChange:p,placeholder:"exemple@email.com",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),r.jsx(Hf,{address:a.adresse,onChange:w}),a.adresse.coordinates&&r.jsx(Wf,{coordinates:a.adresse.coordinates,onCoordinatesChange:N}),a.adresse.codePostal&&r.jsx($f,{codePostal:a.adresse.codePostal}),r.jsx(Tf,{typeCompteur:a.typeCompteur,consommationAnnuelle:a.consommationAnnuelle,onTypeCompteurChange:g,onConsommationChange:B}),(o==null?void 0:o.recommandation)&&r.jsx(Pf,{recommendation:o.recommandation,consommationAnnuelle:a.consommationAnnuelle,departement:a.adresse.codePostal.substring(0,2)}),r.jsx(Vf,{params:a,onChange:B,onSelectChange:g,onParamsChange:Q=>i(v=>({...v,...Q}))}),u?r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"inline-block animate-spin h-8 w-8 border-4 border-blue-500 rounded-full border-t-transparent"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Calcul en cours..."})]}):h?r.jsx("div",{className:"bg-red-50 p-4 rounded-md text-red-800",children:h}):o&&r.jsx(Ul,{result:o}),r.jsx(Gf,{onReset:m,canProceed:!!o&&!u&&!h,result:o})]})]})}function qf({selectedMode:A,onModeChange:e,puissanceCrete:t,dureeAbonnement:s,onDureeChange:n,onKitSelect:a}){const i=zs(t,s),[o,l]=x.useState(()=>localStorage.getItem("revenuFiscal")||""),[c,u]=x.useState(null),[d,h]=x.useState([]),[f,m]=x.useState(null),[B,g]=x.useState(!0),p=t>9,w=Jt(t);x.useEffect(()=>{const U=localStorage.getItem("subscription_enabled");U!==null&&g(U==="true");const j=O=>{g(O.detail)};return window.addEventListener("subscriptionEnabledUpdated",j),()=>{window.removeEventListener("subscriptionEnabledUpdated",j)}},[]),x.useEffect(()=>{(p||!B)&&A==="subscription"&&e("cash")},[p,B,A,e]),x.useEffect(()=>{A==="cash"&&(l(""),u(null),h([]),m(null),localStorage.removeItem("revenuFiscal"))},[A]);const N=U=>{const j=[25,20,15,10],O=[2.5,3,3.5,4,4.5,5,5.5,6],_=[];for(const R of O)for(const I of j){const D=zs(R,I),te=D*12/U*100;te<=4&&_.push({power:R,duration:I,monthlyPayment:D,annualRatio:te})}return _.sort((R,I)=>I.power-R.power)},Q=U=>{if(U<=0)return null;const j=i*12,O=Math.ceil(j/.04);return U>=O},v=U=>{if(U>0&&A==="subscription"){const j=Q(U);if(u(j),j)h([]);else{const O=N(U);h(O)}}else u(null),h([])},y=U=>{const j=U.target.value.replace(/\D/g,"");if(l(j),j){localStorage.setItem("revenuFiscal",j);const O=parseInt(j,10);v(O)}else localStorage.removeItem("revenuFiscal"),u(null),h([]);m(null)},E=U=>{m(U)},b=()=>{f&&a&&(u(!0),a(f))},C=U=>{e(U),localStorage.setItem("financialMode",U),console.log("[FinancingOptions] Mode changed to:",U)};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Mode de financement"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{role:"button",tabIndex:0,onClick:()=>C("cash"),onKeyPress:U=>U.key==="Enter"&&C("cash"),className:`relative p-6 rounded-lg border-2 text-left transition-colors cursor-pointer
            ${A==="cash"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(ya,{className:`h-5 w-5 ${A==="cash"?"text-blue-500":"text-gray-400"}`}),r.jsx("span",{className:"font-medium",children:"Paiement comptant"})]}),A==="cash"&&w>0&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsx("span",{className:"text-2xl font-bold text-blue-600",children:H(w)}),r.jsx("span",{className:"text-gray-500",children:"TTC"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Prix de base avant remises et options"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Investissez une fois et profitez d'économies maximales dès le premier jour"})]}),r.jsxs("div",{role:"button",tabIndex:0,onClick:()=>!p&&B&&C("subscription"),onKeyPress:U=>U.key==="Enter"&&!p&&B&&C("subscription"),className:`relative p-6 rounded-lg border-2 text-left transition-colors ${p||!B?"opacity-50 cursor-not-allowed border-gray-200":A==="subscription"?"border-blue-500 bg-blue-50 cursor-pointer":"border-gray-200 hover:border-gray-300 cursor-pointer"}`,children:[(p||!B)&&r.jsx("div",{className:"absolute inset-0 bg-gray-100 bg-opacity-50 flex items-center justify-center rounded-lg",children:r.jsx("div",{className:"bg-white px-4 py-2 rounded-full text-sm text-gray-600 shadow",children:B?"Non disponible pour une puissance > 9 kWc":"Option d'abonnement désactivée"})}),r.jsx("div",{className:"absolute -top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:"Le plus populaire"}),r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(ct,{className:`h-5 w-5 ${A==="subscription"?"text-blue-500":"text-gray-400"}`}),r.jsx("span",{className:"font-medium",children:"Abonnement mensuel"})]}),A==="subscription"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[i.toFixed(2)," €"]}),r.jsx("span",{className:"text-gray-500",children:"/mois"})]})}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[10,15,20,25].map(U=>r.jsxs("div",{role:"button",tabIndex:0,onClick:()=>n(U),onKeyPress:j=>j.key==="Enter"&&n(U),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors cursor-pointer text-center
                      ${s===U?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[U," ans"]},U))}),r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsxs(it,{to:"/modalites-abonnement",onClick:()=>LA(),className:"inline-flex items-center text-blue-600 hover:text-blue-800 font-medium",children:["Voir les avantages de l'abonnement",r.jsx(wa,{className:"h-4 w-4 ml-1"})]}),r.jsx(it,{to:"/modalites-sortie",onClick:()=>LA(),className:"block text-sm text-blue-600 hover:text-blue-800",children:"Voir les modalités de sortie"})]})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"Étalez votre investissement dans le temps et commencez à faire des économies immédiatement"})]})]}),A==="subscription"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Services inclus dans votre abonnement :"}),r.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsx("li",{children:"• Maintenance préventive et corrective 7j/7"}),r.jsxs("li",{children:["• Garantie pièces et main d'œuvre pendant ",s," ans"]}),r.jsx("li",{children:"• Suivi et optimisation des performances"}),r.jsx("li",{children:"• Assurance tous risques incluse"}),r.jsx("li",{children:"• Aucun apport initial"}),r.jsx("li",{children:"• Intervention sous 48h"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Revenu fiscal de référence",r.jsxs("div",{className:"relative inline-block ml-2 group",children:[r.jsx(xr,{className:"h-4 w-4 text-gray-400 cursor-help"}),r.jsxs("div",{className:"absolute z-10 invisible group-hover:visible bg-gray-900 text-white text-sm rounded-lg py-2 px-3 w-72 bottom-full left-1/2 -translate-x-1/2 mb-2",children:[r.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"}),`Le revenu fiscal de référence se trouve sur votre dernier avis d'imposition, en première page dans l'encadré "Vos références".`]})]})]}),r.jsx("input",{type:"text",value:o,onChange:y,placeholder:"Montant en euros",className:`mt-1 block w-full rounded-md shadow-sm focus:ring-2 ${c===!0?"border-green-300 focus:border-green-500 focus:ring-green-500":c===!1?"border-amber-300 focus:border-amber-500 focus:ring-amber-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"}`}),o&&parseInt(o,10)>0&&r.jsxs(r.Fragment,{children:[c===!0&&r.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-start gap-3",children:[r.jsx(Ys,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-green-800",children:[r.jsx("p",{className:"font-medium",children:"Vous êtes éligible à cet abonnement"}),r.jsxs("p",{className:"mt-1",children:["Vos revenus vous permettent de souscrire à cette offre en toute sérénité. L'abonnement mensuel de ",H(i),"représente moins de 4% de vos revenus annuels."]})]})]}),c===!1&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-3",children:[r.jsx(ul,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-amber-800",children:[r.jsx("p",{className:"font-medium",children:"Kit solaire trop puissant pour votre budget"}),r.jsxs("p",{className:"mt-1",children:["Pour un abonnement mensuel de ",H(i),", votre revenu fiscal devrait être d'au moins ",H(Math.ceil(i*12/.04)),". Voici des kits solaires adaptés à votre budget :"]})]})]}),d.length>0&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.slice(0,4).map((U,j)=>r.jsxs("div",{onClick:()=>E(U),className:`bg-white rounded-lg p-4 border transition-all cursor-pointer ${f===U?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300 hover:shadow-md"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(zt,{className:`h-5 w-5 ${f===U?"text-blue-500":"text-green-500"}`}),r.jsxs("h4",{className:"font-medium text-gray-900",children:["Kit ",U.power," kWc"]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:["• Durée : ",U.duration," ans"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["• Mensualité : ",H(U.monthlyPayment)]}),r.jsxs("p",{className:"text-sm text-green-600",children:["• ",U.annualRatio.toFixed(1),"% de vos revenus annuels"]})]})]},`${U.power}-${U.duration}`))}),f&&r.jsx("div",{className:"flex justify-center",children:r.jsxs("button",{onClick:b,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[r.jsx(Ys,{className:"h-5 w-5"}),"Valider ce kit"]})})]})]})]})]})]})]})}const zf=[{id:"huawei-luna-e0-5",brand:"HUAWEI",model:"Luna E0",capacity:5,duration:10,monthlyPrice:57.85,autoconsumptionIncrease:15},{id:"huawei-luna-e0-10",brand:"HUAWEI",model:"Luna E0",capacity:10,duration:10,monthlyPrice:99.18,autoconsumptionIncrease:20},{id:"huawei-luna-e1-7-10",brand:"HUAWEI",model:"Luna E1",capacity:7,duration:10,monthlyPrice:81,autoconsumptionIncrease:17},{id:"huawei-luna-e1-7-15",brand:"HUAWEI",model:"Luna E1",capacity:7,duration:15,monthlyPrice:66.83,autoconsumptionIncrease:17},{id:"huawei-luna-e1-14-10",brand:"HUAWEI",model:"Luna E1",capacity:14,duration:10,monthlyPrice:138.85,autoconsumptionIncrease:22},{id:"huawei-luna-e1-14-15",brand:"HUAWEI",model:"Luna E1",capacity:14,duration:15,monthlyPrice:114.56,autoconsumptionIncrease:22},{id:"enphase-iq5p-5-10",brand:"ENPHASE",model:"IQ 5P",capacity:5,duration:10,monthlyPrice:71.08,autoconsumptionIncrease:15},{id:"enphase-iq5p-5-15",brand:"ENPHASE",model:"IQ 5P",capacity:5,duration:15,monthlyPrice:58.64,autoconsumptionIncrease:15}],Fl=[{capacity:100,monthlyPrice:15,initialFee:2e3,taxesPerKwh:.096},{capacity:300,monthlyPrice:24,initialFee:2e3,taxesPerKwh:.096},{capacity:600,monthlyPrice:30,initialFee:2e3,taxesPerKwh:.096},{capacity:900,monthlyPrice:35,initialFee:2e3,taxesPerKwh:.096}];function Yf(){const[A,e]=x.useState([]),[t,s]=x.useState(!0),[n,a]=x.useState(null);return x.useEffect(()=>{async function i(){try{const{data:o,error:l}=await rs.from("battery_prices_purchase").select("*").order("capacity");if(l)throw l;const c=o.map(u=>({id:u.id,brand:"CUSTOM",model:u.model,capacity:u.capacity,oneTimePrice:u.price,autoconsumptionIncrease:u.autoconsumption_increase||15}));e(c)}catch(o){console.error("Error fetching batteries:",o),a(o instanceof Error?o.message:"Failed to fetch batteries")}finally{s(!1)}}i()},[]),{batteries:A,loading:t,error:n}}function Zf({isOpen:A,onClose:e}){const[t,s]=x.useState(!1),n="https://xpxbxfuckljqdvkajlmx.supabase.co/storage/v1/object/public/smartbattery/MySmartBattery%20-%20French%20version.gif";return A?r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-4xl w-full mx-auto relative",children:[r.jsx("button",{onClick:e,className:"absolute -top-4 -right-4 bg-white rounded-full p-2 shadow-lg hover:bg-gray-100 transition-colors",children:r.jsx(qt,{className:"h-5 w-5 text-gray-600"})}),r.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-black",children:t?r.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-100 p-4",children:[r.jsx(ye,{className:"h-10 w-10 text-amber-500 mb-2"}),r.jsx("p",{className:"text-gray-700 text-center",children:"La vidéo n'a pas pu être chargée. Veuillez réessayer ultérieurement."}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Vous pouvez également accéder directement à la vidéo via ",r.jsx("a",{href:"https://www.youtube.com/watch?v=dQw4w9WgXcQ",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"ce lien"}),"."]})]}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx("img",{src:n,alt:"Smart Battery Demonstration",className:"max-w-full max-h-full object-contain",onError:()=>s(!0)})})}),r.jsxs("div",{className:"mt-6 text-center",children:[r.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Smart Battery : l'innovation au service de votre autonomie"}),r.jsxs("p",{className:"text-sm text-gray-600 max-w-2xl mx-auto",children:["Découvrez comment la Smart Battery optimise votre consommation d'énergie en pilotant intelligemment vos équipements pour maximiser l'autoconsommation sans batterie physique. Récupérez la nuit, en hiver, le surplus solaire stocké avec un rendement optimal : ",r.jsx("strong",{children:"1kWh stocké = 1kWh restitué"}),"."]})]})]})}):null}function em({value:A,onChange:e,subscriptionDuration:t,installedPower:s,initialAutoconsommation:n=75,connectionType:a="surplus",batteryFormula:i}){const{batteries:o,loading:l}=Yf(),{settings:c}=RA(),[u,d]=x.useState(!1),[h,f]=x.useState(!1),[m,B]=x.useState(!1);x.useState(null),x.useState(!1);const[g,p]=x.useState(!1),[w,N]=x.useState({physicalBattery:!0,myBattery:!0,smartBattery:!0}),Q=x.useRef(),v=x.useRef(),y=(c==null?void 0:c.defaultAutoconsumption)??n,E=i==="abonnement"?zf.filter(I=>I.duration<=t):o;x.useEffect(()=>{const I=localStorage.getItem("batterySelection");if(I)try{const D=JSON.parse(I);e(D),D.type==="virtual"?(d(!0),D.includeSmartCharger&&(f(!0),B(!0))):(D.type==="physical"||D.type==="mybattery")&&d(!0)}catch(D){console.error("Error parsing saved battery selection:",D)}},[]),x.useEffect(()=>{const I=localStorage.getItem("battery_options");I&&N(JSON.parse(I));const D=M=>{N(M.detail)};return window.addEventListener("batteryOptionsUpdated",D),()=>{window.removeEventListener("batteryOptionsUpdated",D)}},[]),x.useEffect(()=>{a==="total_sale"&&Q.current!=="total_sale"&&(d(!1),e({type:null,resetAutoconsommation:y}),B(!1),f(!1)),Q.current=a},[a,y]),x.useEffect(()=>{i==="comptant"&&v.current==="abonnement"&&(d(!1),e({type:null,resetAutoconsommation:y}),localStorage.removeItem("batterySelection"),B(!1),f(!1)),v.current=i},[i,y,e]);const b=I=>{let D=y;I==="virtual"&&(D=100),e({type:I,includeSmartCharger:I==="virtual"?m:!1,resetAutoconsommation:D}),localStorage.setItem("batterySelection",JSON.stringify({type:I,includeSmartCharger:I==="virtual"?m:!1,resetAutoconsommation:D}))},C=I=>{const D=Math.min(100,y+I.autoconsumptionIncrease),M={type:"physical",model:I,includeSmartCharger:!1,resetAutoconsommation:D};e(M),localStorage.setItem("batterySelection",JSON.stringify(M))},U=I=>{const D={type:"virtual",virtualCapacity:I,includeSmartCharger:h?m:!1,resetAutoconsommation:100};e(D),localStorage.setItem("batterySelection",JSON.stringify(D))},j=I=>{if(B(I),A.type==="virtual"){const D={...A,includeSmartCharger:I};e(D),localStorage.setItem("batterySelection",JSON.stringify(D))}},O=I=>{if(f(I),!I&&(B(!1),A.type==="virtual")){const D={...A,includeSmartCharger:!1};e(D),localStorage.setItem("batterySelection",JSON.stringify(D))}},_=s*1.055;if(a==="total_sale")return r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-amber-800",children:"Les solutions de stockage ne sont pas disponibles en revente totale."})});const R=i==="comptant"?(o==null?void 0:o.length)>0:E.length>0;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Solution de stockage"}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"checkbox",checked:u,onChange:I=>{d(I.target.checked),I.target.checked||(e({type:null,resetAutoconsommation:y}),localStorage.removeItem("batterySelection"),B(!1),f(!1))},className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),r.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Je souhaite une solution de stockage"})]})]}),u&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[w.physicalBattery&&R&&r.jsx("button",{onClick:()=>b("physical"),className:`p-4 rounded-lg border-2 transition-colors ${A.type==="physical"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(Ph,{className:"h-6 w-6 text-gray-400"}),r.jsx("span",{className:"font-medium",children:"Batterie physique"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Stockage sur site"})]})}),w.myBattery&&r.jsx("button",{onClick:()=>b("mybattery"),className:`p-4 rounded-lg border-2 transition-colors ${A.type==="mybattery"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(fl,{className:"h-6 w-6 text-gray-400"}),r.jsx("span",{className:"font-medium",children:"MyBattery"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Stockage virtuel"})]})}),w.smartBattery&&r.jsx("button",{onClick:()=>b("virtual"),className:`p-4 rounded-lg border-2 transition-colors ${A.type==="virtual"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(hl,{className:"h-6 w-6 text-gray-400"}),r.jsx("span",{className:"font-medium",children:"Smart Battery"}),r.jsx("span",{className:"text-xs text-gray-500",children:"Stockage virtuel + pilotage"})]})})]}),A.type==="physical"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"font-medium text-gray-700",children:"Choisissez votre batterie"}),l?r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-blue-500 border-t-transparent rounded-full mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Chargement des batteries..."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i==="comptant"?o.map(I=>{var D;return r.jsxs("div",{onClick:()=>C(I),className:`p-4 rounded-lg border-2 cursor-pointer transition-colors ${((D=A.model)==null?void 0:D.id)===I.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("h5",{className:"font-medium",children:I.model}),r.jsxs("p",{className:"text-sm text-gray-600",children:[I.capacity," kWh"]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"font-medium text-blue-600",children:[H(I.oneTimePrice)," TTC"]})})]}),r.jsxs("p",{className:"text-sm text-green-600",children:["+",I.autoconsumptionIncrease,"% d'autoconsommation"]})]},I.id)}):E.map(I=>{var D;return r.jsxs("div",{onClick:()=>C(I),className:`p-4 rounded-lg border-2 cursor-pointer transition-colors ${((D=A.model)==null?void 0:D.id)===I.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("h5",{className:"font-medium",children:I.model}),r.jsxs("p",{className:"text-sm text-gray-600",children:[I.capacity," kWh"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-medium text-blue-600",children:[H(I.monthlyPrice),"/mois"]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[I.duration," ans"]})]})]}),r.jsxs("p",{className:"text-sm text-green-600",children:["+",I.autoconsumptionIncrease,"% d'autoconsommation"]})]},I.id)})})]}),A.type==="virtual"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsxs("h4",{className:"font-medium text-blue-900 flex items-center gap-2",children:["Smart Battery de MyLight",r.jsx("button",{onClick:()=>p(!0),className:"p-1 rounded-full hover:bg-blue-100 transition-colors",title:"Voir la démonstration",children:r.jsx(of,{className:"h-4 w-4 text-blue-600"})})]})}),r.jsxs("p",{className:"text-sm text-blue-800 mb-3",children:["Solution innovante de pilotage intelligent de vos équipements pour maximiser l'autoconsommation sans batterie physique. Récupérez la nuit, en hiver, le surplus solaire stocké avec un rendement optimal : ",r.jsx("strong",{children:"1kWh stocké = 1kWh restitué"}),"."]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-blue-800",children:"✓ Pilotage automatique du ballon d'eau chaude"}),r.jsx("p",{className:"text-sm text-blue-800",children:"✓ Gestion intelligente de la pompe à chaleur"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-sm text-blue-800",children:"✓ Optimisation de la recharge du véhicule électrique"}),r.jsx("input",{type:"checkbox",id:"hasElectricVehicle",checked:h,onChange:I=>O(I.target.checked),className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"})]}),r.jsx("p",{className:"text-sm text-blue-800",children:"✓ Monitoring en temps réel de la production/consommation"}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"text-sm text-blue-800",children:"✓ Souscription à mylight150 comme fournisseur d'énergie"}),r.jsxs("div",{className:"relative inline-block ml-2 group",children:[r.jsx(Wt,{className:"h-4 w-4 text-blue-400 cursor-help"}),r.jsxs("div",{className:"absolute z-10 invisible group-hover:visible bg-gray-900 text-white text-sm rounded-lg py-2 px-3 w-72 -right-2 bottom-6",children:[r.jsx("div",{className:"absolute -bottom-1 right-3 w-2 h-2 bg-gray-900 rotate-45"}),"Les tarifs MyLight sont indexés sur les tarifs réglementés EDF, aussi bien pour le prix du kWh que pour l'abonnement."]})]})]})]}),r.jsxs("div",{className:"mt-3 text-sm text-amber-800",children:["Frais d'installation et mise en service : ",H(2e3)," TTC"]})]}),h&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Kh,{className:"h-5 w-5 text-green-600"}),r.jsx("h4",{className:"font-medium text-gray-900",children:"MySmartCharger – La borne de recharge intelligente"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"includeSmartCharger",checked:m,onChange:I=>j(I.target.checked),className:"h-4 w-4 text-green-600 rounded border-gray-300 focus:ring-green-500"}),r.jsxs("label",{htmlFor:"includeSmartCharger",className:"text-sm text-green-700",children:["Ajouter au chiffrage (",H(1500)," TTC)"]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-green-800",children:"Gagnez de l'argent en rechargeant votre véhicule le week-end"}),r.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[r.jsx("div",{className:"bg-white px-3 py-1 rounded-full text-green-700",children:"0,05 €/kWh (recharge via le réseau)"}),r.jsx("div",{className:"bg-white px-3 py-1 rounded-full text-green-700",children:"0,10 €/kWh (recharge solaire via MySmartBattery)"})]})]}),r.jsx("div",{className:"mt-3",children:r.jsx("a",{href:"https://www.mylight150.com/solutions/borne-de-recharge",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm font-medium text-green-700 hover:text-green-800",children:"👉 Découvrir l'offre"})})]}),r.jsx("h4",{className:"font-medium text-gray-700",children:"Choisissez votre capacité de pilotage"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Fl.map(I=>r.jsx("div",{onClick:()=>U(I.capacity),className:`p-4 rounded-lg border-2 cursor-pointer transition-colors ${A.virtualCapacity===I.capacity?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:r.jsxs("div",{className:"text-center",children:[r.jsxs("h5",{className:"font-medium",children:[I.capacity," kW"]}),r.jsxs("p",{className:"text-blue-600 font-medium mt-1",children:[H(I.monthlyPrice),"/mois"]})]})},I.capacity))}),r.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Jusqu'à 100% d'autoconsommation grâce au pilotage intelligent"})]}),A.type==="mybattery"&&r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"MyBattery - La solution de stockage la plus simple du marché"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-blue-800",children:"MyBattery vous permet d'exploiter pleinement votre production solaire : stockez chaque kWh non consommé et récupérez-le à tout moment à prix coûtant après s'être acquitté des frais d'acheminement."}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-blue-800",children:"✓ Capacité illimitée : stockez toute l'énergie que vous produisez, sans limite"}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("p",{className:"text-sm text-blue-800",children:"✓ Zéro installation, zéro matériel : une souscription à mylight150 comme fournisseur d'énergie suffit"}),r.jsxs("div",{className:"relative inline-block ml-2 group",children:[r.jsx(Wt,{className:"h-4 w-4 text-blue-400 cursor-help"}),r.jsxs("div",{className:"absolute z-10 invisible group-hover:visible bg-gray-900 text-white text-sm rounded-lg py-2 px-3 w-72 -right-2 bottom-6",children:[r.jsx("div",{className:"absolute -bottom-1 right-3 w-2 h-2 bg-gray-900 rotate-45"}),"Les tarifs MyLight sont indexés sur les tarifs réglementés EDF, aussi bien pour le prix du kWh que pour l'abonnement."]})]})]}),r.jsx("p",{className:"text-sm text-blue-800",children:"✓ Frais de mise en service : 179€ TTC"})]}),r.jsxs("div",{className:"bg-white rounded-lg p-3",children:[r.jsxs("p",{className:"text-sm text-blue-900",children:["Coût mensuel : ",r.jsx("strong",{children:H(_)})]}),r.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["(",r.jsx("strong",{children:"1€ HT"}),"/kWc installé par mois soit ",H(1.055)," TTC/kWc)"]})]}),r.jsxs("p",{className:"text-sm text-blue-800",children:["Le surplus récupéré = prix du kWh - ",H(.0996)," de taxes"]})]})]})})]}),r.jsx(Zf,{isOpen:g,onClose:()=>p(!1)})]})}const Am=[{value:"surplus",label:"Auto-consommation + revente de surplus"},{value:"total_auto",label:"Auto-consommation totale"},{value:"total_sale",label:"Revente totale"}];function tm({parameters:A,onParameterChange:e,puissanceCrete:t}){var h,f,m;const[s,n]=x.useState(!1),{settings:a}=RA();x.useEffect(()=>{if(!a)return;const B={connectionType:"surplus",autoconsommation:a.defaultAutoconsumption};console.log("Calculating initial subsidy for power:",t);const g=Nn(t,a);console.log("Initial subsidy amount:",g),B.primeAutoconsommation=g,e(B)},[a]),x.useEffect(()=>{var w,N,Q;if(!a)return;const B=A.connectionType||"surplus";let g=0;((w=A.batterySelection)==null?void 0:w.type)==="mybattery"?(g=Math.max(0,A.prixKwh-.0996),e({primeAutoconsommation:0,connectionType:"surplus",autoconsommation:a.defaultAutoconsumption})):((N=A.batterySelection)==null?void 0:N.type)==="virtual"?e({connectionType:"total_auto"}):B==="surplus"&&a.surplusSellPrices?t<=9?g=a.surplusSellPrices.under9kw:t<=36?g=a.surplusSellPrices.from9to36kw:t<=100&&(g=a.surplusSellPrices.from36to100kw):B==="total_sale"&&a.totalSellPrices&&(t<=9?g=a.totalSellPrices.under9kw:t<=36?g=a.totalSellPrices.from9to36kw:t<=100&&(g=a.totalSellPrices.from36to100kw));const p={tarifRevente:Number(g.toFixed(3))};if(B==="total_sale"?(p.autoconsommation=0,p.batterySelection=null):A.autoconsommation===0&&(p.autoconsommation=a.defaultAutoconsumption),((Q=A.batterySelection)==null?void 0:Q.type)!=="mybattery"){console.log("Recalculating subsidy for power:",t);const v=B==="surplus"?Nn(t,a):0;console.log("New subsidy amount:",v),p.primeAutoconsommation=v}e(p)},[A.connectionType,(h=A.batterySelection)==null?void 0:h.type,A.prixKwh,t,a]);const i=B=>{const{name:g,value:p}=B.target;let w=parseFloat(p);switch(g){case"remiseCommerciale":w=Math.min(Math.max(0,w),1e4);break;case"revalorisationEnergie":w=Math.min(Math.max(0,w),10);break;case"indexationProduction":w=Math.min(Math.max(-5,w),3);break}e({[g]:w})},o=B=>{var g,p;((g=A.batterySelection)==null?void 0:g.type)!=="mybattery"&&((p=A.batterySelection)==null?void 0:p.type)!=="virtual"&&e({connectionType:B.target.value})},l=B=>{let g=(a==null?void 0:a.defaultAutoconsumption)??75;if(B.type==="physical"&&B.model){const p=B.model.autoconsumptionIncrease;g=Math.min(100,g+p)}else B.type==="virtual"?g=100:B.type==="mybattery"&&(g=(a==null?void 0:a.defaultAutoconsumption)??75);e({batterySelection:B,autoconsommation:A.connectionType==="total_sale"?0:g,...B.type==="mybattery"?{connectionType:"surplus",primeAutoconsommation:0}:B.type==="virtual"?{connectionType:"total_auto"}:{}})},c=((f=A.batterySelection)==null?void 0:f.type)==="mybattery",u=((m=A.batterySelection)==null?void 0:m.type)==="virtual",d=c||u;return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Type de raccordement"}),r.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[r.jsxs("div",{children:[r.jsx("select",{value:A.connectionType||"surplus",onChange:o,disabled:d,className:`w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 ${d?"bg-gray-100 cursor-not-allowed":""}`,children:Am.map(B=>r.jsx("option",{value:B.value,children:B.label},B.value))}),c&&r.jsx("p",{className:"mt-2 text-sm text-amber-600",children:"Avec MyBattery, le surplus est automatiquement stocké sur le réseau pour être restitué ultérieurement. Le tarif de revente correspond au prix du kWh moins les taxes d'acheminement."}),u&&r.jsx("p",{className:"mt-2 text-sm text-amber-600",children:"Avec Smart Battery, toute l'énergie produite est autoconsommée grâce au pilotage intelligent."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsx(nt,{label:"Prix du kWh",name:"prixKwh",value:A.prixKwh,onChange:i,min:0,max:1,step:.01,unit:"€/kWh"}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tarif de revente"}),r.jsxs("div",{className:"relative",children:[r.jsx(Wt,{className:"h-4 w-4 text-gray-400 cursor-help",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)}),s&&r.jsxs("div",{className:"absolute z-10 w-72 p-3 bg-gray-900 text-white text-sm rounded-lg -right-2 top-6",children:[r.jsx("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-gray-900 rotate-45"}),c?r.jsx("p",{children:"Prix du kWh moins les taxes d'acheminement (0,0996€)"}):r.jsxs("p",{children:["Tarif en vigueur au ",a.sellPriceDate]})]})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"number",name:"tarifRevente",value:(A.tarifRevente||0).toFixed(3),disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-100 text-gray-500 shadow-sm focus:border-gray-300 focus:ring-0 cursor-not-allowed disabled:bg-gray-100"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"€/kWh"})})]})]}),r.jsx(nt,{label:"Niveau d'autoconsommation",name:"autoconsommation",value:A.autoconsommation??(a==null?void 0:a.defaultAutoconsumption)??75,onChange:i,min:0,max:100,unit:"%",disabled:A.connectionType==="total_sale"||u}),r.jsx(nt,{label:"Revalorisation annuelle",name:"revalorisationEnergie",value:A.revalorisationEnergie,onChange:i,min:0,max:10,unit:"%"}),r.jsx(In,{label:"Indexation revente",name:"indexationProduction",value:A.indexationProduction,onChange:i,min:-5,max:3,step:.1,unit:"%",tooltipContent:"Évolution annuelle du tarif de revente de l'électricité"}),r.jsx(In,{label:"Dégradation panneaux",name:"degradationPanneau",value:A.degradationPanneau,onChange:i,min:-2,max:0,step:.1,unit:"%",tooltipContent:"Dégradation annuelle de la production des panneaux solaires (-0.2% par défaut)"})]}),r.jsx(em,{value:A.batterySelection||{type:null},onChange:l,subscriptionDuration:A.dureeAbonnement||20,installedPower:t,initialAutoconsommation:(a==null?void 0:a.defaultAutoconsumption)??75,connectionType:A.connectionType,batteryFormula:A.financingMode==="subscription"?"abonnement":"comptant"})]})]})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sn=function(A,e){return Sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])},Sn(A,e)};function Ge(A,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Sn(A,e);function t(){this.constructor=A}A.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Hn=function(){return Hn=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Hn.apply(this,arguments)};function ve(A,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{c(s.next(u))}catch(d){i(d)}}function l(u){try{c(s.throw(u))}catch(d){i(d)}}function c(u){u.done?a(u.value):n(u.value).then(o,l)}c((s=s.apply(A,[])).next())})}function we(A,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,n,a,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(u){return l([c,u])}}function l(c){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,n&&(a=c[0]&2?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,n=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){t.label=c[1];break}if(c[0]===6&&t.label<a[1]){t.label=a[1],a=c;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(c);break}a[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(A,t)}catch(u){c=[6,u],n=0}finally{s=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Bs(A,e,t){if(arguments.length===2)for(var s=0,n=e.length,a;s<n;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return A.concat(a||e)}var tA=function(){function A(e,t,s,n){this.left=e,this.top=t,this.width=s,this.height=n}return A.prototype.add=function(e,t,s,n){return new A(this.left+e,this.top+t,this.width+s,this.height+n)},A.fromClientRect=function(e,t){return new A(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},A.fromDOMRectList=function(e,t){var s=Array.from(t).find(function(n){return n.width!==0});return s?new A(s.left+e.windowBounds.left,s.top+e.windowBounds.top,s.width,s.height):A.EMPTY},A.EMPTY=new A(0,0,0,0),A}(),Cr=function(A,e){return tA.fromClientRect(A,e.getBoundingClientRect())},sm=function(A){var e=A.body,t=A.documentElement;if(!e||!t)throw new Error("Unable to get document size");var s=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),n=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new tA(0,0,s,n)},vr=function(A){for(var e=[],t=0,s=A.length;t<s;){var n=A.charCodeAt(t++);if(n>=55296&&n<=56319&&t<s){var a=A.charCodeAt(t++);(a&64512)===56320?e.push(((n&1023)<<10)+(a&1023)+65536):(e.push(n),t--)}else e.push(n)}return e},le=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var t=A.length;if(!t)return"";for(var s=[],n=-1,a="";++n<t;){var i=A[n];i<=65535?s.push(i):(i-=65536,s.push((i>>10)+55296,i%1024+56320)),(n+1===t||s.length>16384)&&(a+=String.fromCharCode.apply(String,s),s.length=0)}return a},pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ws=0;ws<pi.length;ws++)rm[pi.charCodeAt(ws)]=ws;var Bi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xs=0;xs<Bi.length;xs++)Nt[Bi.charCodeAt(xs)]=xs;var nm=function(A){var e=A.length*.75,t=A.length,s,n=0,a,i,o,l;A[A.length-1]==="="&&(e--,A[A.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(s=0;s<t;s+=4)a=Nt[A.charCodeAt(s)],i=Nt[A.charCodeAt(s+1)],o=Nt[A.charCodeAt(s+2)],l=Nt[A.charCodeAt(s+3)],u[n++]=a<<2|i>>4,u[n++]=(i&15)<<4|o>>2,u[n++]=(o&3)<<6|l&63;return c},am=function(A){for(var e=A.length,t=[],s=0;s<e;s+=2)t.push(A[s+1]<<8|A[s]);return t},im=function(A){for(var e=A.length,t=[],s=0;s<e;s+=4)t.push(A[s+3]<<24|A[s+2]<<16|A[s+1]<<8|A[s]);return t},_A=5,Ua=11,Xr=2,om=Ua-_A,El=65536>>_A,lm=1<<_A,qr=lm-1,cm=1024>>_A,um=El+cm,dm=um,hm=32,fm=dm+hm,mm=65536>>Ua,gm=1<<om,pm=gm-1,wi=function(A,e,t){return A.slice?A.slice(e,t):new Uint16Array(Array.prototype.slice.call(A,e,t))},Bm=function(A,e,t){return A.slice?A.slice(e,t):new Uint32Array(Array.prototype.slice.call(A,e,t))},wm=function(A,e){var t=nm(A),s=Array.isArray(t)?im(t):new Uint32Array(t),n=Array.isArray(t)?am(t):new Uint16Array(t),a=24,i=wi(n,a/2,s[4]/2),o=s[5]===2?wi(n,(a+s[4])/2):Bm(s,Math.ceil((a+s[4])/4));return new xm(s[0],s[1],s[2],s[3],i,o)},xm=function(){function A(e,t,s,n,a,i){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=n,this.index=a,this.data=i}return A.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>_A],t=(t<<Xr)+(e&qr),this.data[t];if(e<=65535)return t=this.index[El+(e-55296>>_A)],t=(t<<Xr)+(e&qr),this.data[t];if(e<this.highStart)return t=fm-mm+(e>>Ua),t=this.index[t],t+=e>>_A&pm,t=this.index[t],t=(t<<Xr)+(e&qr),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},A}(),xi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ym=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ys=0;ys<xi.length;ys++)ym[xi.charCodeAt(ys)]=ys;var bm="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",yi=50,Cm=1,Nl=2,jl=3,vm=4,Qm=5,bi=7,Il=8,Ci=9,hA=10,_n=11,vi=12,kn=13,Um=14,jt=15,Tn=16,bs=17,bt=18,Fm=19,Qi=20,Ln=21,Ct=22,zr=23,WA=24,Ie=25,It=26,St=27,XA=28,Em=29,NA=30,Nm=31,Cs=32,vs=33,Pn=34,On=35,Dn=36,Yt=37,Rn=38,Ms=39,Vs=40,Yr=41,Sl=42,jm=43,Im=[9001,65288],Hl="!",W="×",Qs="÷",Kn=wm(bm),Ye=[NA,Dn],Mn=[Cm,Nl,jl,Qm],_l=[hA,Il],Ui=[St,It],Sm=Mn.concat(_l),Fi=[Rn,Ms,Vs,Pn,On],Hm=[jt,kn],_m=function(A,e){e===void 0&&(e="strict");var t=[],s=[],n=[];return A.forEach(function(a,i){var o=Kn.get(a);if(o>yi?(n.push(!0),o-=yi):n.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return s.push(i),t.push(Tn);if(o===vm||o===_n){if(i===0)return s.push(i),t.push(NA);var l=t[i-1];return Sm.indexOf(l)===-1?(s.push(s[i-1]),t.push(l)):(s.push(i),t.push(NA))}if(s.push(i),o===Nm)return t.push(e==="strict"?Ln:Yt);if(o===Sl||o===Em)return t.push(NA);if(o===jm)return a>=131072&&a<=196605||a>=196608&&a<=262141?t.push(Yt):t.push(NA);t.push(o)}),[s,t,n]},Zr=function(A,e,t,s){var n=s[t];if(Array.isArray(A)?A.indexOf(n)!==-1:A===n)for(var a=t;a<=s.length;){a++;var i=s[a];if(i===e)return!0;if(i!==hA)break}if(n===hA)for(var a=t;a>0;){a--;var o=s[a];if(Array.isArray(A)?A.indexOf(o)!==-1:A===o)for(var l=t;l<=s.length;){l++;var i=s[l];if(i===e)return!0;if(i!==hA)break}if(o!==hA)break}return!1},Ei=function(A,e){for(var t=A;t>=0;){var s=e[t];if(s===hA)t--;else return s}return 0},km=function(A,e,t,s,n){if(t[s]===0)return W;var a=s-1;if(Array.isArray(n)&&n[a]===!0)return W;var i=a-1,o=a+1,l=e[a],c=i>=0?e[i]:0,u=e[o];if(l===Nl&&u===jl)return W;if(Mn.indexOf(l)!==-1)return Hl;if(Mn.indexOf(u)!==-1||_l.indexOf(u)!==-1)return W;if(Ei(a,e)===Il)return Qs;if(Kn.get(A[a])===_n||(l===Cs||l===vs)&&Kn.get(A[o])===_n||l===bi||u===bi||l===Ci||[hA,kn,jt].indexOf(l)===-1&&u===Ci||[bs,bt,Fm,WA,XA].indexOf(u)!==-1||Ei(a,e)===Ct||Zr(zr,Ct,a,e)||Zr([bs,bt],Ln,a,e)||Zr(vi,vi,a,e))return W;if(l===hA)return Qs;if(l===zr||u===zr)return W;if(u===Tn||l===Tn)return Qs;if([kn,jt,Ln].indexOf(u)!==-1||l===Um||c===Dn&&Hm.indexOf(l)!==-1||l===XA&&u===Dn||u===Qi||Ye.indexOf(u)!==-1&&l===Ie||Ye.indexOf(l)!==-1&&u===Ie||l===St&&[Yt,Cs,vs].indexOf(u)!==-1||[Yt,Cs,vs].indexOf(l)!==-1&&u===It||Ye.indexOf(l)!==-1&&Ui.indexOf(u)!==-1||Ui.indexOf(l)!==-1&&Ye.indexOf(u)!==-1||[St,It].indexOf(l)!==-1&&(u===Ie||[Ct,jt].indexOf(u)!==-1&&e[o+1]===Ie)||[Ct,jt].indexOf(l)!==-1&&u===Ie||l===Ie&&[Ie,XA,WA].indexOf(u)!==-1)return W;if([Ie,XA,WA,bs,bt].indexOf(u)!==-1)for(var d=a;d>=0;){var h=e[d];if(h===Ie)return W;if([XA,WA].indexOf(h)!==-1)d--;else break}if([St,It].indexOf(u)!==-1)for(var d=[bs,bt].indexOf(l)!==-1?i:a;d>=0;){var h=e[d];if(h===Ie)return W;if([XA,WA].indexOf(h)!==-1)d--;else break}if(Rn===l&&[Rn,Ms,Pn,On].indexOf(u)!==-1||[Ms,Pn].indexOf(l)!==-1&&[Ms,Vs].indexOf(u)!==-1||[Vs,On].indexOf(l)!==-1&&u===Vs||Fi.indexOf(l)!==-1&&[Qi,It].indexOf(u)!==-1||Fi.indexOf(u)!==-1&&l===St||Ye.indexOf(l)!==-1&&Ye.indexOf(u)!==-1||l===WA&&Ye.indexOf(u)!==-1||Ye.concat(Ie).indexOf(l)!==-1&&u===Ct&&Im.indexOf(A[o])===-1||Ye.concat(Ie).indexOf(u)!==-1&&l===bt)return W;if(l===Yr&&u===Yr){for(var f=t[a],m=1;f>0&&(f--,e[f]===Yr);)m++;if(m%2!==0)return W}return l===Cs&&u===vs?W:Qs},Tm=function(A,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=_m(A,e.lineBreak),s=t[0],n=t[1],a=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(n=n.map(function(o){return[Ie,NA,Sl].indexOf(o)!==-1?Yt:o}));var i=e.wordBreak==="keep-all"?a.map(function(o,l){return o&&A[l]>=19968&&A[l]<=40959}):void 0;return[s,n,i]},Lm=function(){function A(e,t,s,n){this.codePoints=e,this.required=t===Hl,this.start=s,this.end=n}return A.prototype.slice=function(){return le.apply(void 0,this.codePoints.slice(this.start,this.end))},A}(),Pm=function(A,e){var t=vr(A),s=Tm(t,e),n=s[0],a=s[1],i=s[2],o=t.length,l=0,c=0;return{next:function(){if(c>=o)return{done:!0,value:null};for(var u=W;c<o&&(u=km(t,a,n,++c,i))===W;);if(u!==W||c===o){var d=new Lm(t,u,l,c);return l=c,{value:d,done:!1}}return{done:!0,value:null}}}},Om=1,Dm=2,ns=4,Ni=8,er=10,ji=47,Rt=92,Rm=9,Km=32,Us=34,vt=61,Mm=35,Vm=36,Gm=37,Fs=39,Es=40,Qt=41,$m=95,Fe=45,Jm=33,Wm=60,Xm=62,qm=64,zm=91,Ym=93,Zm=61,eg=123,Ns=63,Ag=125,Ii=124,tg=126,sg=128,Si=65533,en=42,SA=43,rg=44,ng=58,ag=59,Zt=46,ig=0,og=8,lg=11,cg=14,ug=31,dg=127,Je=-1,kl=48,Tl=97,Ll=101,hg=102,fg=117,mg=122,Pl=65,Ol=69,Dl=70,gg=85,pg=90,xe=function(A){return A>=kl&&A<=57},Bg=function(A){return A>=55296&&A<=57343},qA=function(A){return xe(A)||A>=Pl&&A<=Dl||A>=Tl&&A<=hg},wg=function(A){return A>=Tl&&A<=mg},xg=function(A){return A>=Pl&&A<=pg},yg=function(A){return wg(A)||xg(A)},bg=function(A){return A>=sg},js=function(A){return A===er||A===Rm||A===Km},Ar=function(A){return yg(A)||bg(A)||A===$m},Hi=function(A){return Ar(A)||xe(A)||A===Fe},Cg=function(A){return A>=ig&&A<=og||A===lg||A>=cg&&A<=ug||A===dg},cA=function(A,e){return A!==Rt?!1:e!==er},Is=function(A,e,t){return A===Fe?Ar(e)||cA(e,t):Ar(A)?!0:!!(A===Rt&&cA(A,e))},An=function(A,e,t){return A===SA||A===Fe?xe(e)?!0:e===Zt&&xe(t):xe(A===Zt?e:A)},vg=function(A){var e=0,t=1;(A[e]===SA||A[e]===Fe)&&(A[e]===Fe&&(t=-1),e++);for(var s=[];xe(A[e]);)s.push(A[e++]);var n=s.length?parseInt(le.apply(void 0,s),10):0;A[e]===Zt&&e++;for(var a=[];xe(A[e]);)a.push(A[e++]);var i=a.length,o=i?parseInt(le.apply(void 0,a),10):0;(A[e]===Ol||A[e]===Ll)&&e++;var l=1;(A[e]===SA||A[e]===Fe)&&(A[e]===Fe&&(l=-1),e++);for(var c=[];xe(A[e]);)c.push(A[e++]);var u=c.length?parseInt(le.apply(void 0,c),10):0;return t*(n+o*Math.pow(10,-i))*Math.pow(10,l*u)},Qg={type:2},Ug={type:3},Fg={type:4},Eg={type:13},Ng={type:8},jg={type:21},Ig={type:9},Sg={type:10},Hg={type:11},_g={type:12},kg={type:14},Ss={type:23},Tg={type:1},Lg={type:25},Pg={type:24},Og={type:26},Dg={type:27},Rg={type:28},Kg={type:29},Mg={type:31},Vn={type:32},Rl=function(){function A(){this._value=[]}return A.prototype.write=function(e){this._value=this._value.concat(vr(e))},A.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Vn;)e.push(t),t=this.consumeToken();return e},A.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Us:return this.consumeStringToken(Us);case Mm:var t=this.peekCodePoint(0),s=this.peekCodePoint(1),n=this.peekCodePoint(2);if(Hi(t)||cA(s,n)){var a=Is(t,s,n)?Dm:Om,i=this.consumeName();return{type:5,value:i,flags:a}}break;case Vm:if(this.peekCodePoint(0)===vt)return this.consumeCodePoint(),Eg;break;case Fs:return this.consumeStringToken(Fs);case Es:return Qg;case Qt:return Ug;case en:if(this.peekCodePoint(0)===vt)return this.consumeCodePoint(),kg;break;case SA:if(An(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case rg:return Fg;case Fe:var o=e,l=this.peekCodePoint(0),c=this.peekCodePoint(1);if(An(o,l,c))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Is(o,l,c))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Fe&&c===Xm)return this.consumeCodePoint(),this.consumeCodePoint(),Pg;break;case Zt:if(An(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case ji:if(this.peekCodePoint(0)===en)for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(u===en&&(u=this.consumeCodePoint(),u===ji))return this.consumeToken();if(u===Je)return this.consumeToken()}break;case ng:return Og;case ag:return Dg;case Wm:if(this.peekCodePoint(0)===Jm&&this.peekCodePoint(1)===Fe&&this.peekCodePoint(2)===Fe)return this.consumeCodePoint(),this.consumeCodePoint(),Lg;break;case qm:var d=this.peekCodePoint(0),h=this.peekCodePoint(1),f=this.peekCodePoint(2);if(Is(d,h,f)){var i=this.consumeName();return{type:7,value:i}}break;case zm:return Rg;case Rt:if(cA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Ym:return Kg;case Zm:if(this.peekCodePoint(0)===vt)return this.consumeCodePoint(),Ng;break;case eg:return Hg;case Ag:return _g;case fg:case gg:var m=this.peekCodePoint(0),B=this.peekCodePoint(1);return m===SA&&(qA(B)||B===Ns)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case Ii:if(this.peekCodePoint(0)===vt)return this.consumeCodePoint(),Ig;if(this.peekCodePoint(0)===Ii)return this.consumeCodePoint(),jg;break;case tg:if(this.peekCodePoint(0)===vt)return this.consumeCodePoint(),Sg;break;case Je:return Vn}return js(e)?(this.consumeWhiteSpace(),Mg):xe(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Ar(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:le(e)}},A.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},A.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},A.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},A.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();qA(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var s=!1;t===Ns&&e.length<6;)e.push(t),t=this.consumeCodePoint(),s=!0;if(s){var n=parseInt(le.apply(void 0,e.map(function(l){return l===Ns?kl:l})),16),a=parseInt(le.apply(void 0,e.map(function(l){return l===Ns?Dl:l})),16);return{type:30,start:n,end:a}}var i=parseInt(le.apply(void 0,e),16);if(this.peekCodePoint(0)===Fe&&qA(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];qA(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();var a=parseInt(le.apply(void 0,o),16);return{type:30,start:i,end:a}}else return{type:30,start:i,end:i}},A.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Es?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Es?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},A.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Je)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===Fs||t===Us){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Je||this.peekCodePoint(0)===Qt)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),Ss)}for(;;){var n=this.consumeCodePoint();if(n===Je||n===Qt)return{type:22,value:le.apply(void 0,e)};if(js(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Je||this.peekCodePoint(0)===Qt?(this.consumeCodePoint(),{type:22,value:le.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Ss);if(n===Us||n===Fs||n===Es||Cg(n))return this.consumeBadUrlRemnants(),Ss;if(n===Rt)if(cA(n,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Ss;else e.push(n)}},A.prototype.consumeWhiteSpace=function(){for(;js(this.peekCodePoint(0));)this.consumeCodePoint()},A.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Qt||e===Je)return;cA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},A.prototype.consumeStringSlice=function(e){for(var t=5e4,s="";e>0;){var n=Math.min(t,e);s+=le.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),s},A.prototype.consumeStringToken=function(e){var t="",s=0;do{var n=this._value[s];if(n===Je||n===void 0||n===e)return t+=this.consumeStringSlice(s),{type:0,value:t};if(n===er)return this._value.splice(0,s),Tg;if(n===Rt){var a=this._value[s+1];a!==Je&&a!==void 0&&(a===er?(t+=this.consumeStringSlice(s),s=-1,this._value.shift()):cA(n,a)&&(t+=this.consumeStringSlice(s),t+=le(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},A.prototype.consumeNumber=function(){var e=[],t=ns,s=this.peekCodePoint(0);for((s===SA||s===Fe)&&e.push(this.consumeCodePoint());xe(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(s===Zt&&xe(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ni;xe(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0),n=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((s===Ol||s===Ll)&&((n===SA||n===Fe)&&xe(a)||xe(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ni;xe(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[vg(e),t]},A.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],s=e[1],n=this.peekCodePoint(0),a=this.peekCodePoint(1),i=this.peekCodePoint(2);if(Is(n,a,i)){var o=this.consumeName();return{type:15,number:t,flags:s,unit:o}}return n===Gm?(this.consumeCodePoint(),{type:16,number:t,flags:s}):{type:17,number:t,flags:s}},A.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(qA(e)){for(var t=le(e);qA(this.peekCodePoint(0))&&t.length<6;)t+=le(this.consumeCodePoint());js(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(t,16);return s===0||Bg(s)||s>1114111?Si:s}return e===Je?Si:e},A.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(Hi(t))e+=le(t);else if(cA(t,this.peekCodePoint(0)))e+=le(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},A}(),Kl=function(){function A(e){this._tokens=e}return A.create=function(e){var t=new Rl;return t.write(e),new A(t.read())},A.parseValue=function(e){return A.create(e).parseComponentValue()},A.parseValues=function(e){return A.create(e).parseComponentValues()},A.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},A.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},A.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},A.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},s=this.consumeToken();;){if(s.type===32||Gg(s,e))return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue()),s=this.consumeToken()}},A.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue())}},A.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Vn:e},A.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},A}(),as=function(A){return A.type===15},pt=function(A){return A.type===17},Ae=function(A){return A.type===20},Vg=function(A){return A.type===0},Gn=function(A,e){return Ae(A)&&A.value===e},Ml=function(A){return A.type!==31},dt=function(A){return A.type!==31&&A.type!==4},qe=function(A){var e=[],t=[];return A.forEach(function(s){if(s.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}s.type!==31&&t.push(s)}),t.length&&e.push(t),e},Gg=function(A,e){return e===11&&A.type===12||e===28&&A.type===29?!0:e===2&&A.type===3},BA=function(A){return A.type===17||A.type===15},ce=function(A){return A.type===16||BA(A)},Vl=function(A){return A.length>1?[A[0],A[1]]:[A[0]]},Be={type:17,number:0,flags:ns},Fa={type:16,number:50,flags:ns},fA={type:16,number:100,flags:ns},Ht=function(A,e,t){var s=A[0],n=A[1];return[ne(s,e),ne(typeof n<"u"?n:s,t)]},ne=function(A,e){if(A.type===16)return A.number/100*e;if(as(A))switch(A.unit){case"rem":case"em":return 16*A.number;case"px":default:return A.number}return A.number},Gl="deg",$l="grad",Jl="rad",Wl="turn",Qr={name:"angle",parse:function(A,e){if(e.type===15)switch(e.unit){case Gl:return Math.PI*e.number/180;case $l:return Math.PI/200*e.number;case Jl:return e.number;case Wl:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Xl=function(A){return A.type===15&&(A.unit===Gl||A.unit===$l||A.unit===Jl||A.unit===Wl)},ql=function(A){var e=A.filter(Ae).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Be,Be];case"to top":case"bottom":return Oe(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Be,fA];case"to right":case"left":return Oe(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[fA,fA];case"to bottom":case"top":return Oe(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[fA,Be];case"to left":case"right":return Oe(270)}return 0},Oe=function(A){return Math.PI*A/180},gA={name:"color",parse:function(A,e){if(e.type===18){var t=$g[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(A,e.values)}if(e.type===5){if(e.value.length===3){var s=e.value.substring(0,1),n=e.value.substring(1,2),a=e.value.substring(2,3);return mA(parseInt(s+s,16),parseInt(n+n,16),parseInt(a+a,16),1)}if(e.value.length===4){var s=e.value.substring(0,1),n=e.value.substring(1,2),a=e.value.substring(2,3),i=e.value.substring(3,4);return mA(parseInt(s+s,16),parseInt(n+n,16),parseInt(a+a,16),parseInt(i+i,16)/255)}if(e.value.length===6){var s=e.value.substring(0,2),n=e.value.substring(2,4),a=e.value.substring(4,6);return mA(parseInt(s,16),parseInt(n,16),parseInt(a,16),1)}if(e.value.length===8){var s=e.value.substring(0,2),n=e.value.substring(2,4),a=e.value.substring(4,6),i=e.value.substring(6,8);return mA(parseInt(s,16),parseInt(n,16),parseInt(a,16),parseInt(i,16)/255)}}if(e.type===20){var o=AA[e.value.toUpperCase()];if(typeof o<"u")return o}return AA.TRANSPARENT}},pA=function(A){return(255&A)===0},me=function(A){var e=255&A,t=255&A>>8,s=255&A>>16,n=255&A>>24;return e<255?"rgba("+n+","+s+","+t+","+e/255+")":"rgb("+n+","+s+","+t+")"},mA=function(A,e,t,s){return(A<<24|e<<16|t<<8|Math.round(s*255)<<0)>>>0},_i=function(A,e){if(A.type===17)return A.number;if(A.type===16){var t=e===3?1:255;return e===3?A.number/100*t:Math.round(A.number/100*t)}return 0},ki=function(A,e){var t=e.filter(dt);if(t.length===3){var s=t.map(_i),n=s[0],a=s[1],i=s[2];return mA(n,a,i,1)}if(t.length===4){var o=t.map(_i),n=o[0],a=o[1],i=o[2],l=o[3];return mA(n,a,i,l)}return 0};function tn(A,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-A)*t*6+A:t<1/2?e:t<2/3?(e-A)*6*(2/3-t)+A:A}var Ti=function(A,e){var t=e.filter(dt),s=t[0],n=t[1],a=t[2],i=t[3],o=(s.type===17?Oe(s.number):Qr.parse(A,s))/(Math.PI*2),l=ce(n)?n.number/100:0,c=ce(a)?a.number/100:0,u=typeof i<"u"&&ce(i)?ne(i,1):1;if(l===0)return mA(c*255,c*255,c*255,1);var d=c<=.5?c*(l+1):c+l-c*l,h=c*2-d,f=tn(h,d,o+1/3),m=tn(h,d,o),B=tn(h,d,o-1/3);return mA(f*255,m*255,B*255,u)},$g={hsl:Ti,hsla:Ti,rgb:ki,rgba:ki},Kt=function(A,e){return gA.parse(A,Kl.create(e).parseComponentValue())},AA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Jg={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(A,e){return e.map(function(t){if(Ae(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Wg={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ur=function(A,e){var t=gA.parse(A,e[0]),s=e[1];return s&&ce(s)?{color:t,stop:s}:{color:t,stop:null}},Li=function(A,e){var t=A[0],s=A[A.length-1];t.stop===null&&(t.stop=Be),s.stop===null&&(s.stop=fA);for(var n=[],a=0,i=0;i<A.length;i++){var o=A[i].stop;if(o!==null){var l=ne(o,e);l>a?n.push(l):n.push(a),a=l}else n.push(null)}for(var c=null,i=0;i<n.length;i++){var u=n[i];if(u===null)c===null&&(c=i);else if(c!==null){for(var d=i-c,h=n[c-1],f=(u-h)/(d+1),m=1;m<=d;m++)n[c+m-1]=f*m;c=null}}return A.map(function(B,g){var p=B.color;return{color:p,stop:Math.max(Math.min(1,n[g]/e),0)}})},Xg=function(A,e,t){var s=e/2,n=t/2,a=ne(A[0],e)-s,i=n-ne(A[1],t);return(Math.atan2(i,a)+Math.PI*2)%(Math.PI*2)},qg=function(A,e,t){var s=typeof A=="number"?A:Xg(A,e,t),n=Math.abs(e*Math.sin(s))+Math.abs(t*Math.cos(s)),a=e/2,i=t/2,o=n/2,l=Math.sin(s-Math.PI/2)*o,c=Math.cos(s-Math.PI/2)*o;return[n,a-c,a+c,i-l,i+l]},Me=function(A,e){return Math.sqrt(A*A+e*e)},Pi=function(A,e,t,s,n){var a=[[0,0],[0,e],[A,0],[A,e]];return a.reduce(function(i,o){var l=o[0],c=o[1],u=Me(t-l,s-c);return(n?u<i.optimumDistance:u>i.optimumDistance)?{optimumCorner:o,optimumDistance:u}:i},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},zg=function(A,e,t,s,n){var a=0,i=0;switch(A.size){case 0:A.shape===0?a=i=Math.min(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-n)):A.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-s)),i=Math.min(Math.abs(t),Math.abs(t-n)));break;case 2:if(A.shape===0)a=i=Math.min(Me(e,t),Me(e,t-n),Me(e-s,t),Me(e-s,t-n));else if(A.shape===1){var o=Math.min(Math.abs(t),Math.abs(t-n))/Math.min(Math.abs(e),Math.abs(e-s)),l=Pi(s,n,e,t,!0),c=l[0],u=l[1];a=Me(c-e,(u-t)/o),i=o*a}break;case 1:A.shape===0?a=i=Math.max(Math.abs(e),Math.abs(e-s),Math.abs(t),Math.abs(t-n)):A.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-s)),i=Math.max(Math.abs(t),Math.abs(t-n)));break;case 3:if(A.shape===0)a=i=Math.max(Me(e,t),Me(e,t-n),Me(e-s,t),Me(e-s,t-n));else if(A.shape===1){var o=Math.max(Math.abs(t),Math.abs(t-n))/Math.max(Math.abs(e),Math.abs(e-s)),d=Pi(s,n,e,t,!1),c=d[0],u=d[1];a=Me(c-e,(u-t)/o),i=o*a}break}return Array.isArray(A.size)&&(a=ne(A.size[0],s),i=A.size.length===2?ne(A.size[1],n):a),[a,i]},Yg=function(A,e){var t=Oe(180),s=[];return qe(e).forEach(function(n,a){if(a===0){var i=n[0];if(i.type===20&&i.value==="to"){t=ql(n);return}else if(Xl(i)){t=Qr.parse(A,i);return}}var o=Ur(A,n);s.push(o)}),{angle:t,stops:s,type:1}},Hs=function(A,e){var t=Oe(180),s=[];return qe(e).forEach(function(n,a){if(a===0){var i=n[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){t=ql(n);return}else if(Xl(i)){t=(Qr.parse(A,i)+Oe(270))%Oe(360);return}}var o=Ur(A,n);s.push(o)}),{angle:t,stops:s,type:1}},Zg=function(A,e){var t=Oe(180),s=[],n=1,a=0,i=3,o=[];return qe(e).forEach(function(l,c){var u=l[0];if(c===0){if(Ae(u)&&u.value==="linear"){n=1;return}else if(Ae(u)&&u.value==="radial"){n=2;return}}if(u.type===18){if(u.name==="from"){var d=gA.parse(A,u.values[0]);s.push({stop:Be,color:d})}else if(u.name==="to"){var d=gA.parse(A,u.values[0]);s.push({stop:fA,color:d})}else if(u.name==="color-stop"){var h=u.values.filter(dt);if(h.length===2){var d=gA.parse(A,h[1]),f=h[0];pt(f)&&s.push({stop:{type:16,number:f.number*100,flags:f.flags},color:d})}}}}),n===1?{angle:(t+Oe(180))%Oe(360),stops:s,type:n}:{size:i,shape:a,stops:s,position:o,type:n}},zl="closest-side",Yl="farthest-side",Zl="closest-corner",ec="farthest-corner",Ac="circle",tc="ellipse",sc="cover",rc="contain",ep=function(A,e){var t=0,s=3,n=[],a=[];return qe(e).forEach(function(i,o){var l=!0;if(o===0){var c=!1;l=i.reduce(function(d,h){if(c)if(Ae(h))switch(h.value){case"center":return a.push(Fa),d;case"top":case"left":return a.push(Be),d;case"right":case"bottom":return a.push(fA),d}else(ce(h)||BA(h))&&a.push(h);else if(Ae(h))switch(h.value){case Ac:return t=0,!1;case tc:return t=1,!1;case"at":return c=!0,!1;case zl:return s=0,!1;case sc:case Yl:return s=1,!1;case rc:case Zl:return s=2,!1;case ec:return s=3,!1}else if(BA(h)||ce(h))return Array.isArray(s)||(s=[]),s.push(h),!1;return d},l)}if(l){var u=Ur(A,i);n.push(u)}}),{size:s,shape:t,stops:n,position:a,type:2}},_s=function(A,e){var t=0,s=3,n=[],a=[];return qe(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(u,d){if(Ae(d))switch(d.value){case"center":return a.push(Fa),!1;case"top":case"left":return a.push(Be),!1;case"right":case"bottom":return a.push(fA),!1}else if(ce(d)||BA(d))return a.push(d),!1;return u},l):o===1&&(l=i.reduce(function(u,d){if(Ae(d))switch(d.value){case Ac:return t=0,!1;case tc:return t=1,!1;case rc:case zl:return s=0,!1;case Yl:return s=1,!1;case Zl:return s=2,!1;case sc:case ec:return s=3,!1}else if(BA(d)||ce(d))return Array.isArray(s)||(s=[]),s.push(d),!1;return u},l)),l){var c=Ur(A,i);n.push(c)}}),{size:s,shape:t,stops:n,position:a,type:2}},Ap=function(A){return A.type===1},tp=function(A){return A.type===2},Ea={name:"image",parse:function(A,e){if(e.type===22){var t={url:e.value,type:0};return A.cache.addImage(e.value),t}if(e.type===18){var s=nc[e.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return s(A,e.values)}throw new Error("Unsupported image type "+e.type)}};function sp(A){return!(A.type===20&&A.value==="none")&&(A.type!==18||!!nc[A.name])}var nc={"linear-gradient":Yg,"-moz-linear-gradient":Hs,"-ms-linear-gradient":Hs,"-o-linear-gradient":Hs,"-webkit-linear-gradient":Hs,"radial-gradient":ep,"-moz-radial-gradient":_s,"-ms-radial-gradient":_s,"-o-radial-gradient":_s,"-webkit-radial-gradient":_s,"-webkit-gradient":Zg},rp={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(A,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(s){return dt(s)&&sp(s)}).map(function(s){return Ea.parse(A,s)})}},np={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(A,e){return e.map(function(t){if(Ae(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ap={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(A,e){return qe(e).map(function(t){return t.filter(ce)}).map(Vl)}},ip={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(A,e){return qe(e).map(function(t){return t.filter(Ae).map(function(s){return s.value}).join(" ")}).map(op)}},op=function(A){switch(A){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},at;(function(A){A.AUTO="auto",A.CONTAIN="contain",A.COVER="cover"})(at||(at={}));var lp={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(A,e){return qe(e).map(function(t){return t.filter(cp)})}},cp=function(A){return Ae(A)||ce(A)},Fr=function(A){return{name:"border-"+A+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},up=Fr("top"),dp=Fr("right"),hp=Fr("bottom"),fp=Fr("left"),Er=function(A){return{name:"border-radius-"+A,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Vl(t.filter(ce))}}},mp=Er("top-left"),gp=Er("top-right"),pp=Er("bottom-right"),Bp=Er("bottom-left"),Nr=function(A){return{name:"border-"+A+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},wp=Nr("top"),xp=Nr("right"),yp=Nr("bottom"),bp=Nr("left"),jr=function(A){return{name:"border-"+A+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return as(t)?t.number:0}}},Cp=jr("top"),vp=jr("right"),Qp=jr("bottom"),Up=jr("left"),Fp={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ep={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(A,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},Np={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(A,e){return e.filter(Ae).reduce(function(t,s){return t|jp(s.value)},0)}},jp=function(A){switch(A){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Ip={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Sp={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(A,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},tr;(function(A){A.NORMAL="normal",A.STRICT="strict"})(tr||(tr={}));var Hp={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){switch(e){case"strict":return tr.STRICT;case"normal":default:return tr.NORMAL}}},_p={name:"line-height",initialValue:"normal",prefix:!1,type:4},Oi=function(A,e){return Ae(A)&&A.value==="normal"?1.2*e:A.type===17?e*A.number:ce(A)?ne(A,e):e},kp={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(A,e){return e.type===20&&e.value==="none"?null:Ea.parse(A,e)}},Tp={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(A,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},$n={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Ir=function(A){return{name:"margin-"+A,initialValue:"0",prefix:!1,type:4}},Lp=Ir("top"),Pp=Ir("right"),Op=Ir("bottom"),Dp=Ir("left"),Rp={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(A,e){return e.filter(Ae).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Kp={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Sr=function(A){return{name:"padding-"+A,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Mp=Sr("top"),Vp=Sr("right"),Gp=Sr("bottom"),$p=Sr("left"),Jp={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(A,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Wp={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(A,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Xp={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(A,e){return e.length===1&&Gn(e[0],"none")?[]:qe(e).map(function(t){for(var s={color:AA.TRANSPARENT,offsetX:Be,offsetY:Be,blur:Be},n=0,a=0;a<t.length;a++){var i=t[a];BA(i)?(n===0?s.offsetX=i:n===1?s.offsetY=i:s.blur=i,n++):s.color=gA.parse(A,i)}return s})}},qp={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},zp={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(A,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=e0[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},Yp=function(A){var e=A.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},Zp=function(A){var e=A.filter(function(l){return l.type===17}).map(function(l){return l.number}),t=e[0],s=e[1];e[2],e[3];var n=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[t,s,n,a,i,o]:null},e0={matrix:Yp,matrix3d:Zp},Di={type:16,number:50,flags:ns},A0=[Di,Di],t0={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(A,e){var t=e.filter(ce);return t.length!==2?A0:[t[0],t[1]]}},s0={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(A,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Mt;(function(A){A.NORMAL="normal",A.BREAK_ALL="break-all",A.KEEP_ALL="keep-all"})(Mt||(Mt={}));var r0={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){switch(e){case"break-all":return Mt.BREAK_ALL;case"keep-all":return Mt.KEEP_ALL;case"normal":default:return Mt.NORMAL}}},n0={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(A,e){if(e.type===20)return{auto:!0,order:0};if(pt(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},ac={name:"time",parse:function(A,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},a0={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(A,e){return pt(e)?e.number:1}},i0={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},o0={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(A,e){return e.filter(Ae).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},l0={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(A,e){var t=[],s=[];return e.forEach(function(n){switch(n.type){case 20:case 0:t.push(n.value);break;case 17:t.push(n.number.toString());break;case 4:s.push(t.join(" ")),t.length=0;break}}),t.length&&s.push(t.join(" ")),s.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},c0={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},u0={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(A,e){if(pt(e))return e.number;if(Ae(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},d0={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(A,e){return e.filter(Ae).map(function(t){return t.value})}},h0={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(A,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},he=function(A,e){return(A&e)!==0},f0={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(A,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},m0={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var s=[],n=e.filter(Ml),a=0;a<n.length;a++){var i=n[a],o=n[a+1];if(i.type===20){var l=o&&pt(o)?o.number:1;s.push({counter:i.value,increment:l})}}return s}},g0={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(e.length===0)return[];for(var t=[],s=e.filter(Ml),n=0;n<s.length;n++){var a=s[n],i=s[n+1];if(Ae(a)&&a.value!=="none"){var o=i&&pt(i)?i.number:0;t.push({counter:a.value,reset:o})}}return t}},p0={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(A,e){return e.filter(as).map(function(t){return ac.parse(A,t)})}},B0={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(A,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var s=[],n=e.filter(Vg);if(n.length%2!==0)return null;for(var a=0;a<n.length;a+=2){var i=n[a].value,o=n[a+1].value;s.push({open:i,close:o})}return s}},Ri=function(A,e,t){if(!A)return"";var s=A[Math.min(e,A.length-1)];return s?t?s.open:s.close:""},w0={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(A,e){return e.length===1&&Gn(e[0],"none")?[]:qe(e).map(function(t){for(var s={color:255,offsetX:Be,offsetY:Be,blur:Be,spread:Be,inset:!1},n=0,a=0;a<t.length;a++){var i=t[a];Gn(i,"inset")?s.inset=!0:BA(i)?(n===0?s.offsetX=i:n===1?s.offsetY=i:n===2?s.blur=i:s.spread=i,n++):s.color=gA.parse(A,i)}return s})}},x0={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(A,e){var t=[0,1,2],s=[];return e.filter(Ae).forEach(function(n){switch(n.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),t.forEach(function(n){s.indexOf(n)===-1&&s.push(n)}),s}},y0={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},b0={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(A,e){return as(e)?e.number:0}},C0=function(){function A(e,t){var s,n;this.animationDuration=L(e,p0,t.animationDuration),this.backgroundClip=L(e,Jg,t.backgroundClip),this.backgroundColor=L(e,Wg,t.backgroundColor),this.backgroundImage=L(e,rp,t.backgroundImage),this.backgroundOrigin=L(e,np,t.backgroundOrigin),this.backgroundPosition=L(e,ap,t.backgroundPosition),this.backgroundRepeat=L(e,ip,t.backgroundRepeat),this.backgroundSize=L(e,lp,t.backgroundSize),this.borderTopColor=L(e,up,t.borderTopColor),this.borderRightColor=L(e,dp,t.borderRightColor),this.borderBottomColor=L(e,hp,t.borderBottomColor),this.borderLeftColor=L(e,fp,t.borderLeftColor),this.borderTopLeftRadius=L(e,mp,t.borderTopLeftRadius),this.borderTopRightRadius=L(e,gp,t.borderTopRightRadius),this.borderBottomRightRadius=L(e,pp,t.borderBottomRightRadius),this.borderBottomLeftRadius=L(e,Bp,t.borderBottomLeftRadius),this.borderTopStyle=L(e,wp,t.borderTopStyle),this.borderRightStyle=L(e,xp,t.borderRightStyle),this.borderBottomStyle=L(e,yp,t.borderBottomStyle),this.borderLeftStyle=L(e,bp,t.borderLeftStyle),this.borderTopWidth=L(e,Cp,t.borderTopWidth),this.borderRightWidth=L(e,vp,t.borderRightWidth),this.borderBottomWidth=L(e,Qp,t.borderBottomWidth),this.borderLeftWidth=L(e,Up,t.borderLeftWidth),this.boxShadow=L(e,w0,t.boxShadow),this.color=L(e,Fp,t.color),this.direction=L(e,Ep,t.direction),this.display=L(e,Np,t.display),this.float=L(e,Ip,t.cssFloat),this.fontFamily=L(e,l0,t.fontFamily),this.fontSize=L(e,c0,t.fontSize),this.fontStyle=L(e,h0,t.fontStyle),this.fontVariant=L(e,d0,t.fontVariant),this.fontWeight=L(e,u0,t.fontWeight),this.letterSpacing=L(e,Sp,t.letterSpacing),this.lineBreak=L(e,Hp,t.lineBreak),this.lineHeight=L(e,_p,t.lineHeight),this.listStyleImage=L(e,kp,t.listStyleImage),this.listStylePosition=L(e,Tp,t.listStylePosition),this.listStyleType=L(e,$n,t.listStyleType),this.marginTop=L(e,Lp,t.marginTop),this.marginRight=L(e,Pp,t.marginRight),this.marginBottom=L(e,Op,t.marginBottom),this.marginLeft=L(e,Dp,t.marginLeft),this.opacity=L(e,a0,t.opacity);var a=L(e,Rp,t.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=L(e,Kp,t.overflowWrap),this.paddingTop=L(e,Mp,t.paddingTop),this.paddingRight=L(e,Vp,t.paddingRight),this.paddingBottom=L(e,Gp,t.paddingBottom),this.paddingLeft=L(e,$p,t.paddingLeft),this.paintOrder=L(e,x0,t.paintOrder),this.position=L(e,Wp,t.position),this.textAlign=L(e,Jp,t.textAlign),this.textDecorationColor=L(e,i0,(s=t.textDecorationColor)!==null&&s!==void 0?s:t.color),this.textDecorationLine=L(e,o0,(n=t.textDecorationLine)!==null&&n!==void 0?n:t.textDecoration),this.textShadow=L(e,Xp,t.textShadow),this.textTransform=L(e,qp,t.textTransform),this.transform=L(e,zp,t.transform),this.transformOrigin=L(e,t0,t.transformOrigin),this.visibility=L(e,s0,t.visibility),this.webkitTextStrokeColor=L(e,y0,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=L(e,b0,t.webkitTextStrokeWidth),this.wordBreak=L(e,r0,t.wordBreak),this.zIndex=L(e,n0,t.zIndex)}return A.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},A.prototype.isTransparent=function(){return pA(this.backgroundColor)},A.prototype.isTransformed=function(){return this.transform!==null},A.prototype.isPositioned=function(){return this.position!==0},A.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},A.prototype.isFloating=function(){return this.float!==0},A.prototype.isInlineLevel=function(){return he(this.display,4)||he(this.display,33554432)||he(this.display,268435456)||he(this.display,536870912)||he(this.display,67108864)||he(this.display,134217728)},A}(),v0=function(){function A(e,t){this.content=L(e,f0,t.content),this.quotes=L(e,B0,t.quotes)}return A}(),Ki=function(){function A(e,t){this.counterIncrement=L(e,m0,t.counterIncrement),this.counterReset=L(e,g0,t.counterReset)}return A}(),L=function(A,e,t){var s=new Rl,n=t!==null&&typeof t<"u"?t.toString():e.initialValue;s.write(n);var a=new Kl(s.read());switch(e.type){case 2:var i=a.parseComponentValue();return e.parse(A,Ae(i)?i.value:e.initialValue);case 0:return e.parse(A,a.parseComponentValue());case 1:return e.parse(A,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return Qr.parse(A,a.parseComponentValue());case"color":return gA.parse(A,a.parseComponentValue());case"image":return Ea.parse(A,a.parseComponentValue());case"length":var o=a.parseComponentValue();return BA(o)?o:Be;case"length-percentage":var l=a.parseComponentValue();return ce(l)?l:Be;case"time":return ac.parse(A,a.parseComponentValue())}break}},Q0="data-html2canvas-debug",U0=function(A){var e=A.getAttribute(Q0);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Jn=function(A,e){var t=U0(A);return t===1||e===t},ze=function(){function A(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Jn(t,3))debugger;this.styles=new C0(e,window.getComputedStyle(t,null)),qn(t)&&(this.styles.animationDuration.some(function(s){return s>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Cr(this.context,t),Jn(t,4)&&(this.flags|=16)}return A}(),F0="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_t=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ks=0;ks<Mi.length;ks++)_t[Mi.charCodeAt(ks)]=ks;var E0=function(A){var e=A.length*.75,t=A.length,s,n=0,a,i,o,l;A[A.length-1]==="="&&(e--,A[A.length-2]==="="&&e--);var c=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),u=Array.isArray(c)?c:new Uint8Array(c);for(s=0;s<t;s+=4)a=_t[A.charCodeAt(s)],i=_t[A.charCodeAt(s+1)],o=_t[A.charCodeAt(s+2)],l=_t[A.charCodeAt(s+3)],u[n++]=a<<2|i>>4,u[n++]=(i&15)<<4|o>>2,u[n++]=(o&3)<<6|l&63;return c},N0=function(A){for(var e=A.length,t=[],s=0;s<e;s+=2)t.push(A[s+1]<<8|A[s]);return t},j0=function(A){for(var e=A.length,t=[],s=0;s<e;s+=4)t.push(A[s+3]<<24|A[s+2]<<16|A[s+1]<<8|A[s]);return t},kA=5,Na=11,sn=2,I0=Na-kA,ic=65536>>kA,S0=1<<kA,rn=S0-1,H0=1024>>kA,_0=ic+H0,k0=_0,T0=32,L0=k0+T0,P0=65536>>Na,O0=1<<I0,D0=O0-1,Vi=function(A,e,t){return A.slice?A.slice(e,t):new Uint16Array(Array.prototype.slice.call(A,e,t))},R0=function(A,e,t){return A.slice?A.slice(e,t):new Uint32Array(Array.prototype.slice.call(A,e,t))},K0=function(A,e){var t=E0(A),s=Array.isArray(t)?j0(t):new Uint32Array(t),n=Array.isArray(t)?N0(t):new Uint16Array(t),a=24,i=Vi(n,a/2,s[4]/2),o=s[5]===2?Vi(n,(a+s[4])/2):R0(s,Math.ceil((a+s[4])/4));return new M0(s[0],s[1],s[2],s[3],i,o)},M0=function(){function A(e,t,s,n,a,i){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=n,this.index=a,this.data=i}return A.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>kA],t=(t<<sn)+(e&rn),this.data[t];if(e<=65535)return t=this.index[ic+(e-55296>>kA)],t=(t<<sn)+(e&rn),this.data[t];if(e<this.highStart)return t=L0-P0+(e>>Na),t=this.index[t],t+=e>>kA&D0,t=this.index[t],t=(t<<sn)+(e&rn),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},A}(),Gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",V0=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ts=0;Ts<Gi.length;Ts++)V0[Gi.charCodeAt(Ts)]=Ts;var G0=1,nn=2,an=3,$i=4,Ji=5,$0=7,Wi=8,on=9,ln=10,Xi=11,qi=12,zi=13,Yi=14,cn=15,J0=function(A){for(var e=[],t=0,s=A.length;t<s;){var n=A.charCodeAt(t++);if(n>=55296&&n<=56319&&t<s){var a=A.charCodeAt(t++);(a&64512)===56320?e.push(((n&1023)<<10)+(a&1023)+65536):(e.push(n),t--)}else e.push(n)}return e},W0=function(){for(var A=[],e=0;e<arguments.length;e++)A[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,A);var t=A.length;if(!t)return"";for(var s=[],n=-1,a="";++n<t;){var i=A[n];i<=65535?s.push(i):(i-=65536,s.push((i>>10)+55296,i%1024+56320)),(n+1===t||s.length>16384)&&(a+=String.fromCharCode.apply(String,s),s.length=0)}return a},X0=K0(F0),Le="×",un="÷",q0=function(A){return X0.get(A)},z0=function(A,e,t){var s=t-2,n=e[s],a=e[t-1],i=e[t];if(a===nn&&i===an)return Le;if(a===nn||a===an||a===$i||i===nn||i===an||i===$i)return un;if(a===Wi&&[Wi,on,Xi,qi].indexOf(i)!==-1||(a===Xi||a===on)&&(i===on||i===ln)||(a===qi||a===ln)&&i===ln||i===zi||i===Ji||i===$0||a===G0)return Le;if(a===zi&&i===Yi){for(;n===Ji;)n=e[--s];if(n===Yi)return Le}if(a===cn&&i===cn){for(var o=0;n===cn;)o++,n=e[--s];if(o%2===0)return Le}return un},Y0=function(A){var e=J0(A),t=e.length,s=0,n=0,a=e.map(q0);return{next:function(){if(s>=t)return{done:!0,value:null};for(var i=Le;s<t&&(i=z0(e,a,++s))===Le;);if(i!==Le||s===t){var o=W0.apply(null,e.slice(n,s));return n=s,{value:o,done:!1}}return{done:!0,value:null}}}},Z0=function(A){for(var e=Y0(A),t=[],s;!(s=e.next()).done;)s.value&&t.push(s.value.slice());return t},eB=function(A){var e=123;if(A.createRange){var t=A.createRange();if(t.getBoundingClientRect){var s=A.createElement("boundtest");s.style.height=e+"px",s.style.display="block",A.body.appendChild(s),t.selectNode(s);var n=t.getBoundingClientRect(),a=Math.round(n.height);if(A.body.removeChild(s),a===e)return!0}}return!1},AB=function(A){var e=A.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",A.body.appendChild(e);var t=A.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=e.firstChild,n=vr(s.data).map(function(l){return le(l)}),a=0,i={},o=n.every(function(l,c){t.setStart(s,a),t.setEnd(s,a+l.length);var u=t.getBoundingClientRect();a+=l.length;var d=u.x>i.x||u.y>i.y;return i=u,c===0?!0:d});return A.body.removeChild(e),o},tB=function(){return typeof new Image().crossOrigin<"u"},sB=function(){return typeof new XMLHttpRequest().responseType=="string"},rB=function(A){var e=new Image,t=A.createElement("canvas"),s=t.getContext("2d");if(!s)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},Zi=function(A){return A[0]===0&&A[1]===255&&A[2]===0&&A[3]===255},nB=function(A){var e=A.createElement("canvas"),t=100;e.width=t,e.height=t;var s=e.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,t,t);var n=new Image,a=e.toDataURL();n.src=a;var i=Wn(t,t,0,0,n);return s.fillStyle="red",s.fillRect(0,0,t,t),eo(i).then(function(o){s.drawImage(o,0,0);var l=s.getImageData(0,0,t,t).data;s.fillStyle="red",s.fillRect(0,0,t,t);var c=A.createElement("div");return c.style.backgroundImage="url("+a+")",c.style.height=t+"px",Zi(l)?eo(Wn(t,t,0,0,c)):Promise.reject(!1)}).then(function(o){return s.drawImage(o,0,0),Zi(s.getImageData(0,0,t,t).data)}).catch(function(){return!1})},Wn=function(A,e,t,s,n){var a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return i.setAttributeNS(null,"width",A.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",s.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(n),i},eo=function(A){return new Promise(function(e,t){var s=new Image;s.onload=function(){return e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(A))})},pe={get SUPPORT_RANGE_BOUNDS(){var A=eB(document);return Object.defineProperty(pe,"SUPPORT_RANGE_BOUNDS",{value:A}),A},get SUPPORT_WORD_BREAKING(){var A=pe.SUPPORT_RANGE_BOUNDS&&AB(document);return Object.defineProperty(pe,"SUPPORT_WORD_BREAKING",{value:A}),A},get SUPPORT_SVG_DRAWING(){var A=rB(document);return Object.defineProperty(pe,"SUPPORT_SVG_DRAWING",{value:A}),A},get SUPPORT_FOREIGNOBJECT_DRAWING(){var A=typeof Array.from=="function"&&typeof window.fetch=="function"?nB(document):Promise.resolve(!1);return Object.defineProperty(pe,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:A}),A},get SUPPORT_CORS_IMAGES(){var A=tB();return Object.defineProperty(pe,"SUPPORT_CORS_IMAGES",{value:A}),A},get SUPPORT_RESPONSE_TYPE(){var A=sB();return Object.defineProperty(pe,"SUPPORT_RESPONSE_TYPE",{value:A}),A},get SUPPORT_CORS_XHR(){var A="withCredentials"in new XMLHttpRequest;return Object.defineProperty(pe,"SUPPORT_CORS_XHR",{value:A}),A},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var A=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(pe,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:A}),A}},Vt=function(){function A(e,t){this.text=e,this.bounds=t}return A}(),aB=function(A,e,t,s){var n=lB(e,t),a=[],i=0;return n.forEach(function(o){if(t.textDecorationLine.length||o.trim().length>0)if(pe.SUPPORT_RANGE_BOUNDS){var l=Ao(s,i,o.length).getClientRects();if(l.length>1){var c=ja(o),u=0;c.forEach(function(h){a.push(new Vt(h,tA.fromDOMRectList(A,Ao(s,u+i,h.length).getClientRects()))),u+=h.length})}else a.push(new Vt(o,tA.fromDOMRectList(A,l)))}else{var d=s.splitText(o.length);a.push(new Vt(o,iB(A,s))),s=d}else pe.SUPPORT_RANGE_BOUNDS||(s=s.splitText(o.length));i+=o.length}),a},iB=function(A,e){var t=e.ownerDocument;if(t){var s=t.createElement("html2canvaswrapper");s.appendChild(e.cloneNode(!0));var n=e.parentNode;if(n){n.replaceChild(s,e);var a=Cr(A,s);return s.firstChild&&n.replaceChild(s.firstChild,s),a}}return tA.EMPTY},Ao=function(A,e,t){var s=A.ownerDocument;if(!s)throw new Error("Node has no owner document");var n=s.createRange();return n.setStart(A,e),n.setEnd(A,e+t),n},ja=function(A){if(pe.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(A)).map(function(t){return t.segment})}return Z0(A)},oB=function(A,e){if(pe.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(A)).map(function(s){return s.segment})}return uB(A,e)},lB=function(A,e){return e.letterSpacing!==0?ja(A):oB(A,e)},cB=[32,160,4961,65792,65793,4153,4241],uB=function(A,e){for(var t=Pm(A,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),s=[],n,a=function(){if(n.value){var i=n.value.slice(),o=vr(i),l="";o.forEach(function(c){cB.indexOf(c)===-1?l+=le(c):(l.length&&s.push(l),s.push(le(c)),l="")}),l.length&&s.push(l)}};!(n=t.next()).done;)a();return s},dB=function(){function A(e,t,s){this.text=hB(t.data,s.textTransform),this.textBounds=aB(e,this.text,s,t)}return A}(),hB=function(A,e){switch(e){case 1:return A.toLowerCase();case 3:return A.replace(fB,mB);case 2:return A.toUpperCase();default:return A}},fB=/(^|\s|:|-|\(|\))([a-z])/g,mB=function(A,e,t){return A.length>0?e+t.toUpperCase():A},oc=function(A){Ge(e,A);function e(t,s){var n=A.call(this,t,s)||this;return n.src=s.currentSrc||s.src,n.intrinsicWidth=s.naturalWidth,n.intrinsicHeight=s.naturalHeight,n.context.cache.addImage(n.src),n}return e}(ze),lc=function(A){Ge(e,A);function e(t,s){var n=A.call(this,t,s)||this;return n.canvas=s,n.intrinsicWidth=s.width,n.intrinsicHeight=s.height,n}return e}(ze),cc=function(A){Ge(e,A);function e(t,s){var n=A.call(this,t,s)||this,a=new XMLSerializer,i=Cr(t,s);return s.setAttribute("width",i.width+"px"),s.setAttribute("height",i.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(s)),n.intrinsicWidth=s.width.baseVal.value,n.intrinsicHeight=s.height.baseVal.value,n.context.cache.addImage(n.svg),n}return e}(ze),uc=function(A){Ge(e,A);function e(t,s){var n=A.call(this,t,s)||this;return n.value=s.value,n}return e}(ze),Xn=function(A){Ge(e,A);function e(t,s){var n=A.call(this,t,s)||this;return n.start=s.start,n.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,n}return e}(ze),gB=[{type:15,flags:0,unit:"px",number:3}],pB=[{type:16,flags:0,number:50}],BB=function(A){return A.width>A.height?new tA(A.left+(A.width-A.height)/2,A.top,A.height,A.height):A.width<A.height?new tA(A.left,A.top+(A.height-A.width)/2,A.width,A.width):A},wB=function(A){var e=A.type===xB?new Array(A.value.length+1).join("•"):A.value;return e.length===0?A.placeholder||"":e},sr="checkbox",rr="radio",xB="password",to=707406591,Ia=function(A){Ge(e,A);function e(t,s){var n=A.call(this,t,s)||this;switch(n.type=s.type.toLowerCase(),n.checked=s.checked,n.value=wB(s),(n.type===sr||n.type===rr)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=BB(n.bounds)),n.type){case sr:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=gB;break;case rr:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=pB;break}return n}return e}(ze),dc=function(A){Ge(e,A);function e(t,s){var n=A.call(this,t,s)||this,a=s.options[s.selectedIndex||0];return n.value=a&&a.text||"",n}return e}(ze),hc=function(A){Ge(e,A);function e(t,s){var n=A.call(this,t,s)||this;return n.value=s.value,n}return e}(ze),fc=function(A){Ge(e,A);function e(t,s){var n=A.call(this,t,s)||this;n.src=s.src,n.width=parseInt(s.width,10)||0,n.height=parseInt(s.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){n.tree=gc(t,s.contentWindow.document.documentElement);var a=s.contentWindow.document.documentElement?Kt(t,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):AA.TRANSPARENT,i=s.contentWindow.document.body?Kt(t,getComputedStyle(s.contentWindow.document.body).backgroundColor):AA.TRANSPARENT;n.backgroundColor=pA(a)?pA(i)?n.styles.backgroundColor:i:a}}catch{}return n}return e}(ze),yB=["OL","UL","MENU"],Gs=function(A,e,t,s){for(var n=e.firstChild,a=void 0;n;n=a)if(a=n.nextSibling,pc(n)&&n.data.trim().length>0)t.textNodes.push(new dB(A,n,t.styles));else if(st(n))if(yc(n)&&n.assignedNodes)n.assignedNodes().forEach(function(o){return Gs(A,o,t,s)});else{var i=mc(A,n);i.styles.isVisible()&&(bB(n,i,s)?i.flags|=4:CB(i.styles)&&(i.flags|=2),yB.indexOf(n.tagName)!==-1&&(i.flags|=8),t.elements.push(i),n.slot,n.shadowRoot?Gs(A,n.shadowRoot,i,s):!nr(n)&&!Bc(n)&&!ar(n)&&Gs(A,n,i,s))}},mc=function(A,e){return zn(e)?new oc(A,e):wc(e)?new lc(A,e):Bc(e)?new cc(A,e):vB(e)?new uc(A,e):QB(e)?new Xn(A,e):UB(e)?new Ia(A,e):ar(e)?new dc(A,e):nr(e)?new hc(A,e):xc(e)?new fc(A,e):new ze(A,e)},gc=function(A,e){var t=mc(A,e);return t.flags|=4,Gs(A,e,t,t),t},bB=function(A,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Sa(A)&&t.styles.isTransparent()},CB=function(A){return A.isPositioned()||A.isFloating()},pc=function(A){return A.nodeType===Node.TEXT_NODE},st=function(A){return A.nodeType===Node.ELEMENT_NODE},qn=function(A){return st(A)&&typeof A.style<"u"&&!$s(A)},$s=function(A){return typeof A.className=="object"},vB=function(A){return A.tagName==="LI"},QB=function(A){return A.tagName==="OL"},UB=function(A){return A.tagName==="INPUT"},FB=function(A){return A.tagName==="HTML"},Bc=function(A){return A.tagName==="svg"},Sa=function(A){return A.tagName==="BODY"},wc=function(A){return A.tagName==="CANVAS"},so=function(A){return A.tagName==="VIDEO"},zn=function(A){return A.tagName==="IMG"},xc=function(A){return A.tagName==="IFRAME"},ro=function(A){return A.tagName==="STYLE"},EB=function(A){return A.tagName==="SCRIPT"},nr=function(A){return A.tagName==="TEXTAREA"},ar=function(A){return A.tagName==="SELECT"},yc=function(A){return A.tagName==="SLOT"},no=function(A){return A.tagName.indexOf("-")>0},NB=function(){function A(){this.counters={}}return A.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},A.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},A.prototype.pop=function(e){var t=this;e.forEach(function(s){return t.counters[s].pop()})},A.prototype.parse=function(e){var t=this,s=e.counterIncrement,n=e.counterReset,a=!0;s!==null&&s.forEach(function(o){var l=t.counters[o.counter];l&&o.increment!==0&&(a=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return a&&n.forEach(function(o){var l=t.counters[o.counter];i.push(o.counter),l||(l=t.counters[o.counter]=[]),l.push(o.reset)}),i},A}(),ao={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},io={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},jB={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},IB={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},zA=function(A,e,t,s,n,a){return A<e||A>t?es(A,n,a.length>0):s.integers.reduce(function(i,o,l){for(;A>=o;)A-=o,i+=s.values[l];return i},"")+a},bc=function(A,e,t,s){var n="";do t||A--,n=s(A)+n,A/=e;while(A*e>=e);return n},oe=function(A,e,t,s,n){var a=t-e+1;return(A<0?"-":"")+(bc(Math.abs(A),a,s,function(i){return le(Math.floor(i%a)+e)})+n)},CA=function(A,e,t){t===void 0&&(t=". ");var s=e.length;return bc(Math.abs(A),s,!1,function(n){return e[Math.floor(n%s)]})+t},At=1,aA=2,iA=4,kt=8,Ze=function(A,e,t,s,n,a){if(A<-9999||A>9999)return es(A,4,n.length>0);var i=Math.abs(A),o=n;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var c=i%10;c===0&&he(a,At)&&o!==""?o=e[c]+o:c>1||c===1&&l===0||c===1&&l===1&&he(a,aA)||c===1&&l===1&&he(a,iA)&&A>100||c===1&&l>1&&he(a,kt)?o=e[c]+(l>0?t[l-1]:"")+o:c===1&&l>0&&(o=t[l-1]+o),i=Math.floor(i/10)}return(A<0?s:"")+o},oo="十百千萬",lo="拾佰仟萬",co="マイナス",dn="마이너스",es=function(A,e,t){var s=t?". ":"",n=t?"、":"",a=t?", ":"",i=t?" ":"";switch(e){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=oe(A,48,57,!0,s);return o.length<4?"0"+o:o;case 4:return CA(A,"〇一二三四五六七八九",n);case 6:return zA(A,1,3999,ao,3,s).toLowerCase();case 7:return zA(A,1,3999,ao,3,s);case 8:return oe(A,945,969,!1,s);case 9:return oe(A,97,122,!1,s);case 10:return oe(A,65,90,!1,s);case 11:return oe(A,1632,1641,!0,s);case 12:case 49:return zA(A,1,9999,io,3,s);case 35:return zA(A,1,9999,io,3,s).toLowerCase();case 13:return oe(A,2534,2543,!0,s);case 14:case 30:return oe(A,6112,6121,!0,s);case 15:return CA(A,"子丑寅卯辰巳午未申酉戌亥",n);case 16:return CA(A,"甲乙丙丁戊己庚辛壬癸",n);case 17:case 48:return Ze(A,"零一二三四五六七八九",oo,"負",n,aA|iA|kt);case 47:return Ze(A,"零壹貳參肆伍陸柒捌玖",lo,"負",n,At|aA|iA|kt);case 42:return Ze(A,"零一二三四五六七八九",oo,"负",n,aA|iA|kt);case 41:return Ze(A,"零壹贰叁肆伍陆柒捌玖",lo,"负",n,At|aA|iA|kt);case 26:return Ze(A,"〇一二三四五六七八九","十百千万",co,n,0);case 25:return Ze(A,"零壱弐参四伍六七八九","拾百千万",co,n,At|aA|iA);case 31:return Ze(A,"영일이삼사오육칠팔구","십백천만",dn,a,At|aA|iA);case 33:return Ze(A,"零一二三四五六七八九","十百千萬",dn,a,0);case 32:return Ze(A,"零壹貳參四五六七八九","拾百千",dn,a,At|aA|iA);case 18:return oe(A,2406,2415,!0,s);case 20:return zA(A,1,19999,IB,3,s);case 21:return oe(A,2790,2799,!0,s);case 22:return oe(A,2662,2671,!0,s);case 22:return zA(A,1,10999,jB,3,s);case 23:return CA(A,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return CA(A,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return oe(A,3302,3311,!0,s);case 28:return CA(A,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",n);case 29:return CA(A,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",n);case 34:return oe(A,3792,3801,!0,s);case 37:return oe(A,6160,6169,!0,s);case 38:return oe(A,4160,4169,!0,s);case 39:return oe(A,2918,2927,!0,s);case 40:return oe(A,1776,1785,!0,s);case 43:return oe(A,3046,3055,!0,s);case 44:return oe(A,3174,3183,!0,s);case 45:return oe(A,3664,3673,!0,s);case 46:return oe(A,3872,3881,!0,s);case 3:default:return oe(A,48,57,!0,s)}},Cc="data-html2canvas-ignore",uo=function(){function A(e,t,s){if(this.context=e,this.options=s,this.scrolledElements=[],this.referenceElement=t,this.counters=new NB,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return A.prototype.toIFrame=function(e,t){var s=this,n=SB(e,t);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=n.contentWindow,l=o.document,c=kB(n).then(function(){return ve(s,void 0,void 0,function(){var u,d;return we(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(OB),o&&(o.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==t.top||o.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-t.left,o.scrollY-t.top,0,0))),u=this.options.onclone,d=this.clonedReferenceElement,typeof d>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,_B(l)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof u=="function"?[2,Promise.resolve().then(function(){return u(l,d)}).then(function(){return n})]:[2,n]}})})});return l.open(),l.write(LB(document.doctype)+"<html></html>"),PB(this.referenceElement.ownerDocument,a,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),c},A.prototype.createElementClone=function(e){if(Jn(e,2))debugger;if(wc(e))return this.createCanvasClone(e);if(so(e))return this.createVideoClone(e);if(ro(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return zn(t)&&(zn(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),no(t)?this.createCustomElementClone(t):t},A.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return hn(e.style,t),t},A.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var s=[].slice.call(t.cssRules,0).reduce(function(a,i){return i&&typeof i.cssText=="string"?a+i.cssText:a},""),n=e.cloneNode(!1);return n.textContent=s,n}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},A.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var s=e.ownerDocument.createElement("img");try{return s.src=e.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var a=e.getContext("2d"),i=n.getContext("2d");if(i)if(!this.options.allowTaint&&a)i.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var o=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return n},A.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var s=t.getContext("2d");try{return s&&(s.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||s.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var n=e.ownerDocument.createElement("canvas");return n.width=e.offsetWidth,n.height=e.offsetHeight,n},A.prototype.appendChildNode=function(e,t,s){(!st(t)||!EB(t)&&!t.hasAttribute(Cc)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!st(t)||!ro(t))&&e.appendChild(this.cloneNode(t,s))},A.prototype.cloneChildNodes=function(e,t,s){for(var n=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(st(a)&&yc(a)&&typeof a.assignedNodes=="function"){var i=a.assignedNodes();i.length&&i.forEach(function(o){return n.appendChildNode(t,o,s)})}else this.appendChildNode(t,a,s)},A.prototype.cloneNode=function(e,t){if(pc(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var s=e.ownerDocument.defaultView;if(s&&st(e)&&(qn(e)||$s(e))){var n=this.createElementClone(e);n.style.transitionProperty="none";var a=s.getComputedStyle(e),i=s.getComputedStyle(e,":before"),o=s.getComputedStyle(e,":after");this.referenceElement===e&&qn(n)&&(this.clonedReferenceElement=n),Sa(n)&&KB(n);var l=this.counters.parse(new Ki(this.context,a)),c=this.resolvePseudoContent(e,n,i,Gt.BEFORE);no(e)&&(t=!0),so(e)||this.cloneChildNodes(e,n,t),c&&n.insertBefore(c,n.firstChild);var u=this.resolvePseudoContent(e,n,o,Gt.AFTER);return u&&n.appendChild(u),this.counters.pop(l),(a&&(this.options.copyStyles||$s(e))&&!xc(e)||t)&&hn(a,n),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([n,e.scrollLeft,e.scrollTop]),(nr(e)||ar(e))&&(nr(n)||ar(n))&&(n.value=e.value),n}return e.cloneNode(!1)},A.prototype.resolvePseudoContent=function(e,t,s,n){var a=this;if(s){var i=s.content,o=t.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||s.display==="none")){this.counters.parse(new Ki(this.context,s));var l=new v0(this.context,s),c=o.createElement("html2canvaspseudoelement");hn(s,c),l.content.forEach(function(d){if(d.type===0)c.appendChild(o.createTextNode(d.value));else if(d.type===22){var h=o.createElement("img");h.src=d.value,h.style.opacity="1",c.appendChild(h)}else if(d.type===18){if(d.name==="attr"){var f=d.values.filter(Ae);f.length&&c.appendChild(o.createTextNode(e.getAttribute(f[0].value)||""))}else if(d.name==="counter"){var m=d.values.filter(dt),B=m[0],g=m[1];if(B&&Ae(B)){var p=a.counters.getCounterValue(B.value),w=g&&Ae(g)?$n.parse(a.context,g.value):3;c.appendChild(o.createTextNode(es(p,w,!1)))}}else if(d.name==="counters"){var N=d.values.filter(dt),B=N[0],Q=N[1],g=N[2];if(B&&Ae(B)){var v=a.counters.getCounterValues(B.value),y=g&&Ae(g)?$n.parse(a.context,g.value):3,E=Q&&Q.type===0?Q.value:"",b=v.map(function(j){return es(j,y,!1)}).join(E);c.appendChild(o.createTextNode(b))}}}else if(d.type===20)switch(d.value){case"open-quote":c.appendChild(o.createTextNode(Ri(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":c.appendChild(o.createTextNode(Ri(l.quotes,--a.quoteDepth,!1)));break;default:c.appendChild(o.createTextNode(d.value))}}),c.className=Yn+" "+Zn;var u=n===Gt.BEFORE?" "+Yn:" "+Zn;return $s(t)?t.className.baseValue+=u:t.className+=u,c}}},A.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},A}(),Gt;(function(A){A[A.BEFORE=0]="BEFORE",A[A.AFTER=1]="AFTER"})(Gt||(Gt={}));var SB=function(A,e){var t=A.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(Cc,"true"),A.body.appendChild(t),t},HB=function(A){return new Promise(function(e){if(A.complete){e();return}if(!A.src){e();return}A.onload=e,A.onerror=e})},_B=function(A){return Promise.all([].slice.call(A.images,0).map(HB))},kB=function(A){return new Promise(function(e,t){var s=A.contentWindow;if(!s)return t("No window assigned for iframe");var n=s.document;s.onload=A.onload=function(){s.onload=A.onload=null;var a=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(a),e(A))},50)}})},TB=["all","d","content"],hn=function(A,e){for(var t=A.length-1;t>=0;t--){var s=A.item(t);TB.indexOf(s)===-1&&e.style.setProperty(s,A.getPropertyValue(s))}return e},LB=function(A){var e="";return A&&(e+="<!DOCTYPE ",A.name&&(e+=A.name),A.internalSubset&&(e+=A.internalSubset),A.publicId&&(e+='"'+A.publicId+'"'),A.systemId&&(e+='"'+A.systemId+'"'),e+=">"),e},PB=function(A,e,t){A&&A.defaultView&&(e!==A.defaultView.pageXOffset||t!==A.defaultView.pageYOffset)&&A.defaultView.scrollTo(e,t)},OB=function(A){var e=A[0],t=A[1],s=A[2];e.scrollLeft=t,e.scrollTop=s},DB=":before",RB=":after",Yn="___html2canvas___pseudoelement_before",Zn="___html2canvas___pseudoelement_after",ho=`{
    content: "" !important;
    display: none !important;
}`,KB=function(A){MB(A,"."+Yn+DB+ho+`
         .`+Zn+RB+ho)},MB=function(A,e){var t=A.ownerDocument;if(t){var s=t.createElement("style");s.textContent=e,A.appendChild(s)}},vc=function(){function A(){}return A.getOrigin=function(e){var t=A._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},A.isSameOrigin=function(e){return A.getOrigin(e)===A._origin},A.setContext=function(e){A._link=e.document.createElement("a"),A._origin=A.getOrigin(e.location.href)},A._origin="about:blank",A}(),VB=function(){function A(e,t){this.context=e,this._options=t,this._cache={}}return A.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(mn(e)||WB(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},A.prototype.match=function(e){return this._cache[e]},A.prototype.loadImage=function(e){return ve(this,void 0,void 0,function(){var t,s,n,a,i=this;return we(this,function(o){switch(o.label){case 0:return t=vc.isSameOrigin(e),s=!fn(e)&&this._options.useCORS===!0&&pe.SUPPORT_CORS_IMAGES&&!t,n=!fn(e)&&!t&&!mn(e)&&typeof this._options.proxy=="string"&&pe.SUPPORT_CORS_XHR&&!s,!t&&this._options.allowTaint===!1&&!fn(e)&&!mn(e)&&!n&&!s?[2]:(a=e,n?[4,this.proxy(a)]:[3,2]);case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,c){var u=new Image;u.onload=function(){return l(u)},u.onerror=c,(XB(a)||s)&&(u.crossOrigin="anonymous"),u.src=a,u.complete===!0&&setTimeout(function(){return l(u)},500),i._options.imageTimeout>0&&setTimeout(function(){return c("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},A.prototype.has=function(e){return typeof this._cache[e]<"u"},A.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},A.prototype.proxy=function(e){var t=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var n=e.substring(0,256);return new Promise(function(a,i){var o=pe.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")a(l.response);else{var d=new FileReader;d.addEventListener("load",function(){return a(d.result)},!1),d.addEventListener("error",function(h){return i(h)},!1),d.readAsDataURL(l.response)}else i("Failed to proxy resource "+n+" with status code "+l.status)},l.onerror=i;var c=s.indexOf("?")>-1?"&":"?";if(l.open("GET",""+s+c+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),t._options.imageTimeout){var u=t._options.imageTimeout;l.timeout=u,l.ontimeout=function(){return i("Timed out ("+u+"ms) proxying "+n)}}l.send()})},A}(),GB=/^data:image\/svg\+xml/i,$B=/^data:image\/.*;base64,/i,JB=/^data:image\/.*/i,WB=function(A){return pe.SUPPORT_SVG_DRAWING||!qB(A)},fn=function(A){return JB.test(A)},XB=function(A){return $B.test(A)},mn=function(A){return A.substr(0,4)==="blob"},qB=function(A){return A.substr(-3).toLowerCase()==="svg"||GB.test(A)},k=function(){function A(e,t){this.type=0,this.x=e,this.y=t}return A.prototype.add=function(e,t){return new A(this.x+e,this.y+t)},A}(),YA=function(A,e,t){return new k(A.x+(e.x-A.x)*t,A.y+(e.y-A.y)*t)},Ls=function(){function A(e,t,s,n){this.type=1,this.start=e,this.startControl=t,this.endControl=s,this.end=n}return A.prototype.subdivide=function(e,t){var s=YA(this.start,this.startControl,e),n=YA(this.startControl,this.endControl,e),a=YA(this.endControl,this.end,e),i=YA(s,n,e),o=YA(n,a,e),l=YA(i,o,e);return t?new A(this.start,s,i,l):new A(l,o,a,this.end)},A.prototype.add=function(e,t){return new A(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},A.prototype.reverse=function(){return new A(this.end,this.endControl,this.startControl,this.start)},A}(),Pe=function(A){return A.type===1},zB=function(){function A(e){var t=e.styles,s=e.bounds,n=Ht(t.borderTopLeftRadius,s.width,s.height),a=n[0],i=n[1],o=Ht(t.borderTopRightRadius,s.width,s.height),l=o[0],c=o[1],u=Ht(t.borderBottomRightRadius,s.width,s.height),d=u[0],h=u[1],f=Ht(t.borderBottomLeftRadius,s.width,s.height),m=f[0],B=f[1],g=[];g.push((a+l)/s.width),g.push((m+d)/s.width),g.push((i+B)/s.height),g.push((c+h)/s.height);var p=Math.max.apply(Math,g);p>1&&(a/=p,i/=p,l/=p,c/=p,d/=p,h/=p,m/=p,B/=p);var w=s.width-l,N=s.height-h,Q=s.width-d,v=s.height-B,y=t.borderTopWidth,E=t.borderRightWidth,b=t.borderBottomWidth,C=t.borderLeftWidth,U=ne(t.paddingTop,e.bounds.width),j=ne(t.paddingRight,e.bounds.width),O=ne(t.paddingBottom,e.bounds.width),_=ne(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||i>0?ie(s.left+C/3,s.top+y/3,a-C/3,i-y/3,Y.TOP_LEFT):new k(s.left+C/3,s.top+y/3),this.topRightBorderDoubleOuterBox=a>0||i>0?ie(s.left+w,s.top+y/3,l-E/3,c-y/3,Y.TOP_RIGHT):new k(s.left+s.width-E/3,s.top+y/3),this.bottomRightBorderDoubleOuterBox=d>0||h>0?ie(s.left+Q,s.top+N,d-E/3,h-b/3,Y.BOTTOM_RIGHT):new k(s.left+s.width-E/3,s.top+s.height-b/3),this.bottomLeftBorderDoubleOuterBox=m>0||B>0?ie(s.left+C/3,s.top+v,m-C/3,B-b/3,Y.BOTTOM_LEFT):new k(s.left+C/3,s.top+s.height-b/3),this.topLeftBorderDoubleInnerBox=a>0||i>0?ie(s.left+C*2/3,s.top+y*2/3,a-C*2/3,i-y*2/3,Y.TOP_LEFT):new k(s.left+C*2/3,s.top+y*2/3),this.topRightBorderDoubleInnerBox=a>0||i>0?ie(s.left+w,s.top+y*2/3,l-E*2/3,c-y*2/3,Y.TOP_RIGHT):new k(s.left+s.width-E*2/3,s.top+y*2/3),this.bottomRightBorderDoubleInnerBox=d>0||h>0?ie(s.left+Q,s.top+N,d-E*2/3,h-b*2/3,Y.BOTTOM_RIGHT):new k(s.left+s.width-E*2/3,s.top+s.height-b*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||B>0?ie(s.left+C*2/3,s.top+v,m-C*2/3,B-b*2/3,Y.BOTTOM_LEFT):new k(s.left+C*2/3,s.top+s.height-b*2/3),this.topLeftBorderStroke=a>0||i>0?ie(s.left+C/2,s.top+y/2,a-C/2,i-y/2,Y.TOP_LEFT):new k(s.left+C/2,s.top+y/2),this.topRightBorderStroke=a>0||i>0?ie(s.left+w,s.top+y/2,l-E/2,c-y/2,Y.TOP_RIGHT):new k(s.left+s.width-E/2,s.top+y/2),this.bottomRightBorderStroke=d>0||h>0?ie(s.left+Q,s.top+N,d-E/2,h-b/2,Y.BOTTOM_RIGHT):new k(s.left+s.width-E/2,s.top+s.height-b/2),this.bottomLeftBorderStroke=m>0||B>0?ie(s.left+C/2,s.top+v,m-C/2,B-b/2,Y.BOTTOM_LEFT):new k(s.left+C/2,s.top+s.height-b/2),this.topLeftBorderBox=a>0||i>0?ie(s.left,s.top,a,i,Y.TOP_LEFT):new k(s.left,s.top),this.topRightBorderBox=l>0||c>0?ie(s.left+w,s.top,l,c,Y.TOP_RIGHT):new k(s.left+s.width,s.top),this.bottomRightBorderBox=d>0||h>0?ie(s.left+Q,s.top+N,d,h,Y.BOTTOM_RIGHT):new k(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=m>0||B>0?ie(s.left,s.top+v,m,B,Y.BOTTOM_LEFT):new k(s.left,s.top+s.height),this.topLeftPaddingBox=a>0||i>0?ie(s.left+C,s.top+y,Math.max(0,a-C),Math.max(0,i-y),Y.TOP_LEFT):new k(s.left+C,s.top+y),this.topRightPaddingBox=l>0||c>0?ie(s.left+Math.min(w,s.width-E),s.top+y,w>s.width+E?0:Math.max(0,l-E),Math.max(0,c-y),Y.TOP_RIGHT):new k(s.left+s.width-E,s.top+y),this.bottomRightPaddingBox=d>0||h>0?ie(s.left+Math.min(Q,s.width-C),s.top+Math.min(N,s.height-b),Math.max(0,d-E),Math.max(0,h-b),Y.BOTTOM_RIGHT):new k(s.left+s.width-E,s.top+s.height-b),this.bottomLeftPaddingBox=m>0||B>0?ie(s.left+C,s.top+Math.min(v,s.height-b),Math.max(0,m-C),Math.max(0,B-b),Y.BOTTOM_LEFT):new k(s.left+C,s.top+s.height-b),this.topLeftContentBox=a>0||i>0?ie(s.left+C+_,s.top+y+U,Math.max(0,a-(C+_)),Math.max(0,i-(y+U)),Y.TOP_LEFT):new k(s.left+C+_,s.top+y+U),this.topRightContentBox=l>0||c>0?ie(s.left+Math.min(w,s.width+C+_),s.top+y+U,w>s.width+C+_?0:l-C+_,c-(y+U),Y.TOP_RIGHT):new k(s.left+s.width-(E+j),s.top+y+U),this.bottomRightContentBox=d>0||h>0?ie(s.left+Math.min(Q,s.width-(C+_)),s.top+Math.min(N,s.height+y+U),Math.max(0,d-(E+j)),h-(b+O),Y.BOTTOM_RIGHT):new k(s.left+s.width-(E+j),s.top+s.height-(b+O)),this.bottomLeftContentBox=m>0||B>0?ie(s.left+C+_,s.top+v,Math.max(0,m-(C+_)),B-(b+O),Y.BOTTOM_LEFT):new k(s.left+C+_,s.top+s.height-(b+O))}return A}(),Y;(function(A){A[A.TOP_LEFT=0]="TOP_LEFT",A[A.TOP_RIGHT=1]="TOP_RIGHT",A[A.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",A[A.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Y||(Y={}));var ie=function(A,e,t,s,n){var a=4*((Math.sqrt(2)-1)/3),i=t*a,o=s*a,l=A+t,c=e+s;switch(n){case Y.TOP_LEFT:return new Ls(new k(A,c),new k(A,c-o),new k(l-i,e),new k(l,e));case Y.TOP_RIGHT:return new Ls(new k(A,e),new k(A+i,e),new k(l,c-o),new k(l,c));case Y.BOTTOM_RIGHT:return new Ls(new k(l,e),new k(l,e+o),new k(A+i,c),new k(A,c));case Y.BOTTOM_LEFT:default:return new Ls(new k(l,c),new k(l-i,c),new k(A,e+o),new k(A,e))}},ir=function(A){return[A.topLeftBorderBox,A.topRightBorderBox,A.bottomRightBorderBox,A.bottomLeftBorderBox]},YB=function(A){return[A.topLeftContentBox,A.topRightContentBox,A.bottomRightContentBox,A.bottomLeftContentBox]},or=function(A){return[A.topLeftPaddingBox,A.topRightPaddingBox,A.bottomRightPaddingBox,A.bottomLeftPaddingBox]},ZB=function(){function A(e,t,s){this.offsetX=e,this.offsetY=t,this.matrix=s,this.type=0,this.target=6}return A}(),Ps=function(){function A(e,t){this.path=e,this.target=t,this.type=1}return A}(),ew=function(){function A(e){this.opacity=e,this.type=2,this.target=6}return A}(),Aw=function(A){return A.type===0},Qc=function(A){return A.type===1},tw=function(A){return A.type===2},fo=function(A,e){return A.length===e.length?A.some(function(t,s){return t===e[s]}):!1},sw=function(A,e,t,s,n){return A.map(function(a,i){switch(i){case 0:return a.add(e,t);case 1:return a.add(e+s,t);case 2:return a.add(e+s,t+n);case 3:return a.add(e,t+n)}return a})},Uc=function(){function A(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return A}(),Fc=function(){function A(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new zB(this.container),this.container.styles.opacity<1&&this.effects.push(new ew(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new ZB(s,n,a))}if(this.container.styles.overflowX!==0){var i=ir(this.curves),o=or(this.curves);fo(i,o)?this.effects.push(new Ps(i,6)):(this.effects.push(new Ps(i,2)),this.effects.push(new Ps(o,4)))}}return A.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,n=this.effects.slice(0);s;){var a=s.effects.filter(function(l){return!Qc(l)});if(t||s.container.styles.position!==0||!s.parent){if(n.unshift.apply(n,a),t=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var i=ir(s.curves),o=or(s.curves);fo(i,o)||n.unshift(new Ps(o,6))}}else n.unshift.apply(n,a);s=s.parent}return n.filter(function(l){return he(l.target,e)})},A}(),ea=function(A,e,t,s){A.container.elements.forEach(function(n){var a=he(n.flags,4),i=he(n.flags,2),o=new Fc(n,A);he(n.styles.display,2048)&&s.push(o);var l=he(n.flags,8)?[]:s;if(a||i){var c=a||n.styles.isPositioned()?t:e,u=new Uc(o);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var d=n.styles.zIndex.order;if(d<0){var h=0;c.negativeZIndex.some(function(m,B){return d>m.element.container.styles.zIndex.order?(h=B,!1):h>0}),c.negativeZIndex.splice(h,0,u)}else if(d>0){var f=0;c.positiveZIndex.some(function(m,B){return d>=m.element.container.styles.zIndex.order?(f=B+1,!1):f>0}),c.positiveZIndex.splice(f,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else n.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);ea(o,u,a?u:t,l)}else n.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),ea(o,e,t,l);he(n.flags,8)&&Ec(n,l)})},Ec=function(A,e){for(var t=A instanceof Xn?A.start:1,s=A instanceof Xn?A.reversed:!1,n=0;n<e.length;n++){var a=e[n];a.container instanceof uc&&typeof a.container.value=="number"&&a.container.value!==0&&(t=a.container.value),a.listValue=es(t,a.container.styles.listStyleType,!0),t+=s?-1:1}},rw=function(A){var e=new Fc(A,null),t=new Uc(e),s=[];return ea(e,t,t,s),Ec(e.container,s),t},mo=function(A,e){switch(e){case 0:return De(A.topLeftBorderBox,A.topLeftPaddingBox,A.topRightBorderBox,A.topRightPaddingBox);case 1:return De(A.topRightBorderBox,A.topRightPaddingBox,A.bottomRightBorderBox,A.bottomRightPaddingBox);case 2:return De(A.bottomRightBorderBox,A.bottomRightPaddingBox,A.bottomLeftBorderBox,A.bottomLeftPaddingBox);case 3:default:return De(A.bottomLeftBorderBox,A.bottomLeftPaddingBox,A.topLeftBorderBox,A.topLeftPaddingBox)}},nw=function(A,e){switch(e){case 0:return De(A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox,A.topRightBorderBox,A.topRightBorderDoubleOuterBox);case 1:return De(A.topRightBorderBox,A.topRightBorderDoubleOuterBox,A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox);case 2:return De(A.bottomRightBorderBox,A.bottomRightBorderDoubleOuterBox,A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox);case 3:default:return De(A.bottomLeftBorderBox,A.bottomLeftBorderDoubleOuterBox,A.topLeftBorderBox,A.topLeftBorderDoubleOuterBox)}},aw=function(A,e){switch(e){case 0:return De(A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox,A.topRightBorderDoubleInnerBox,A.topRightPaddingBox);case 1:return De(A.topRightBorderDoubleInnerBox,A.topRightPaddingBox,A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox);case 2:return De(A.bottomRightBorderDoubleInnerBox,A.bottomRightPaddingBox,A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox);case 3:default:return De(A.bottomLeftBorderDoubleInnerBox,A.bottomLeftPaddingBox,A.topLeftBorderDoubleInnerBox,A.topLeftPaddingBox)}},iw=function(A,e){switch(e){case 0:return Os(A.topLeftBorderStroke,A.topRightBorderStroke);case 1:return Os(A.topRightBorderStroke,A.bottomRightBorderStroke);case 2:return Os(A.bottomRightBorderStroke,A.bottomLeftBorderStroke);case 3:default:return Os(A.bottomLeftBorderStroke,A.topLeftBorderStroke)}},Os=function(A,e){var t=[];return Pe(A)?t.push(A.subdivide(.5,!1)):t.push(A),Pe(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},De=function(A,e,t,s){var n=[];return Pe(A)?n.push(A.subdivide(.5,!1)):n.push(A),Pe(t)?n.push(t.subdivide(.5,!0)):n.push(t),Pe(s)?n.push(s.subdivide(.5,!0).reverse()):n.push(s),Pe(e)?n.push(e.subdivide(.5,!1).reverse()):n.push(e),n},Nc=function(A){var e=A.bounds,t=A.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},lr=function(A){var e=A.styles,t=A.bounds,s=ne(e.paddingLeft,t.width),n=ne(e.paddingRight,t.width),a=ne(e.paddingTop,t.width),i=ne(e.paddingBottom,t.width);return t.add(s+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+s+n),-(e.borderTopWidth+e.borderBottomWidth+a+i))},ow=function(A,e){return A===0?e.bounds:A===2?lr(e):Nc(e)},lw=function(A,e){return A===0?e.bounds:A===2?lr(e):Nc(e)},gn=function(A,e,t){var s=ow(tt(A.styles.backgroundOrigin,e),A),n=lw(tt(A.styles.backgroundClip,e),A),a=cw(tt(A.styles.backgroundSize,e),t,s),i=a[0],o=a[1],l=Ht(tt(A.styles.backgroundPosition,e),s.width-i,s.height-o),c=uw(tt(A.styles.backgroundRepeat,e),l,a,s,n),u=Math.round(s.left+l[0]),d=Math.round(s.top+l[1]);return[c,u,d,i,o]},ZA=function(A){return Ae(A)&&A.value===at.AUTO},Ds=function(A){return typeof A=="number"},cw=function(A,e,t){var s=e[0],n=e[1],a=e[2],i=A[0],o=A[1];if(!i)return[0,0];if(ce(i)&&o&&ce(o))return[ne(i,t.width),ne(o,t.height)];var l=Ds(a);if(Ae(i)&&(i.value===at.CONTAIN||i.value===at.COVER)){if(Ds(a)){var c=t.width/t.height;return c<a!=(i.value===at.COVER)?[t.width,t.width/a]:[t.height*a,t.height]}return[t.width,t.height]}var u=Ds(s),d=Ds(n),h=u||d;if(ZA(i)&&(!o||ZA(o))){if(u&&d)return[s,n];if(!l&&!h)return[t.width,t.height];if(h&&l){var f=u?s:n*a,m=d?n:s/a;return[f,m]}var B=u?s:t.width,g=d?n:t.height;return[B,g]}if(l){var p=0,w=0;return ce(i)?p=ne(i,t.width):ce(o)&&(w=ne(o,t.height)),ZA(i)?p=w*a:(!o||ZA(o))&&(w=p/a),[p,w]}var N=null,Q=null;if(ce(i)?N=ne(i,t.width):o&&ce(o)&&(Q=ne(o,t.height)),N!==null&&(!o||ZA(o))&&(Q=u&&d?N/s*n:t.height),Q!==null&&ZA(i)&&(N=u&&d?Q/n*s:t.width),N!==null&&Q!==null)return[N,Q];throw new Error("Unable to calculate background-size for element")},tt=function(A,e){var t=A[e];return typeof t>"u"?A[0]:t},uw=function(A,e,t,s,n){var a=e[0],i=e[1],o=t[0],l=t[1];switch(A){case 2:return[new k(Math.round(s.left),Math.round(s.top+i)),new k(Math.round(s.left+s.width),Math.round(s.top+i)),new k(Math.round(s.left+s.width),Math.round(l+s.top+i)),new k(Math.round(s.left),Math.round(l+s.top+i))];case 3:return[new k(Math.round(s.left+a),Math.round(s.top)),new k(Math.round(s.left+a+o),Math.round(s.top)),new k(Math.round(s.left+a+o),Math.round(s.height+s.top)),new k(Math.round(s.left+a),Math.round(s.height+s.top))];case 1:return[new k(Math.round(s.left+a),Math.round(s.top+i)),new k(Math.round(s.left+a+o),Math.round(s.top+i)),new k(Math.round(s.left+a+o),Math.round(s.top+i+l)),new k(Math.round(s.left+a),Math.round(s.top+i+l))];default:return[new k(Math.round(n.left),Math.round(n.top)),new k(Math.round(n.left+n.width),Math.round(n.top)),new k(Math.round(n.left+n.width),Math.round(n.height+n.top)),new k(Math.round(n.left),Math.round(n.height+n.top))]}},dw="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",go="Hidden Text",hw=function(){function A(e){this._data={},this._document=e}return A.prototype.parseMetrics=function(e,t){var s=this._document.createElement("div"),n=this._document.createElement("img"),a=this._document.createElement("span"),i=this._document.body;s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",i.appendChild(s),n.src=dw,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=t,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(go)),s.appendChild(a),s.appendChild(n);var o=n.offsetTop-a.offsetTop+2;s.removeChild(a),s.appendChild(this._document.createTextNode(go)),s.style.lineHeight="normal",n.style.verticalAlign="super";var l=n.offsetTop-s.offsetTop+2;return i.removeChild(s),{baseline:o,middle:l}},A.prototype.getMetrics=function(e,t){var s=e+" "+t;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(e,t)),this._data[s]},A}(),jc=function(){function A(e,t){this.context=e,this.options=t}return A}(),fw=1e4,mw=function(A){Ge(e,A);function e(t,s){var n=A.call(this,t,s)||this;return n._activeEffects=[],n.canvas=s.canvas?s.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),s.canvas||(n.canvas.width=Math.floor(s.width*s.scale),n.canvas.height=Math.floor(s.height*s.scale),n.canvas.style.width=s.width+"px",n.canvas.style.height=s.height+"px"),n.fontMetrics=new hw(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-s.x,-s.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),n}return e.prototype.applyEffects=function(t){for(var s=this;this._activeEffects.length;)this.popEffect();t.forEach(function(n){return s.applyEffect(n)})},e.prototype.applyEffect=function(t){this.ctx.save(),tw(t)&&(this.ctx.globalAlpha=t.opacity),Aw(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),Qc(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return ve(this,void 0,void 0,function(){var s;return we(this,function(n){switch(n.label){case 0:return s=t.element.container.styles,s.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return ve(this,void 0,void 0,function(){return we(this,function(s){switch(s.label){case 0:if(he(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(t)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,s,n){var a=this;if(s===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+n);else{var i=ja(t.text);i.reduce(function(o,l){return a.ctx.fillText(l,o,t.bounds.top+n),o+a.ctx.measureText(l).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var s=t.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),n=xw(t.fontFamily).join(", "),a=as(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,s,t.fontWeight,a,n].join(" "),n,a]},e.prototype.renderTextNode=function(t,s){return ve(this,void 0,void 0,function(){var n,a,i,o,l,c,u,d,h=this;return we(this,function(f){return n=this.createFontStyle(s),a=n[0],i=n[1],o=n[2],this.ctx.font=a,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),c=l.baseline,u=l.middle,d=s.paintOrder,t.textBounds.forEach(function(m){d.forEach(function(B){switch(B){case 0:h.ctx.fillStyle=me(s.color),h.renderTextWithLetterSpacing(m,s.letterSpacing,c);var g=s.textShadow;g.length&&m.text.trim().length&&(g.slice(0).reverse().forEach(function(p){h.ctx.shadowColor=me(p.color),h.ctx.shadowOffsetX=p.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=p.offsetY.number*h.options.scale,h.ctx.shadowBlur=p.blur.number,h.renderTextWithLetterSpacing(m,s.letterSpacing,c)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),s.textDecorationLine.length&&(h.ctx.fillStyle=me(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(p){switch(p){case 1:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+c),m.bounds.width,1);break;case 2:h.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:h.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+u),m.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&m.text.trim().length&&(h.ctx.strokeStyle=me(s.webkitTextStrokeColor),h.ctx.lineWidth=s.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+c)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,s,n){if(n&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var a=lr(t),i=or(s);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,t.intrinsicWidth,t.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return ve(this,void 0,void 0,function(){var s,n,a,i,o,l,w,w,c,u,d,h,Q,f,m,v,B,g,p,w,N,Q,v;return we(this,function(y){switch(y.label){case 0:this.applyEffects(t.getEffects(4)),s=t.container,n=t.curves,a=s.styles,i=0,o=s.textNodes,y.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,a)]):[3,4];case 2:y.sent(),y.label=3;case 3:return i++,[3,1];case 4:if(!(s instanceof oc))return[3,8];y.label=5;case 5:return y.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return w=y.sent(),this.renderReplacedElement(s,n,w),[3,8];case 7:return y.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof lc&&this.renderReplacedElement(s,n,s.canvas),!(s instanceof cc))return[3,12];y.label=9;case 9:return y.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return w=y.sent(),this.renderReplacedElement(s,n,w),[3,12];case 11:return y.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof fc&&s.tree?(c=new e(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,c.render(s.tree)]):[3,14];case 13:u=y.sent(),s.width&&s.height&&this.ctx.drawImage(u,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),y.label=14;case 14:if(s instanceof Ia&&(d=Math.min(s.bounds.width,s.bounds.height),s.type===sr?s.checked&&(this.ctx.save(),this.path([new k(s.bounds.left+d*.39363,s.bounds.top+d*.79),new k(s.bounds.left+d*.16,s.bounds.top+d*.5549),new k(s.bounds.left+d*.27347,s.bounds.top+d*.44071),new k(s.bounds.left+d*.39694,s.bounds.top+d*.5649),new k(s.bounds.left+d*.72983,s.bounds.top+d*.23),new k(s.bounds.left+d*.84,s.bounds.top+d*.34085),new k(s.bounds.left+d*.39363,s.bounds.top+d*.79)]),this.ctx.fillStyle=me(to),this.ctx.fill(),this.ctx.restore()):s.type===rr&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+d/2,s.bounds.top+d/2,d/4,0,Math.PI*2,!0),this.ctx.fillStyle=me(to),this.ctx.fill(),this.ctx.restore())),gw(s)&&s.value.length){switch(h=this.createFontStyle(a),Q=h[0],f=h[1],m=this.fontMetrics.getMetrics(Q,f).baseline,this.ctx.font=Q,this.ctx.fillStyle=me(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Bw(s.styles.textAlign),v=lr(s),B=0,s.styles.textAlign){case 1:B+=v.width/2;break;case 2:B+=v.width;break}g=v.add(B,0,0,-v.height/2+1),this.ctx.save(),this.path([new k(v.left,v.top),new k(v.left+v.width,v.top),new k(v.left+v.width,v.top+v.height),new k(v.left,v.top+v.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Vt(s.value,g),a.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!he(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(p=s.styles.listStyleImage,p.type!==0)return[3,18];w=void 0,N=p.url,y.label=15;case 15:return y.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return w=y.sent(),this.ctx.drawImage(w,s.bounds.left-(w.width+10),s.bounds.top),[3,18];case 17:return y.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:t.listValue&&s.styles.listStyleType!==-1&&(Q=this.createFontStyle(a)[0],this.ctx.font=Q,this.ctx.fillStyle=me(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",v=new tA(s.bounds.left,s.bounds.top+ne(s.styles.paddingTop,s.bounds.width),s.bounds.width,Oi(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Vt(t.listValue,v),a.letterSpacing,Oi(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),y.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return ve(this,void 0,void 0,function(){var s,n,p,a,i,p,o,l,p,c,u,p,d,h,p,f,m,p,B,g,p;return we(this,function(w){switch(w.label){case 0:if(he(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:w.sent(),s=0,n=t.negativeZIndex,w.label=2;case 2:return s<n.length?(p=n[s],[4,this.renderStack(p)]):[3,5];case 3:w.sent(),w.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:w.sent(),a=0,i=t.nonInlineLevel,w.label=7;case 7:return a<i.length?(p=i[a],[4,this.renderNode(p)]):[3,10];case 8:w.sent(),w.label=9;case 9:return a++,[3,7];case 10:o=0,l=t.nonPositionedFloats,w.label=11;case 11:return o<l.length?(p=l[o],[4,this.renderStack(p)]):[3,14];case 12:w.sent(),w.label=13;case 13:return o++,[3,11];case 14:c=0,u=t.nonPositionedInlineLevel,w.label=15;case 15:return c<u.length?(p=u[c],[4,this.renderStack(p)]):[3,18];case 16:w.sent(),w.label=17;case 17:return c++,[3,15];case 18:d=0,h=t.inlineLevel,w.label=19;case 19:return d<h.length?(p=h[d],[4,this.renderNode(p)]):[3,22];case 20:w.sent(),w.label=21;case 21:return d++,[3,19];case 22:f=0,m=t.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return f<m.length?(p=m[f],[4,this.renderStack(p)]):[3,26];case 24:w.sent(),w.label=25;case 25:return f++,[3,23];case 26:B=0,g=t.positiveZIndex,w.label=27;case 27:return B<g.length?(p=g[B],[4,this.renderStack(p)]):[3,30];case 28:w.sent(),w.label=29;case 29:return B++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var s=this;t.forEach(function(n,a){var i=Pe(n)?n.start:n;a===0?s.ctx.moveTo(i.x,i.y):s.ctx.lineTo(i.x,i.y),Pe(n)&&s.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},e.prototype.renderRepeat=function(t,s,n,a){this.path(t),this.ctx.fillStyle=s,this.ctx.translate(n,a),this.ctx.fill(),this.ctx.translate(-n,-a)},e.prototype.resizeImage=function(t,s,n){var a;if(t.width===s&&t.height===n)return t;var i=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=i.createElement("canvas");o.width=Math.max(1,s),o.height=Math.max(1,n);var l=o.getContext("2d");return l.drawImage(t,0,0,t.width,t.height,0,0,s,n),o},e.prototype.renderBackgroundImage=function(t){return ve(this,void 0,void 0,function(){var s,n,a,i,o,l;return we(this,function(c){switch(c.label){case 0:s=t.styles.backgroundImage.length-1,n=function(u){var d,h,f,U,D,M,_,R,b,m,U,D,M,_,R,B,g,p,w,N,Q,v,y,E,b,C,U,j,O,_,R,I,D,M,te,ue,P,z,Z,ee,se,de;return we(this,function(je){switch(je.label){case 0:if(u.type!==0)return[3,5];d=void 0,h=u.url,je.label=1;case 1:return je.trys.push([1,3,,4]),[4,a.context.cache.match(h)];case 2:return d=je.sent(),[3,4];case 3:return je.sent(),a.context.logger.error("Error loading background-image "+h),[3,4];case 4:return d&&(f=gn(t,s,[d.width,d.height,d.width/d.height]),U=f[0],D=f[1],M=f[2],_=f[3],R=f[4],b=a.ctx.createPattern(a.resizeImage(d,_,R),"repeat"),a.renderRepeat(U,b,D,M)),[3,6];case 5:Ap(u)?(m=gn(t,s,[null,null,null]),U=m[0],D=m[1],M=m[2],_=m[3],R=m[4],B=qg(u.angle,_,R),g=B[0],p=B[1],w=B[2],N=B[3],Q=B[4],v=document.createElement("canvas"),v.width=_,v.height=R,y=v.getContext("2d"),E=y.createLinearGradient(p,N,w,Q),Li(u.stops,g).forEach(function(_e){return E.addColorStop(_e.stop,me(_e.color))}),y.fillStyle=E,y.fillRect(0,0,_,R),_>0&&R>0&&(b=a.ctx.createPattern(v,"repeat"),a.renderRepeat(U,b,D,M))):tp(u)&&(C=gn(t,s,[null,null,null]),U=C[0],j=C[1],O=C[2],_=C[3],R=C[4],I=u.position.length===0?[Fa]:u.position,D=ne(I[0],_),M=ne(I[I.length-1],R),te=zg(u,D,M,_,R),ue=te[0],P=te[1],ue>0&&P>0&&(z=a.ctx.createRadialGradient(j+D,O+M,0,j+D,O+M,ue),Li(u.stops,ue*2).forEach(function(_e){return z.addColorStop(_e.stop,me(_e.color))}),a.path(U),a.ctx.fillStyle=z,ue!==P?(Z=t.bounds.left+.5*t.bounds.width,ee=t.bounds.top+.5*t.bounds.height,se=P/ue,de=1/se,a.ctx.save(),a.ctx.translate(Z,ee),a.ctx.transform(1,0,0,se,0,0),a.ctx.translate(-Z,-ee),a.ctx.fillRect(j,de*(O-ee)+ee,_,R*de),a.ctx.restore()):a.ctx.fill())),je.label=6;case 6:return s--,[2]}})},a=this,i=0,o=t.styles.backgroundImage.slice(0).reverse(),c.label=1;case 1:return i<o.length?(l=o[i],[5,n(l)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,s,n){return ve(this,void 0,void 0,function(){return we(this,function(a){return this.path(mo(n,s)),this.ctx.fillStyle=me(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,s,n,a){return ve(this,void 0,void 0,function(){var i,o;return we(this,function(l){switch(l.label){case 0:return s<3?[4,this.renderSolidBorder(t,n,a)]:[3,2];case 1:return l.sent(),[2];case 2:return i=nw(a,n),this.path(i),this.ctx.fillStyle=me(t),this.ctx.fill(),o=aw(a,n),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return ve(this,void 0,void 0,function(){var s,n,a,i,o,l,c,u,d=this;return we(this,function(h){switch(h.label){case 0:return this.applyEffects(t.getEffects(2)),s=t.container.styles,n=!pA(s.backgroundColor)||s.backgroundImage.length,a=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],i=pw(tt(s.backgroundClip,0),t.curves),n||s.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),pA(s.backgroundColor)||(this.ctx.fillStyle=me(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(f){d.ctx.save();var m=ir(t.curves),B=f.inset?0:fw,g=sw(m,-B+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(d.path(m),d.ctx.clip(),d.mask(g)):(d.mask(m),d.ctx.clip(),d.path(g)),d.ctx.shadowOffsetX=f.offsetX.number+B,d.ctx.shadowOffsetY=f.offsetY.number,d.ctx.shadowColor=me(f.color),d.ctx.shadowBlur=f.blur.number,d.ctx.fillStyle=f.inset?me(f.color):"rgba(0,0,0,1)",d.ctx.fill(),d.ctx.restore()}),h.label=2;case 2:o=0,l=0,c=a,h.label=3;case 3:return l<c.length?(u=c[l],u.style!==0&&!pA(u.color)&&u.width>0?u.style!==2?[3,5]:[4,this.renderDashedDottedBorder(u.color,u.width,o,t.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return u.style!==3?[3,7]:[4,this.renderDashedDottedBorder(u.color,u.width,o,t.curves,3)];case 6:return h.sent(),[3,11];case 7:return u.style!==4?[3,9]:[4,this.renderDoubleBorder(u.color,u.width,o,t.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(u.color,o,t.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,s,n,a,i){return ve(this,void 0,void 0,function(){var o,l,c,u,d,h,f,m,B,g,p,w,N,Q,v,y,v,y;return we(this,function(E){return this.ctx.save(),o=iw(a,n),l=mo(a,n),i===2&&(this.path(l),this.ctx.clip()),Pe(l[0])?(c=l[0].start.x,u=l[0].start.y):(c=l[0].x,u=l[0].y),Pe(l[1])?(d=l[1].end.x,h=l[1].end.y):(d=l[1].x,h=l[1].y),n===0||n===2?f=Math.abs(c-d):f=Math.abs(u-h),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),m=s<3?s*3:s*2,B=s<3?s*2:s,i===3&&(m=s,B=s),g=!0,f<=m*2?g=!1:f<=m*2+B?(p=f/(2*m+B),m*=p,B*=p):(w=Math.floor((f+B)/(m+B)),N=(f-w*m)/(w-1),Q=(f-(w+1)*m)/w,B=Q<=0||Math.abs(B-N)<Math.abs(B-Q)?N:Q),g&&(i===3?this.ctx.setLineDash([0,m+B]):this.ctx.setLineDash([m,B])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=me(t),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Pe(l[0])&&(v=l[3],y=l[0],this.ctx.beginPath(),this.formatPath([new k(v.end.x,v.end.y),new k(y.start.x,y.start.y)]),this.ctx.stroke()),Pe(l[1])&&(v=l[1],y=l[2],this.ctx.beginPath(),this.formatPath([new k(v.end.x,v.end.y),new k(y.start.x,y.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return ve(this,void 0,void 0,function(){var s;return we(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=me(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=rw(t),[4,this.renderStack(s)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(jc),gw=function(A){return A instanceof hc||A instanceof dc?!0:A instanceof Ia&&A.type!==rr&&A.type!==sr},pw=function(A,e){switch(A){case 0:return ir(e);case 2:return YB(e);case 1:default:return or(e)}},Bw=function(A){switch(A){case 1:return"center";case 2:return"right";case 0:default:return"left"}},ww=["-apple-system","system-ui"],xw=function(A){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?A.filter(function(e){return ww.indexOf(e)===-1}):A},yw=function(A){Ge(e,A);function e(t,s){var n=A.call(this,t,s)||this;return n.canvas=s.canvas?s.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=s,n.canvas.width=Math.floor(s.width*s.scale),n.canvas.height=Math.floor(s.height*s.scale),n.canvas.style.width=s.width+"px",n.canvas.style.height=s.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-s.x,-s.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),n}return e.prototype.render=function(t){return ve(this,void 0,void 0,function(){var s,n;return we(this,function(a){switch(a.label){case 0:return s=Wn(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,bw(s)];case 1:return n=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=me(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(jc),bw=function(A){return new Promise(function(e,t){var s=new Image;s.onload=function(){e(s)},s.onerror=t,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(A))})},Cw=function(){function A(e){var t=e.id,s=e.enabled;this.id=t,this.enabled=s,this.start=Date.now()}return A.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Bs([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},A.prototype.getTime=function(){return Date.now()-this.start},A.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Bs([this.id,this.getTime()+"ms"],e))},A.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Bs([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},A.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Bs([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},A.instances={},A}(),vw=function(){function A(e,t){var s;this.windowBounds=t,this.instanceName="#"+A.instanceCount++,this.logger=new Cw({id:this.instanceName,enabled:e.logging}),this.cache=(s=e.cache)!==null&&s!==void 0?s:new VB(this,e)}return A.instanceCount=1,A}(),Ic=function(A,e){return e===void 0&&(e={}),Qw(A,e)};typeof window<"u"&&vc.setContext(window);var Qw=function(A,e){return ve(void 0,void 0,void 0,function(){var t,s,n,a,i,o,l,c,u,d,h,f,m,B,g,p,w,N,Q,v,E,y,E,b,C,U,j,O,_,R,I,D,M,te,ue,P,z,Z,ee,se;return we(this,function(de){switch(de.label){case 0:if(!A||typeof A!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=A.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(s=t.defaultView,!s)throw new Error("Document is not attached to a Window");return n={allowTaint:(b=e.allowTaint)!==null&&b!==void 0?b:!1,imageTimeout:(C=e.imageTimeout)!==null&&C!==void 0?C:15e3,proxy:e.proxy,useCORS:(U=e.useCORS)!==null&&U!==void 0?U:!1},a=Hn({logging:(j=e.logging)!==null&&j!==void 0?j:!0,cache:e.cache},n),i={windowWidth:(O=e.windowWidth)!==null&&O!==void 0?O:s.innerWidth,windowHeight:(_=e.windowHeight)!==null&&_!==void 0?_:s.innerHeight,scrollX:(R=e.scrollX)!==null&&R!==void 0?R:s.pageXOffset,scrollY:(I=e.scrollY)!==null&&I!==void 0?I:s.pageYOffset},o=new tA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new vw(a,o),c=(D=e.foreignObjectRendering)!==null&&D!==void 0?D:!1,u={allowTaint:(M=e.allowTaint)!==null&&M!==void 0?M:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),d=new uo(l,A,u),h=d.clonedReferenceElement,h?[4,d.toIFrame(t,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return f=de.sent(),m=Sa(h)||FB(h)?sm(h.ownerDocument):Cr(l,h),B=m.width,g=m.height,p=m.left,w=m.top,N=Uw(l,h,e.backgroundColor),Q={canvas:e.canvas,backgroundColor:N,scale:(ue=(te=e.scale)!==null&&te!==void 0?te:s.devicePixelRatio)!==null&&ue!==void 0?ue:1,x:((P=e.x)!==null&&P!==void 0?P:0)+p,y:((z=e.y)!==null&&z!==void 0?z:0)+w,width:(Z=e.width)!==null&&Z!==void 0?Z:Math.ceil(B),height:(ee=e.height)!==null&&ee!==void 0?ee:Math.ceil(g)},c?(l.logger.debug("Document cloned, using foreign object rendering"),E=new yw(l,Q),[4,E.render(h)]):[3,3];case 2:return v=de.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+p+","+w+" with size "+B+"x"+g+" using computed rendering"),l.logger.debug("Starting DOM parsing"),y=gc(l,h),N===y.styles.backgroundColor&&(y.styles.backgroundColor=AA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+Q.x+","+Q.y+" with size "+Q.width+"x"+Q.height),E=new mw(l,Q),[4,E.render(y)];case 4:v=de.sent(),de.label=5;case 5:return(!((se=e.removeContainer)!==null&&se!==void 0)||se)&&(uo.destroy(f)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,v]}})})},Uw=function(A,e,t){var s=e.ownerDocument,n=s.documentElement?Kt(A,getComputedStyle(s.documentElement).backgroundColor):AA.TRANSPARENT,a=s.body?Kt(A,getComputedStyle(s.body).backgroundColor):AA.TRANSPARENT,i=typeof t=="string"?Kt(A,t):t===null?AA.TRANSPARENT:4294967295;return e===s.documentElement?pA(n)?pA(a)?i:a:n:i};const cb=Object.freeze(Object.defineProperty({__proto__:null,default:Ic},Symbol.toStringTag,{value:"Module"}));function Fw({projection:A}){const e=x.useRef(null),t=x.useRef(null),s=A.projectionAnnuelle[0].coutAbonnement>0,n=A.prixFinal,a=A.projectionAnnuelle[0].coutMyLight>0,i=A.projectionAnnuelle.slice(0,20),o=i.reduce((p,w)=>p+w.economiesAutoconsommation,0),l=i.reduce((p,w)=>p+w.revenusRevente,0),c=i.reduce((p,w)=>p+w.coutAbonnement,0),u=i.reduce((p,w)=>p+w.coutMyLight,0),d=i.reduce((p,w)=>p+w.gainTotal,0),h=A.projectionAnnuelle.reduce((p,w)=>p+w.economiesAutoconsommation,0),f=A.projectionAnnuelle.reduce((p,w)=>p+w.revenusRevente,0),m=A.projectionAnnuelle.reduce((p,w)=>p+w.coutAbonnement,0),B=A.projectionAnnuelle.reduce((p,w)=>p+w.coutMyLight,0),g=A.projectionAnnuelle.reduce((p,w)=>p+w.gainTotal,0);return x.useEffect(()=>{const p=async()=>{if(t.current)try{const Q=(await Ic(t.current,{backgroundColor:"white",useCORS:!0,scrollY:-window.scrollY,scale:2,logging:!1,allowTaint:!0,foreignObjectRendering:!1})).toDataURL("image/png");localStorage.setItem("projection20ans_png",Q),console.log("Projection table captured automatically for PDF")}catch(N){console.error("Error capturing projection table:",N)}},w=setTimeout(()=>{p()},1e3);return()=>clearTimeout(w)},[A]),r.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:r.jsxs("div",{ref:e,id:"projection-30-ans",className:"bg-white",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Projection financière sur 30 ans"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Année"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Production (kWh)"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Autoconsommation"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Surplus"}),s&&r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abonnement"}),a&&r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MyLight"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gain total"}),!s&&r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rendement"})]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[r.jsx("div",{ref:t,style:{position:"absolute",left:"-9999px",width:"100%"},children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Année"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Production (kWh)"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Autoconsommation"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Surplus"}),s&&r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abonnement"}),a&&r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"MyLight"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gain total"}),!s&&r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rendement"})]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[A.projectionAnnuelle.slice(0,20).map(p=>{const w=s?0:(p.economiesAutoconsommation+p.revenusRevente)/n*100;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.annee}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:Math.round(p.production).toString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600",children:H(p.economiesAutoconsommation)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-blue-600",children:H(p.revenusRevente)}),s&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-red-600",children:p.coutAbonnement>0?H(-p.coutAbonnement):"-"}),a&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-purple-600",children:p.coutMyLight>0?H(-p.coutMyLight):"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:H(p.gainTotal)}),!s&&r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-emerald-600",children:[w.toFixed(1),"%"]})]},p.annee)}),r.jsxs("tr",{className:"bg-gray-100 font-medium",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Total sur 20 ans"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-green-600",children:H(o)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-blue-600",children:H(l)}),s&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-red-600",children:H(-c)}),a&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-purple-600",children:H(-u)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:H(d)}),!s&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-emerald-600",children:"-"})]})]})]})}),A.projectionAnnuelle.slice(0,20).map(p=>{const w=s?0:(p.economiesAutoconsommation+p.revenusRevente)/n*100;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.annee}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:Math.round(p.production).toString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600",children:H(p.economiesAutoconsommation)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-blue-600",children:H(p.revenusRevente)}),s&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-red-600",children:p.coutAbonnement>0?H(-p.coutAbonnement):"-"}),a&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-purple-600",children:p.coutMyLight>0?H(-p.coutMyLight):"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:H(p.gainTotal)}),!s&&r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-emerald-600",children:[w.toFixed(1),"%"]})]},p.annee)}),r.jsxs("tr",{className:"bg-gray-100 font-medium",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Total sur 20 ans"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-green-600",children:H(o)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-blue-600",children:H(l)}),s&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-red-600",children:H(-c)}),a&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-purple-600",children:H(-u)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:H(d)}),!s&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-emerald-600",children:"-"})]}),A.projectionAnnuelle.slice(20).map(p=>{const w=s?0:(p.economiesAutoconsommation+p.revenusRevente)/n*100;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.annee}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:Math.round(p.production).toString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600",children:H(p.economiesAutoconsommation)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-blue-600",children:H(p.revenusRevente)}),s&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-red-600",children:p.coutAbonnement>0?H(-p.coutAbonnement):"-"}),a&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-purple-600",children:p.coutMyLight>0?H(-p.coutMyLight):"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:H(p.gainTotal)}),!s&&r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-emerald-600",children:[w.toFixed(1),"%"]})]},p.annee)}),r.jsxs("tr",{className:"bg-blue-50 font-medium",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"Total sur 30 ans"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-green-600",children:H(h)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-blue-600",children:H(f)}),s&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-red-600",children:H(-m)}),a&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-purple-600",children:H(-B)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-gray-900",children:H(g)}),!s&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right font-medium text-emerald-600",children:"-"})]})]})]})})]})})}const Ew={"Provence-Alpes-Côte d'Azur":1.2,Occitanie:1.15,"Nouvelle-Aquitaine":1.1,"Auvergne-Rhône-Alpes":1.05,Corse:1.2,"Bourgogne-Franche-Comté":.95,"Centre-Val de Loire":.95,"Grand Est":.9,"Hauts-de-France":.85,"Île-de-France":1.1,Normandie:.9,"Pays de la Loire":1,Bretagne:.95};function Nw({installedPower:A}){const[e,t]=x.useState(!1),{address:s}=sA(),n=Math.max(0,A||0),a=s.region&&Ew[s.region]||1,i=n*a,o=Math.min(Math.max(0,i),10);return console.log("Property Value Calculation:",{installedPower:A,baseIncrease:n,region:s.region,regionalCoefficient:a,adjustedIncrease:i,estimatedIncrease:o}),r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(ef,{className:"h-6 w-6 text-purple-500"}),r.jsx("h4",{className:"font-medium text-gray-900",children:"Plus-value immobilière"})]}),r.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["+",o.toFixed(1),"%"]}),r.jsxs("div",{className:"relative",children:[r.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Valeur verte selon l'ADEME",s.region&&a!==1&&r.jsxs("span",{className:"text-purple-600",children:[" ","• Région ",s.region]})]}),r.jsxs("div",{className:"absolute right-0 top-0 cursor-help",onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),children:[r.jsx(Wt,{className:"h-4 w-4 text-gray-400"}),e&&r.jsxs("div",{className:"absolute z-10 w-72 p-3 bg-gray-900 text-white text-sm rounded-lg -right-2 top-6 shadow-xl",children:[r.jsx("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-gray-900 rotate-45"}),r.jsx("p",{className:"mb-2",children:"Estimation basée sur des études nationales (ADEME, notaires) :"}),r.jsxs("ul",{className:"space-y-1 text-gray-300 text-xs",children:[r.jsx("li",{children:"• 1% de plus-value par kWc installé"}),r.jsxs("li",{children:["• Coefficient régional : ",a.toFixed(2)]}),r.jsx("li",{children:"• Varie selon l'attractivité du marché local"}),r.jsx("li",{children:"• Dépend des caractéristiques du bien"}),r.jsx("li",{children:"• Estimation non contractuelle"})]})]})]})]}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Label HPE (Haute Performance Énergétique)"})]})}function jw(A){const e=Math.round(A/.2),t=Math.round(A/25),s=(A/1e3).toFixed(1);return`${e.toString()} km en voiture
          ou ${t} arbres plantés
          ou ${s} vols Paris-New York`}function Iw({projection:A}){const e=A.projectionAnnuelle.slice(0,20),t=e.reduce((c,u)=>c+u.economiesAutoconsommation,0)/20,s=e.reduce((c,u)=>c+u.revenusRevente,0)/20,n=t+s,a=A.projectionAnnuelle[0].coutAbonnement>0,i=a?null:n/A.prixFinal*100,o=Math.round(A.projectionAnnuelle[0].production*.06),l=A.prixInstallation?Math.round(A.prixInstallation/2500):0;return console.log("ProjectionSummary - puissanceCrete:",{prixInstallation:A.prixInstallation,calculatedPower:l}),r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-lg shadow-lg p-6",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Synthèse financière"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(xl,{className:"h-6 w-6 text-green-500"}),r.jsx("h4",{className:"font-medium text-gray-900",children:"Revenus moyens annuels (sur 20 ans)"})]}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:H(n)}),r.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[r.jsxs("p",{children:["• Économies : ",H(t)]}),r.jsxs("p",{children:["• Revente : ",H(s)]}),!a&&i&&r.jsxs("p",{className:"mt-2 text-emerald-600 font-medium",children:["Rendement moyen : ",i.toFixed(1),"%"]})]})]}),r.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(va,{className:"h-6 w-6 text-blue-500"}),r.jsx("h4",{className:"font-medium text-gray-900",children:"Gains totaux sur 30 ans"})]}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:H(A.totalGains)}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Cumul des économies et de la revente"})]}),r.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(Bl,{className:"h-6 w-6 text-emerald-500"}),r.jsx("h4",{className:"font-medium text-gray-900",children:"Impact environnemental"})]}),r.jsxs("p",{className:"text-2xl font-bold text-emerald-600",children:[o.toString()," kg"]}),r.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["CO₂ économisé par an, équivalent à :",jw(o)]})]}),r.jsx(Nw,{installedPower:A.projectionAnnuelle[0].production/1100})]})]})}function Sw({financingMode:A,inverterType:e,onInverterChange:t,bifacial:s,onBifacialChange:n,installedPower:a,mountingSystem:i,onMountingSystemChange:o}){const l=e==="enphase"?pa(a):0,c=Math.ceil(a*2),[u,d]=x.useState(!1);return r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg shadow-sm border border-blue-100 p-4",children:[r.jsxs("button",{onClick:()=>d(!u),className:"w-full flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Pt,{className:"h-6 w-6 text-blue-600"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Technologies installées"})]}),u?r.jsx(UA,{className:"h-5 w-5 text-gray-500"}):r.jsx(lA,{className:"h-5 w-5 text-gray-500"})]}),u&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-4 pt-4 border-t border-blue-100",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type d'onduleur"}),r.jsx(Dt,{content:"L'onduleur convertit le courant continu des panneaux en courant alternatif compatible avec votre installation électrique. Les micro-onduleurs optimisent la production de chaque panneau individuellement."})]}),r.jsxs("select",{value:e,onChange:h=>t(h.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[r.jsx("option",{value:"central",children:"Onduleur centralisé"}),r.jsx("option",{value:"solenso",children:"Micro-onduleur Solenso (1 pour 2 panneaux) - option offerte"}),r.jsxs("option",{value:"enphase",disabled:A==="subscription",children:["Micro-onduleur Enphase (1 par panneau) ",e==="enphase"&&`+ ${H(l)}`]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Type de panneau"}),r.jsx(Dt,{content:"Les panneaux bifaciaux captent la lumière des deux côtés, augmentant la production jusqu'à 10% selon les conditions d'installation."})]}),r.jsxs("select",{value:s?"bifacial":"monofacial",onChange:h=>n(h.target.value==="bifacial"),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[r.jsx("option",{value:"monofacial",children:"Module standard"}),r.jsx("option",{value:"bifacial",children:"Module bifacial haute performance - option offerte"})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Système de fixation"}),r.jsx(Dt,{content:"Le système de fixation détermine comment les panneaux sont installés sur votre toit. La surimposition est la méthode standard, les bacs lestés sont utilisés pour les toits plats, et l'intégration remplace une partie de la toiture."})]}),r.jsxs("select",{value:i,onChange:h=>o(h.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",disabled:A==="subscription",children:[r.jsx("option",{value:"surimposition",children:"Surimposition (ISB)"}),r.jsxs("option",{value:"bac-lestes",disabled:A==="subscription",children:["Bac léstés ",i==="bac-lestes"&&`+ ${H(60*c)}`]}),r.jsxs("option",{value:"integration",disabled:A==="subscription",children:["Intégration (IAB) ",i==="integration"&&`+ ${H(100*c)}`]})]}),A==="subscription"&&i!=="surimposition"&&r.jsx("p",{className:"mt-1 text-sm text-amber-600",children:"Les options bac léstés et intégration ne sont pas disponibles en abonnement"})]})]})]})}const Rs=[{id:"cautionfree",code:"CAUTIONFREE",discount:0,active:!0,expiration_date:null,created_at:new Date().toISOString(),type:"subscription_only",subscription_effect:"free_deposit"},{id:"abo3mois",code:"ABO3MOIS",discount:0,active:!0,expiration_date:null,created_at:new Date().toISOString(),type:"subscription_only",subscription_effect:"free_months",free_months:3},{id:"abo2mois",code:"ABO2MOIS",discount:0,active:!0,expiration_date:null,created_at:new Date().toISOString(),type:"subscription_only",subscription_effect:"free_months",free_months:2},{id:"abo1mois",code:"ABO1MOIS",discount:0,active:!0,expiration_date:null,created_at:new Date().toISOString(),type:"subscription_only",subscription_effect:"free_months",free_months:1},{id:"batteryfree",code:"BATTERYFREE",discount:179,active:!0,expiration_date:null,created_at:new Date().toISOString(),subscription_effect:"free_battery_setup"},{id:"smartfree",code:"SMARTFREE",discount:2e3,active:!0,expiration_date:null,created_at:new Date().toISOString(),subscription_effect:"free_smart_battery_setup"}],Hw=[{id:"soleil2025",code:"SOLEIL2025",discount:500,active:!0,expiration_date:null,created_at:new Date().toISOString()},{id:"bienvenue",code:"BIENVENUE",discount:300,active:!0,expiration_date:null,created_at:new Date().toISOString()},{id:"printemps",code:"PRINTEMPS",discount:250,active:!0,expiration_date:null,created_at:new Date().toISOString()}];function _w(A="cash"){const[e,t]=x.useState([]),[s,n]=x.useState([]),[a,i]=x.useState(0),[o,l]=x.useState(!1),[c,u]=x.useState(null),[d,h]=x.useState(0),[f,m]=x.useState(!1),[B,g]=x.useState(!1),[p,w]=x.useState(!1);x.useEffect(()=>{localStorage.getItem("local_promo_codes")||localStorage.setItem("local_promo_codes",JSON.stringify(Hw))},[]),x.useEffect(()=>{y()},[A]),x.useEffect(()=>{const E=localStorage.getItem("applied_promo_codes"),b=localStorage.getItem("promo_discount"),C=localStorage.getItem("promo_free_months"),U=localStorage.getItem("promo_free_deposit"),j=localStorage.getItem("promo_free_battery_setup"),O=localStorage.getItem("promo_free_smart_battery_setup");if(E)try{const _=JSON.parse(E);t(_),_.forEach(R=>{N(R)})}catch(_){console.error("Error parsing saved promo codes:",_)}b&&i(Number(b)),C&&h(Number(C)),U&&m(U==="true"),j&&g(j==="true"),O&&w(O==="true")},[]);const N=async E=>{try{l(!0),u(null);const b=Rs.find(C=>C.code.toUpperCase()===E.toUpperCase()&&C.active);if(b){if(b.code==="BATTERYFREE"){Q(b);return}if(b.code==="SMARTFREE")if(A==="cash"){Q(b);return}else{u("Ce code promo est uniquement valable pour les paiements comptant"),l(!1);return}if(A==="subscription"){Q(b);return}else{u("Ce code promo est uniquement valable pour les abonnements"),l(!1);return}}if(A==="cash"){const C=localStorage.getItem("local_promo_codes");if(C){const j=JSON.parse(C).find(O=>O.code.toUpperCase()===E.toUpperCase()&&O.active);if(j){if(j.expiration_date&&new Date(j.expiration_date)<new Date){u("Ce code promo a expiré"),l(!1);return}Q(j);return}}u("Code promo invalide"),l(!1);return}else{u("Code promo invalide pour l'abonnement"),l(!1);return}}catch(b){console.error("Error fetching promo code:",b),u("Erreur lors de la vérification du code promo"),l(!1)}},Q=E=>{n(b=>{if(b.some(M=>M.code===E.code))return b;if(b.length>=2)return u("Vous ne pouvez appliquer que 2 codes promo maximum"),l(!1),b;if(E.subscription_effect==="free_months"&&b.some(M=>M.subscription_effect==="free_months"))return u("Vous ne pouvez appliquer qu'un seul code de mois gratuits"),l(!1),b;const U=[...b,E],j=U.reduce((M,te)=>te.subscription_effect==="free_smart_battery_setup"||te.subscription_effect==="free_battery_setup"?M:M+(te.discount||0),0);i(j),localStorage.setItem("promo_discount",j.toString());const O=Math.max(...U.filter(M=>M.subscription_effect==="free_months").map(M=>M.free_months||0),0);h(O),O>0?localStorage.setItem("promo_free_months",O.toString()):localStorage.removeItem("promo_free_months");const _=U.some(M=>M.subscription_effect==="free_deposit");m(_),_?localStorage.setItem("promo_free_deposit","true"):localStorage.removeItem("promo_free_deposit");const R=U.some(M=>M.subscription_effect==="free_battery_setup");g(R),R?localStorage.setItem("promo_free_battery_setup","true"):localStorage.removeItem("promo_free_battery_setup");const I=U.some(M=>M.subscription_effect==="free_smart_battery_setup");w(I),I?localStorage.setItem("promo_free_smart_battery_setup","true"):localStorage.removeItem("promo_free_smart_battery_setup");const D=U.map(M=>M.code);return t(D),localStorage.setItem("applied_promo_codes",JSON.stringify(D)),U}),l(!1)},v=E=>{if(!E)return{success:!1,message:"Veuillez saisir un code promo"};if(e.includes(E.toUpperCase()))return{success:!0};if(s.length>=2)return{success:!1,message:"Vous ne pouvez appliquer que 2 codes promo maximum"};if(E.toUpperCase()==="BATTERYFREE"){const U=Rs.find(j=>j.code==="BATTERYFREE");if(U)return Q(U),{success:!0}}if(E.toUpperCase()==="SMARTFREE"){const U=Rs.find(j=>j.code==="SMARTFREE");if(U)return A==="cash"?(Q(U),{success:!0}):{success:!1,message:"Ce code promo est uniquement valable pour les paiements comptant"}}const b=Rs.find(U=>U.code.toUpperCase()===E.toUpperCase()&&U.active);if(b&&b.code!=="BATTERYFREE"&&b.code!=="SMARTFREE")return A==="subscription"?b.subscription_effect==="free_months"&&s.some(U=>U.subscription_effect==="free_months")?{success:!1,message:"Vous ne pouvez appliquer qu'un seul code de mois gratuits"}:(Q(b),{success:!0}):{success:!1,message:"Ce code promo est uniquement valable pour les abonnements"};if(A==="subscription"&&E.toUpperCase()!=="BATTERYFREE")return{success:!1,message:"Ce code promo n'est pas valable pour les abonnements"};const C=localStorage.getItem("local_promo_codes");if(C)try{const j=JSON.parse(C).find(O=>O.code.toUpperCase()===E.toUpperCase()&&O.active);if(j)return j.expiration_date&&new Date(j.expiration_date)<new Date?{success:!1,message:"Ce code promo a expiré"}:(Q(j),{success:!0})}catch(U){console.error("Error parsing local promo codes:",U)}return{success:!1,message:"Code promo invalide"}},y=()=>{t([]),n([]),i(0),h(0),m(!1),g(!1),w(!1),localStorage.removeItem("applied_promo_codes"),localStorage.removeItem("promo_discount"),localStorage.removeItem("promo_free_months"),localStorage.removeItem("promo_free_deposit"),localStorage.removeItem("promo_free_battery_setup"),localStorage.removeItem("promo_free_smart_battery_setup")};return{promoCodes:e,validPromoCodes:s,validPromoCode:s.length>0?s[0]:null,discount:a,freeMonths:d,freeDeposit:f,freeBatterySetup:B,freeSmartBatterySetup:p,loading:o,error:c,applyPromoCode:v,clearPromoCodes:y}}function kw({isOpen:A,onClose:e,financingMode:t,basePrice:s,enphasePrice:n,batteryPrice:a,smartChargerPrice:i,myLightPrice:o,primeAutoconsommation:l,subscriptionPrice:c,duration:u,installedPower:d,connectionType:h="surplus",batterySelection:f,mountingSystem:m,mountingSystemCost:B,numberOfPanels:g}){var wA,xA,V,Ke,ke;RA();const{promoCodes:p,validPromoCodes:w,applyPromoCode:N,clearPromoCodes:Q,discount:v,freeMonths:y,freeDeposit:E,freeBatterySetup:b,freeSmartBatterySetup:C}=_w(t),[U,j]=x.useState(""),[O,_]=x.useState(null);x.useState(!1);const R=(f==null?void 0:f.type)==="mybattery",I=(f==null?void 0:f.type)==="virtual",te=(R?b?0:179:0)+(I?C?0:2e3:0),ue=s+n+a+i+B,P=te,z=h==="surplus"?l:0,Z=t==="cash"?ue+P-z-v:0,ee=c+o/12,se=ee*2;R?d*1.055:I&&(f!=null&&f.virtualCapacity)&&o/12;const de=h==="surplus";x.useEffect(()=>{localStorage.setItem("financialMode",t),f?localStorage.setItem("batterySelection",JSON.stringify(f)):localStorage.removeItem("batterySelection"),localStorage.setItem("inverterType",n>0?"enphase":"central"),localStorage.setItem("mountingSystem",m),localStorage.setItem("basePrice",s.toString()),localStorage.setItem("enphasePrice",n.toString()),localStorage.setItem("batteryPrice",a.toString()),localStorage.setItem("smartChargerPrice",i.toString()),localStorage.setItem("myLightPrice",o.toString()),localStorage.setItem("setupFees",te.toString()),localStorage.setItem("mountingSystemCost",B.toString()),localStorage.setItem("subscriptionPrice",c.toString()),localStorage.setItem("subscriptionDuration",u.toString()),v>0&&localStorage.setItem("promo_discount",v.toString()),y>0&&localStorage.setItem("promo_free_months",y.toString()),E&&localStorage.setItem("promo_free_deposit","true"),b&&localStorage.setItem("promo_free_battery_setup","true"),C&&localStorage.setItem("promo_free_smart_battery_setup","true"),w.length>0&&localStorage.setItem("applied_promo_codes",JSON.stringify(w.map(K=>K.code)))},[t,f,n,m,s,a,i,o,te,B,c,u,v,y,E,b,C,w]),x.useEffect(()=>{A||j("")},[A]);const je=()=>{if(U.trim()===""){_({type:"error",message:"Veuillez saisir un code promo"});return}const K=N(U);K.success?(_({type:"success",message:"Code promo appliqué avec succès"}),j("")):_({type:"error",message:K.message||"Oups ! Ce code promo ne semble pas fonctionner"})},_e=K=>{Q(),_({type:"success",message:"Code promo supprimé"})};return x.useEffect(()=>{if(O){const K=setTimeout(()=>{_(null)},5e3);return()=>clearTimeout(K)}},[O]),r.jsxs(r.Fragment,{children:[A&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 z-40",onClick:e}),r.jsx("div",{className:`fixed inset-y-0 right-0 w-96 bg-white shadow-xl transform transition-transform duration-300 ease-in-out z-50 ${A?"translate-x-0":"translate-x-full"}`,children:r.jsxs("div",{className:"h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-100 border-b border-green-200",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:t==="cash"?"Paiement comptant":"Abonnement"}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Kit ",d.toFixed(1)," kWc"]})]}),r.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-green-200 transition-colors","aria-label":"Fermer",children:r.jsx(qt,{className:"h-5 w-5 text-gray-600"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-green-50",children:[r.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm mb-4",children:t==="cash"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(ya,{className:"h-5 w-5 text-blue-500"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"Détail de votre installation"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Prix de base TTC"}),r.jsx("span",{className:"font-medium",children:H(s)})]}),n>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(zt,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:"Option Enphase"})]}),r.jsx("span",{className:"font-medium",children:H(n)})]}),B>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(bl,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:m==="bac-lestes"?"Bac léstés":"Intégration (IAB)"})]}),r.jsx("span",{className:"font-medium",children:H(B)})]}),a>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(EA,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:"Batterie physique"})]}),r.jsx("span",{className:"font-medium",children:H(a)})]}),i>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(zt,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:"Smart Charger"})]}),r.jsx("span",{className:"font-medium",children:H(i)})]}),R&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(EA,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:"Frais d'activation MyBattery"})]}),b?r.jsx("span",{className:"font-medium line-through",children:H(179)}):r.jsx("span",{className:"font-medium",children:H(179)})]}),I&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(EA,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:"Frais de mise en service SmartBattery"})]}),C?r.jsx("span",{className:"font-medium line-through",children:H(2e3)}):r.jsx("span",{className:"font-medium",children:H(2e3)})]}),de&&l>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(li,{className:"h-4 w-4 text-green-500"}),r.jsx("span",{className:"text-green-600",children:"Prime à l'autoconsommation"})]}),r.jsxs("span",{className:"font-medium text-green-600",children:["-",H(l)]})]}),w.length>0&&r.jsx("div",{className:"space-y-2",children:w.map(K=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Et,{className:"h-4 w-4 text-purple-500"}),r.jsxs("span",{className:"text-purple-600",children:["Code promo ",K.code]})]}),K.discount>0&&K.subscription_effect!=="free_smart_battery_setup"&&K.subscription_effect!=="free_battery_setup"&&r.jsxs("span",{className:"font-medium text-purple-600",children:["-",H(K.discount)]})]},K.id))}),r.jsx("div",{className:"pt-3 border-t border-gray-100",children:r.jsxs("div",{className:"flex justify-between font-semibold",children:[r.jsx("span",{children:"Total TTC"}),r.jsx("span",{className:"text-blue-600",children:H(Z)})]})})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(ct,{className:"h-5 w-5 text-purple-500"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"Détail de votre abonnement"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-gray-600",children:["Abonnement mensuel (",u," ans)"]}),r.jsx("span",{className:"font-medium",children:H(c)})]}),o>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"MyLight (mensuel)"}),r.jsx("span",{className:"font-medium",children:H(o/12)})]}),de&&l>0&&r.jsxs("div",{className:"mt-3 bg-green-50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(li,{className:"h-4 w-4 text-green-600"}),r.jsx("h4",{className:"text-sm font-medium text-green-900",children:"Prime à l'autoconsommation"})]}),r.jsxs("div",{className:"flex justify-between text-sm text-green-800",children:[r.jsx("span",{children:"Montant total"}),r.jsx("span",{className:"font-medium",children:H(l)})]})]}),w.length>0&&w.some(K=>K.subscription_effect==="free_months"&&K.free_months&&K.free_months>0)&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Et,{className:"h-4 w-4 text-purple-500"}),r.jsx("span",{className:"text-purple-600",children:(wA=w.find(K=>K.subscription_effect==="free_months"))==null?void 0:wA.code})]}),r.jsxs("span",{className:"font-medium text-purple-600",children:[y," mois offert",y>1?"s":""]})]}),r.jsxs("div",{className:"mt-3 bg-amber-50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Ca,{className:"h-4 w-4 text-amber-600"}),r.jsx("h4",{className:"text-sm font-medium text-amber-900",children:"Caution"})]}),E?r.jsxs("div",{className:"flex justify-between text-sm text-amber-800",children:[r.jsx("span",{className:"line-through",children:"Dépôt de garantie (2 mois)"}),r.jsx("span",{className:"font-medium line-through",children:H(se)})]}):r.jsxs("div",{className:"flex justify-between text-sm text-amber-800",children:[r.jsx("span",{children:"Dépôt de garantie (2 mois)"}),r.jsx("span",{className:"font-medium",children:H(se)})]}),E?r.jsxs("p",{className:"text-xs text-green-700 mt-1 font-medium",children:["Caution offerte avec le code ",(xA=w.find(K=>K.subscription_effect==="free_deposit"))==null?void 0:xA.code]}):r.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"Remboursable à la fin du contrat"})]}),R&&r.jsxs("div",{className:"mt-3 bg-blue-50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(EA,{className:"h-4 w-4 text-blue-600"}),r.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Frais d'activation MyBattery"})]}),b?r.jsxs("div",{className:"flex justify-between text-sm text-blue-800",children:[r.jsx("span",{className:"line-through",children:"Frais unique de mise en service"}),r.jsx("span",{className:"font-medium line-through",children:H(179)})]}):r.jsxs("div",{className:"flex justify-between text-sm text-blue-800",children:[r.jsx("span",{children:"Frais unique de mise en service"}),r.jsx("span",{className:"font-medium",children:H(179)})]}),b&&r.jsxs("p",{className:"text-xs text-green-700 mt-1 font-medium",children:["Frais d'activation offerts avec le code ",(V=w.find(K=>K.subscription_effect==="free_battery_setup"))==null?void 0:V.code]})]}),I&&r.jsxs("div",{className:"mt-3 bg-yellow-50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(EA,{className:"h-4 w-4 text-yellow-600"}),r.jsx("h4",{className:"text-sm font-medium text-yellow-900",children:"Frais de mise en service SmartBattery"})]}),C?r.jsxs("div",{className:"flex justify-between text-sm text-yellow-800",children:[r.jsx("span",{className:"line-through",children:"Frais unique de mise en service"}),r.jsx("span",{className:"font-medium line-through",children:H(2e3)})]}):r.jsxs("div",{className:"flex justify-between text-sm text-yellow-800",children:[r.jsx("span",{children:"Frais unique de mise en service"}),r.jsx("span",{className:"font-medium",children:H(2e3)})]}),C&&r.jsxs("p",{className:"text-xs text-green-700 mt-1 font-medium",children:["Frais de mise en service offerts avec le code ",(Ke=w.find(K=>K.subscription_effect==="free_smart_battery_setup"))==null?void 0:Ke.code]})]}),r.jsxs("div",{className:"pt-3 border-t border-gray-100",children:[r.jsxs("div",{className:"flex justify-between font-semibold",children:[r.jsx("span",{children:"Total mensuel TTC"}),r.jsx("span",{className:"text-purple-600",children:H(ee)})]}),y>0&&r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Les ",y," premier",y>1?"s":""," mois sont offert",y>1?"s":""," avec le code ",(ke=w.find(K=>K.subscription_effect==="free_months"))==null?void 0:ke.code]})]})]})]})}),r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Et,{className:"h-4 w-4 text-purple-500"}),r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Code promo"})]}),w.length>0&&r.jsx("button",{onClick:()=>Q(),className:"text-xs text-red-500 hover:text-red-700",children:"Effacer tout"})]}),w.length>0&&r.jsx("div",{className:"mb-3 space-y-1",children:w.map(K=>r.jsxs("div",{className:"flex items-center justify-between bg-purple-50 px-3 py-1.5 rounded-md",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(Et,{className:"h-3.5 w-3.5 text-purple-500"}),r.jsx("span",{className:"text-sm font-medium text-purple-700",children:K.code})]}),r.jsx("button",{onClick:()=>_e(K.code),className:"text-purple-400 hover:text-purple-600",children:r.jsx(qt,{className:"h-3.5 w-3.5"})})]},K.id))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:U,onChange:K=>j(K.target.value.toUpperCase()),placeholder:"Entrez votre code",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"}),r.jsx("button",{onClick:je,className:"px-3 py-2 bg-purple-600 text-white rounded-md text-sm hover:bg-purple-700 transition-colors",children:"Appliquer"})]}),O&&r.jsx("p",{className:`text-xs mt-1 ${O.type==="success"?"text-green-600":"text-red-600"}`,children:O.message}),t==="subscription"&&r.jsx("p",{className:"text-xs mt-2 text-amber-600",children:"Seuls les codes promo spécifiques à l'abonnement sont acceptés"})]})]})]})})]})}function Tw(A,e,t,s,n=!1){var N,Q,v,y,E;const a=Math.pow(1+A.degradationPanneau/100,e-1),i=Math.pow(1+A.indexationProduction/100,e-1),o=Math.pow(1+A.revalorisationEnergie/100,e-1),l=t*a,c=(A.autoconsommation??0)/100,u=l*c,d=l*(1-c);console.log("🔋 physique -> rate=",c,"production=",l,"revente kWh=",d);const h=A.prixKwh*o,f=u*h;let m=0;if(((N=A.batterySelection)==null?void 0:N.type)==="mybattery"){const b=Math.max(0,h-.0996);m=d*b}else{const b=e<=20?A.tarifRevente*i:0;m=d*b}const B=A.dureeAbonnement||20;let g=0;A.financingMode==="subscription"&&e<=B&&(g=zs(s,B)*12),A.financingMode==="subscription"&&((Q=A.batterySelection)==null?void 0:Q.type)==="physical"&&((v=A.batterySelection.model)!=null&&v.monthlyPrice)&&e<=B&&(g+=A.batterySelection.model.monthlyPrice*12);let p=0;if(((y=A.batterySelection)==null?void 0:y.type)==="virtual"||((E=A.batterySelection)==null?void 0:E.type)==="mybattery")if(A.batterySelection.type==="virtual"){const b=Fl.find(C=>{var U;return C.capacity===((U=A.batterySelection)==null?void 0:U.virtualCapacity)});b&&(p=b.monthlyPrice*12)}else A.batterySelection.type==="mybattery"&&(p=s*1.055*12);const w=f+m-g-p;return{annee:e,production:l,autoconsommation:u,revente:d,economiesAutoconsommation:f,revenusRevente:m,coutAbonnement:g,coutMyLight:p,gainTotal:w}}function Lw(A,e,t,s=!1){var B;const n=[];let a=0,i=0,o=0,l=0,c=0;for(let g=1;g<=30;g++){const p=Tw(A,g,e,t,s);n.push(p),a+=p.economiesAutoconsommation,i+=p.revenusRevente,o+=p.coutAbonnement,l+=p.coutMyLight,c+=p.gainTotal}const u={autoconsommation:a/30,revente:i/30,abonnement:o/30,myLight:l/30,total:c/30};let d=Jt(t);A.financingMode==="cash"&&(((B=A.batterySelection)==null?void 0:B.type)==="physical"&&A.batterySelection.model&&(d+=A.batterySelection.model.oneTimePrice),s&&(d+=Math.ceil(t*500/100)*100));const h=_h(t,A.primeAutoconsommation,A.remiseCommerciale,s);let f=0,m=0;for(let g=0;g<n.length;g++)f+=n[g].gainTotal,f>=h&&m===0&&(m=g+1);return{projectionAnnuelle:n,totalAutoconsommation:a,totalRevente:i,totalAbonnement:o,totalMyLight:l,totalGains:c,moyenneAnnuelle:u,anneeRentabilite:m,prixInstallation:d,primeAutoconsommation:A.primeAutoconsommation,remiseCommerciale:A.remiseCommerciale,prixFinal:h}}function Ha(){const{settings:A}=RA(),[e,t]=x.useState(()=>{const o=localStorage.getItem("financialMode"),l=localStorage.getItem("primeAutoconsommation"),c=localStorage.getItem("remiseCommerciale"),u=localStorage.getItem("subscriptionDuration"),d=localStorage.getItem("connectionType"),h=localStorage.getItem("batterySelection");return{financingMode:o||"cash",prixKwh:A.baseKwhPrice,tarifRevente:A.baseSellPrice,autoconsommation:A.defaultAutoconsumption,revalorisationEnergie:A.defaultEnergyRevaluation,indexationProduction:A.defaultSellIndexation,degradationPanneau:A.defaultPanelDegradation,dureeAbonnement:u?parseInt(u,10):20,primeAutoconsommation:l?parseFloat(l):0,remiseCommerciale:c?parseFloat(c):0,connectionType:d||"surplus",batterySelection:h?JSON.parse(h):null}});console.log("[useFinancialProjection] init parameters.financingMode =",e.financingMode);const[s,n]=x.useState(null);x.useEffect(()=>{t(o=>({...o,prixKwh:A.baseKwhPrice,tarifRevente:A.baseSellPrice,autoconsommation:A.defaultAutoconsumption,revalorisationEnergie:A.defaultEnergyRevaluation,indexationProduction:A.defaultSellIndexation,degradationPanneau:A.defaultPanelDegradation}))},[A]),x.useEffect(()=>{const o=l=>{t(c=>({...c,...l.detail}))};return window.addEventListener("financialSettingsUpdated",o),()=>{window.removeEventListener("financialSettingsUpdated",o)}},[]);const a=x.useCallback(o=>{console.log("[useFinancialProjection] updateParameters called with:",o),t(l=>{const c={...l,...o};return console.log("[useFinancialProjection] new parameters.financingMode =",c.financingMode),o.financingMode&&(localStorage.setItem("financialMode",o.financingMode),console.log("[useFinancialProjection] saved financingMode to localStorage:",o.financingMode)),o.primeAutoconsommation!==void 0&&localStorage.setItem("primeAutoconsommation",o.primeAutoconsommation.toString()),o.remiseCommerciale!==void 0&&localStorage.setItem("remiseCommerciale",o.remiseCommerciale.toString()),o.dureeAbonnement&&localStorage.setItem("subscriptionDuration",o.dureeAbonnement.toString()),o.connectionType&&localStorage.setItem("connectionType",o.connectionType),o.batterySelection!==void 0&&(o.batterySelection?localStorage.setItem("batterySelection",JSON.stringify(o.batterySelection)):localStorage.removeItem("batterySelection")),c})},[]),i=x.useCallback((o,l)=>{const c=Lw(e,o,l);n(c)},[e]);return{parameters:e,projection:s,updateParameters:a,calculateProjection:i}}function Pw(){var se,de,je,_e,wA,xA;const A=ft(),e=ht(),[t,s]=x.useState(!1),[n,a]=x.useState(!1),[i,o]=x.useState(!1),[l,c]=x.useState(null),[u,d]=x.useState("central"),[h,f]=x.useState(!1),[m,B]=x.useState("surimposition"),[g,p]=x.useState(!1),{settings:w}=RA(),[N,Q]=x.useState([]),[v,y]=x.useState(0),{projection:E,parameters:b,updateParameters:C,calculateProjection:U}=Ha();x.useEffect(()=>{if(b.puissanceCrete&&w){console.log("Calculating subsidy with:",{power:b.puissanceCrete,settings:w});const V=Nn(b.puissanceCrete,w);console.log("Calculated subsidy amount:",V),V!==b.primeAutoconsommation&&C({primeAutoconsommation:V})}},[b.puissanceCrete,w]),x.useEffect(()=>{if(b.puissanceCrete){const V=Jt(b.puissanceCrete);y(V)}},[b.puissanceCrete]),x.useEffect(()=>{const V=()=>{if(l!=null&&l.typeCompteur&&j(l.typeCompteur),b.puissanceCrete){const Ke=Jt(b.puissanceCrete);y(Ke)}};return window.addEventListener("customPricesUpdated",V),()=>{window.removeEventListener("customPricesUpdated",V)}},[l,b.puissanceCrete]);const j=V=>{const ke=V==="monophase"?6:9,K=[];for(let G=3;G<=ke;G+=.5)K.push({value:G,label:`${G.toFixed(1)} kWc`});w.installationPrices.filter(G=>G.power>9).forEach(G=>{K.push({value:G.power,label:`${G.power.toFixed(1)} kWc (Pro)`})}),Q(K),console.log("Updated power options:",K)},O=V=>{C({puissanceCrete:V.power,dureeAbonnement:V.duration})},_=u==="enphase"?pa(b.puissanceCrete):0,R=((se=b.batterySelection)==null?void 0:se.type)==="physical"&&((de=b.batterySelection.model)==null?void 0:de.oneTimePrice)||0,I=(je=b.batterySelection)!=null&&je.includeSmartCharger?1500:0,D=((_e=b.batterySelection)==null?void 0:_e.type)==="virtual"?b.batterySelection.virtualCapacity===100?180:b.batterySelection.virtualCapacity===300?288:b.batterySelection.virtualCapacity===600?360:420:0,M=zs(b.puissanceCrete,b.dureeAbonnement||20),te=Math.ceil(b.puissanceCrete*2),ue=m==="bac-lestes"?60*te:m==="integration"?100*te:0;x.useEffect(()=>{var Ke,ke;const V=localStorage.getItem("solarResults");if(!V){A("/");return}try{const K=JSON.parse(V);if(!K.typeCompteur){console.error("Type de compteur manquant dans les résultats"),A("/");return}c(K),j(K.typeCompteur);const{productionAnnuelle:S,puissanceCrete:G}=K,q=((Ke=e.state)==null?void 0:Ke.power)||localStorage.getItem("selectedPower"),fe=((ke=e.state)==null?void 0:ke.duration)||localStorage.getItem("subscriptionDuration"),Ce=q?parseFloat(q):G;if(!S||!Ce){A("/");return}C({productionAnnuelle:S,puissanceCrete:Ce,financingMode:"subscription",dureeAbonnement:fe?parseInt(fe):20}),localStorage.removeItem("selectedPower"),localStorage.removeItem("subscriptionDuration")}catch(K){console.error("Erreur lors du chargement des résultats:",K),A("/")}},[A,C,e.state,w]);const P=async()=>{!b.productionAnnuelle||!b.puissanceCrete||(s(!0),localStorage.setItem("financialMode",b.financingMode),localStorage.setItem("primeAutoconsommation",b.primeAutoconsommation.toString()),localStorage.setItem("remiseCommerciale",b.remiseCommerciale.toString()),b.dureeAbonnement&&localStorage.setItem("subscriptionDuration",b.dureeAbonnement.toString()),await new Promise(V=>setTimeout(V,1e3)),U(b.productionAnnuelle,b.puissanceCrete),a(!0),s(!1))},z=V=>{if(!(l!=null&&l.typeCompteur)){console.error("Type de compteur non défini");return}const ke=l.typeCompteur==="monophase"?6:9;V<=9&&V>ke&&console.warn(`Puissance ${V} kWc supérieure à la limite ${ke} kWc en ${l.typeCompteur}`);const K={...l,puissanceCrete:V,productionAnnuelle:Math.round(V*(l.productionAnnuelle/l.puissanceCrete)),surfaceTotale:Math.round(V*2.3*100)/100};c(K),localStorage.setItem("solarResults",JSON.stringify(K)),localStorage.setItem("selectedPower",V.toString()),C({puissanceCrete:V,productionAnnuelle:K.productionAnnuelle})},Z=()=>{LA(),A("/eligibilite")},ee=((wA=b.batterySelection)==null?void 0:wA.type)==="virtual"&&!((xA=b.batterySelection)!=null&&xA.virtualCapacity);return l!=null&&l.typeCompteur?r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs(it,{to:"/",className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[r.jsx(Ba,{className:"h-4 w-4 mr-1"}),"Retour au dimensionnement"]})}),r.jsxs("div",{className:"space-y-8",children:[r.jsx(Ul,{result:l,onModifyPower:()=>o(!0)}),i&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Ajuster la puissance"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Puissance (kWc)"}),r.jsx("select",{value:l.puissanceCrete,onChange:V=>z(parseFloat(V.target.value)),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:N.map(V=>r.jsx("option",{value:V.value,children:V.label},V.value))}),l.typeCompteur==="monophase"&&r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Limité à 6 kWc en monophasé"})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Annuler"}),r.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Appliquer"})]})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow",children:r.jsxs("div",{className:"space-y-8 p-8",children:[r.jsx(qf,{selectedMode:b.financingMode,onModeChange:V=>{C({financingMode:V}),V==="subscription"&&m!=="surimposition"&&B("surimposition")},puissanceCrete:b.puissanceCrete,dureeAbonnement:b.dureeAbonnement||20,onDureeChange:V=>C({dureeAbonnement:V}),onKitSelect:O}),r.jsx(Sw,{financingMode:b.financingMode,inverterType:u,onInverterChange:d,bifacial:h,onBifacialChange:f,installedPower:b.puissanceCrete,mountingSystem:m,onMountingSystemChange:V=>{b.financingMode==="subscription"&&V!=="surimposition"||B(V)}}),r.jsx(tm,{parameters:b,onParameterChange:C,puissanceCrete:b.puissanceCrete}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("button",{onClick:P,disabled:t||ee,className:"relative px-6 py-3 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed group",children:[r.jsx("div",{className:"flex items-center gap-2",children:t?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"relative w-5 h-5",children:r.jsx(Xt,{className:"absolute inset-0 w-5 h-5 text-yellow-300 animate-spin"})}),r.jsx("span",{children:"Calcul en cours..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(xa,{className:"w-5 h-5"}),r.jsx("span",{children:"Calculer la projection financière"})]})}),ee&&r.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-900 text-white text-sm rounded invisible group-hover:visible whitespace-nowrap",children:"Veuillez sélectionner une capacité de stockage virtuel"})]})})]})}),n&&E&&!t&&r.jsxs(r.Fragment,{children:[r.jsx(Fw,{projection:E}),r.jsx(Iw,{projection:E}),r.jsxs("div",{className:"mt-8 space-y-6",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Pour toute demande d'étude d'éligibilité au dossier, nos conseillers sont à votre disposition :"}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(af,{className:"h-5 w-5 text-blue-600"}),r.jsx("a",{href:"tel:0183835150",className:"text-blue-600 hover:text-blue-800 font-medium",children:"01 83 83 51 50"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wl,{className:"h-5 w-5 text-blue-600"}),r.jsx("a",{href:"mailto:contact@abie.fr",className:"text-blue-600 hover:text-blue-800 font-medium",children:"contact@abie.fr"})]})]})]})}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("button",{onClick:Z,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:["Tester mon éligibilité",r.jsx(wa,{className:"ml-2 -mr-1 h-5 w-5"})]})})]})]})]}),r.jsx("button",{onClick:()=>p(!g),className:`fixed top-1/2 right-0 transform -translate-y-1/2 bg-green-500 text-white p-2 rounded-l-lg shadow-lg transition-transform hover:bg-green-600 ${g?"translate-x-96":"translate-x-0"}`,children:g?r.jsx(lA,{className:"h-6 w-6"}):r.jsx(Gh,{className:"h-6 w-6"})}),r.jsx(kw,{isOpen:g,onClose:()=>p(!1),financingMode:b.financingMode,basePrice:v,enphasePrice:_,batteryPrice:R,smartChargerPrice:I,myLightPrice:D,primeAutoconsommation:b.primeAutoconsommation,subscriptionPrice:M,duration:b.dureeAbonnement||20,installedPower:b.puissanceCrete,connectionType:b.connectionType,batterySelection:b.batterySelection,mountingSystem:m,mountingSystemCost:ue,numberOfPanels:te})]}):null}function Sc(A,e){return function(){return A.apply(e,arguments)}}const{toString:Ow}=Object.prototype,{getPrototypeOf:_a}=Object,Hr=(A=>e=>{const t=Ow.call(e);return A[t]||(A[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),$e=A=>(A=A.toLowerCase(),e=>Hr(e)===A),_r=A=>e=>typeof e===A,{isArray:Bt}=Array,As=_r("undefined");function Dw(A){return A!==null&&!As(A)&&A.constructor!==null&&!As(A.constructor)&&He(A.constructor.isBuffer)&&A.constructor.isBuffer(A)}const Hc=$e("ArrayBuffer");function Rw(A){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(A):e=A&&A.buffer&&Hc(A.buffer),e}const Kw=_r("string"),He=_r("function"),_c=_r("number"),kr=A=>A!==null&&typeof A=="object",Mw=A=>A===!0||A===!1,Js=A=>{if(Hr(A)!=="object")return!1;const e=_a(A);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in A)&&!(Symbol.iterator in A)},Vw=$e("Date"),Gw=$e("File"),$w=$e("Blob"),Jw=$e("FileList"),Ww=A=>kr(A)&&He(A.pipe),Xw=A=>{let e;return A&&(typeof FormData=="function"&&A instanceof FormData||He(A.append)&&((e=Hr(A))==="formdata"||e==="object"&&He(A.toString)&&A.toString()==="[object FormData]"))},qw=$e("URLSearchParams"),[zw,Yw,Zw,ex]=["ReadableStream","Request","Response","Headers"].map($e),Ax=A=>A.trim?A.trim():A.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function is(A,e,{allOwnKeys:t=!1}={}){if(A===null||typeof A>"u")return;let s,n;if(typeof A!="object"&&(A=[A]),Bt(A))for(s=0,n=A.length;s<n;s++)e.call(null,A[s],s,A);else{const a=t?Object.getOwnPropertyNames(A):Object.keys(A),i=a.length;let o;for(s=0;s<i;s++)o=a[s],e.call(null,A[o],o,A)}}function kc(A,e){e=e.toLowerCase();const t=Object.keys(A);let s=t.length,n;for(;s-- >0;)if(n=t[s],e===n.toLowerCase())return n;return null}const HA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Tc=A=>!As(A)&&A!==HA;function Aa(){const{caseless:A}=Tc(this)&&this||{},e={},t=(s,n)=>{const a=A&&kc(e,n)||n;Js(e[a])&&Js(s)?e[a]=Aa(e[a],s):Js(s)?e[a]=Aa({},s):Bt(s)?e[a]=s.slice():e[a]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&is(arguments[s],t);return e}const tx=(A,e,t,{allOwnKeys:s}={})=>(is(e,(n,a)=>{t&&He(n)?A[a]=Sc(n,t):A[a]=n},{allOwnKeys:s}),A),sx=A=>(A.charCodeAt(0)===65279&&(A=A.slice(1)),A),rx=(A,e,t,s)=>{A.prototype=Object.create(e.prototype,s),A.prototype.constructor=A,Object.defineProperty(A,"super",{value:e.prototype}),t&&Object.assign(A.prototype,t)},nx=(A,e,t,s)=>{let n,a,i;const o={};if(e=e||{},A==null)return e;do{for(n=Object.getOwnPropertyNames(A),a=n.length;a-- >0;)i=n[a],(!s||s(i,A,e))&&!o[i]&&(e[i]=A[i],o[i]=!0);A=t!==!1&&_a(A)}while(A&&(!t||t(A,e))&&A!==Object.prototype);return e},ax=(A,e,t)=>{A=String(A),(t===void 0||t>A.length)&&(t=A.length),t-=e.length;const s=A.indexOf(e,t);return s!==-1&&s===t},ix=A=>{if(!A)return null;if(Bt(A))return A;let e=A.length;if(!_c(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=A[e];return t},ox=(A=>e=>A&&e instanceof A)(typeof Uint8Array<"u"&&_a(Uint8Array)),lx=(A,e)=>{const s=(A&&A[Symbol.iterator]).call(A);let n;for(;(n=s.next())&&!n.done;){const a=n.value;e.call(A,a[0],a[1])}},cx=(A,e)=>{let t;const s=[];for(;(t=A.exec(e))!==null;)s.push(t);return s},ux=$e("HTMLFormElement"),dx=A=>A.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,n){return s.toUpperCase()+n}),po=(({hasOwnProperty:A})=>(e,t)=>A.call(e,t))(Object.prototype),hx=$e("RegExp"),Lc=(A,e)=>{const t=Object.getOwnPropertyDescriptors(A),s={};is(t,(n,a)=>{let i;(i=e(n,a,A))!==!1&&(s[a]=i||n)}),Object.defineProperties(A,s)},fx=A=>{Lc(A,(e,t)=>{if(He(A)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=A[t];if(He(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},mx=(A,e)=>{const t={},s=n=>{n.forEach(a=>{t[a]=!0})};return Bt(A)?s(A):s(String(A).split(e)),t},gx=()=>{},px=(A,e)=>A!=null&&Number.isFinite(A=+A)?A:e,pn="abcdefghijklmnopqrstuvwxyz",Bo="0123456789",Pc={DIGIT:Bo,ALPHA:pn,ALPHA_DIGIT:pn+pn.toUpperCase()+Bo},Bx=(A=16,e=Pc.ALPHA_DIGIT)=>{let t="";const{length:s}=e;for(;A--;)t+=e[Math.random()*s|0];return t};function wx(A){return!!(A&&He(A.append)&&A[Symbol.toStringTag]==="FormData"&&A[Symbol.iterator])}const xx=A=>{const e=new Array(10),t=(s,n)=>{if(kr(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[n]=s;const a=Bt(s)?[]:{};return is(s,(i,o)=>{const l=t(i,n+1);!As(l)&&(a[o]=l)}),e[n]=void 0,a}}return s};return t(A,0)},yx=$e("AsyncFunction"),bx=A=>A&&(kr(A)||He(A))&&He(A.then)&&He(A.catch),Oc=((A,e)=>A?setImmediate:e?((t,s)=>(HA.addEventListener("message",({source:n,data:a})=>{n===HA&&a===t&&s.length&&s.shift()()},!1),n=>{s.push(n),HA.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",He(HA.postMessage)),Cx=typeof queueMicrotask<"u"?queueMicrotask.bind(HA):typeof process<"u"&&process.nextTick||Oc,F={isArray:Bt,isArrayBuffer:Hc,isBuffer:Dw,isFormData:Xw,isArrayBufferView:Rw,isString:Kw,isNumber:_c,isBoolean:Mw,isObject:kr,isPlainObject:Js,isReadableStream:zw,isRequest:Yw,isResponse:Zw,isHeaders:ex,isUndefined:As,isDate:Vw,isFile:Gw,isBlob:$w,isRegExp:hx,isFunction:He,isStream:Ww,isURLSearchParams:qw,isTypedArray:ox,isFileList:Jw,forEach:is,merge:Aa,extend:tx,trim:Ax,stripBOM:sx,inherits:rx,toFlatObject:nx,kindOf:Hr,kindOfTest:$e,endsWith:ax,toArray:ix,forEachEntry:lx,matchAll:cx,isHTMLForm:ux,hasOwnProperty:po,hasOwnProp:po,reduceDescriptors:Lc,freezeMethods:fx,toObjectSet:mx,toCamelCase:dx,noop:gx,toFiniteNumber:px,findKey:kc,global:HA,isContextDefined:Tc,ALPHABET:Pc,generateString:Bx,isSpecCompliantForm:wx,toJSONObject:xx,isAsyncFn:yx,isThenable:bx,setImmediate:Oc,asap:Cx};function $(A,e,t,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=A,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}F.inherits($,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.status}}});const Dc=$.prototype,Rc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(A=>{Rc[A]={value:A}});Object.defineProperties($,Rc);Object.defineProperty(Dc,"isAxiosError",{value:!0});$.from=(A,e,t,s,n,a)=>{const i=Object.create(Dc);return F.toFlatObject(A,i,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),$.call(i,A.message,e,t,s,n),i.cause=A,i.name=A.name,a&&Object.assign(i,a),i};const vx=null;function ta(A){return F.isPlainObject(A)||F.isArray(A)}function Kc(A){return F.endsWith(A,"[]")?A.slice(0,-2):A}function wo(A,e,t){return A?A.concat(e).map(function(n,a){return n=Kc(n),!t&&a?"["+n+"]":n}).join(t?".":""):e}function Qx(A){return F.isArray(A)&&!A.some(ta)}const Ux=F.toFlatObject(F,{},null,function(e){return/^is[A-Z]/.test(e)});function Tr(A,e,t){if(!F.isObject(A))throw new TypeError("target must be an object");e=e||new FormData,t=F.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(B,g){return!F.isUndefined(g[B])});const s=t.metaTokens,n=t.visitor||u,a=t.dots,i=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(e);if(!F.isFunction(n))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(F.isDate(m))return m.toISOString();if(!l&&F.isBlob(m))throw new $("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(m)||F.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,B,g){let p=m;if(m&&!g&&typeof m=="object"){if(F.endsWith(B,"{}"))B=s?B:B.slice(0,-2),m=JSON.stringify(m);else if(F.isArray(m)&&Qx(m)||(F.isFileList(m)||F.endsWith(B,"[]"))&&(p=F.toArray(m)))return B=Kc(B),p.forEach(function(N,Q){!(F.isUndefined(N)||N===null)&&e.append(i===!0?wo([B],Q,a):i===null?B:B+"[]",c(N))}),!1}return ta(m)?!0:(e.append(wo(g,B,a),c(m)),!1)}const d=[],h=Object.assign(Ux,{defaultVisitor:u,convertValue:c,isVisitable:ta});function f(m,B){if(!F.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+B.join("."));d.push(m),F.forEach(m,function(p,w){(!(F.isUndefined(p)||p===null)&&n.call(e,p,F.isString(w)?w.trim():w,B,h))===!0&&f(p,B?B.concat(w):[w])}),d.pop()}}if(!F.isObject(A))throw new TypeError("data must be an object");return f(A),e}function xo(A){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(A).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function ka(A,e){this._pairs=[],A&&Tr(A,this,e)}const Mc=ka.prototype;Mc.append=function(e,t){this._pairs.push([e,t])};Mc.toString=function(e){const t=e?function(s){return e.call(this,s,xo)}:xo;return this._pairs.map(function(n){return t(n[0])+"="+t(n[1])},"").join("&")};function Fx(A){return encodeURIComponent(A).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Vc(A,e,t){if(!e)return A;const s=t&&t.encode||Fx;F.isFunction(t)&&(t={serialize:t});const n=t&&t.serialize;let a;if(n?a=n(e,t):a=F.isURLSearchParams(e)?e.toString():new ka(e,t).toString(s),a){const i=A.indexOf("#");i!==-1&&(A=A.slice(0,i)),A+=(A.indexOf("?")===-1?"?":"&")+a}return A}class yo{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){F.forEach(this.handlers,function(s){s!==null&&e(s)})}}const Gc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ex=typeof URLSearchParams<"u"?URLSearchParams:ka,Nx=typeof FormData<"u"?FormData:null,jx=typeof Blob<"u"?Blob:null,Ix={isBrowser:!0,classes:{URLSearchParams:Ex,FormData:Nx,Blob:jx},protocols:["http","https","file","blob","url","data"]},Ta=typeof window<"u"&&typeof document<"u",sa=typeof navigator=="object"&&navigator||void 0,Sx=Ta&&(!sa||["ReactNative","NativeScript","NS"].indexOf(sa.product)<0),Hx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_x=Ta&&window.location.href||"http://localhost",kx=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ta,hasStandardBrowserEnv:Sx,hasStandardBrowserWebWorkerEnv:Hx,navigator:sa,origin:_x},Symbol.toStringTag,{value:"Module"})),be={...kx,...Ix};function Tx(A,e){return Tr(A,new be.classes.URLSearchParams,Object.assign({visitor:function(t,s,n,a){return be.isNode&&F.isBuffer(t)?(this.append(s,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function Lx(A){return F.matchAll(/\w+|\[(\w*)]/g,A).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Px(A){const e={},t=Object.keys(A);let s;const n=t.length;let a;for(s=0;s<n;s++)a=t[s],e[a]=A[a];return e}function $c(A){function e(t,s,n,a){let i=t[a++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),l=a>=t.length;return i=!i&&F.isArray(n)?n.length:i,l?(F.hasOwnProp(n,i)?n[i]=[n[i],s]:n[i]=s,!o):((!n[i]||!F.isObject(n[i]))&&(n[i]=[]),e(t,s,n[i],a)&&F.isArray(n[i])&&(n[i]=Px(n[i])),!o)}if(F.isFormData(A)&&F.isFunction(A.entries)){const t={};return F.forEachEntry(A,(s,n)=>{e(Lx(s),n,t,0)}),t}return null}function Ox(A,e,t){if(F.isString(A))try{return(e||JSON.parse)(A),F.trim(A)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(A)}const os={transitional:Gc,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",n=s.indexOf("application/json")>-1,a=F.isObject(e);if(a&&F.isHTMLForm(e)&&(e=new FormData(e)),F.isFormData(e))return n?JSON.stringify($c(e)):e;if(F.isArrayBuffer(e)||F.isBuffer(e)||F.isStream(e)||F.isFile(e)||F.isBlob(e)||F.isReadableStream(e))return e;if(F.isArrayBufferView(e))return e.buffer;if(F.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Tx(e,this.formSerializer).toString();if((o=F.isFileList(e))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Tr(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),Ox(e)):e}],transformResponse:[function(e){const t=this.transitional||os.transitional,s=t&&t.forcedJSONParsing,n=this.responseType==="json";if(F.isResponse(e)||F.isReadableStream(e))return e;if(e&&F.isString(e)&&(s&&!this.responseType||n)){const i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(o){if(i)throw o.name==="SyntaxError"?$.from(o,$.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:be.classes.FormData,Blob:be.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],A=>{os.headers[A]={}});const Dx=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Rx=A=>{const e={};let t,s,n;return A&&A.split(`
`).forEach(function(i){n=i.indexOf(":"),t=i.substring(0,n).trim().toLowerCase(),s=i.substring(n+1).trim(),!(!t||e[t]&&Dx[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},bo=Symbol("internals");function Ut(A){return A&&String(A).trim().toLowerCase()}function Ws(A){return A===!1||A==null?A:F.isArray(A)?A.map(Ws):String(A)}function Kx(A){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(A);)e[s[1]]=s[2];return e}const Mx=A=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(A.trim());function Bn(A,e,t,s,n){if(F.isFunction(s))return s.call(this,e,t);if(n&&(e=t),!!F.isString(e)){if(F.isString(s))return e.indexOf(s)!==-1;if(F.isRegExp(s))return s.test(e)}}function Vx(A){return A.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function Gx(A,e){const t=F.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(A,s+t,{value:function(n,a,i){return this[s].call(this,e,n,a,i)},configurable:!0})})}class Ne{constructor(e){e&&this.set(e)}set(e,t,s){const n=this;function a(o,l,c){const u=Ut(l);if(!u)throw new Error("header name must be a non-empty string");const d=F.findKey(n,u);(!d||n[d]===void 0||c===!0||c===void 0&&n[d]!==!1)&&(n[d||l]=Ws(o))}const i=(o,l)=>F.forEach(o,(c,u)=>a(c,u,l));if(F.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(F.isString(e)&&(e=e.trim())&&!Mx(e))i(Rx(e),t);else if(F.isHeaders(e))for(const[o,l]of e.entries())a(l,o,s);else e!=null&&a(t,e,s);return this}get(e,t){if(e=Ut(e),e){const s=F.findKey(this,e);if(s){const n=this[s];if(!t)return n;if(t===!0)return Kx(n);if(F.isFunction(t))return t.call(this,n,s);if(F.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ut(e),e){const s=F.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||Bn(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let n=!1;function a(i){if(i=Ut(i),i){const o=F.findKey(s,i);o&&(!t||Bn(s,s[o],o,t))&&(delete s[o],n=!0)}}return F.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let s=t.length,n=!1;for(;s--;){const a=t[s];(!e||Bn(this,this[a],a,e,!0))&&(delete this[a],n=!0)}return n}normalize(e){const t=this,s={};return F.forEach(this,(n,a)=>{const i=F.findKey(s,a);if(i){t[i]=Ws(n),delete t[a];return}const o=e?Vx(a):String(a).trim();o!==a&&delete t[a],t[o]=Ws(n),s[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return F.forEach(this,(s,n)=>{s!=null&&s!==!1&&(t[n]=e&&F.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(n=>s.set(n)),s}static accessor(e){const s=(this[bo]=this[bo]={accessors:{}}).accessors,n=this.prototype;function a(i){const o=Ut(i);s[o]||(Gx(n,i),s[o]=!0)}return F.isArray(e)?e.forEach(a):a(e),this}}Ne.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(Ne.prototype,({value:A},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>A,set(s){this[t]=s}}});F.freezeMethods(Ne);function wn(A,e){const t=this||os,s=e||t,n=Ne.from(s.headers);let a=s.data;return F.forEach(A,function(o){a=o.call(t,a,n.normalize(),e?e.status:void 0)}),n.normalize(),a}function Jc(A){return!!(A&&A.__CANCEL__)}function wt(A,e,t){$.call(this,A??"canceled",$.ERR_CANCELED,e,t),this.name="CanceledError"}F.inherits(wt,$,{__CANCEL__:!0});function Wc(A,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?A(t):e(new $("Request failed with status code "+t.status,[$.ERR_BAD_REQUEST,$.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function $x(A){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(A);return e&&e[1]||""}function Jx(A,e){A=A||10;const t=new Array(A),s=new Array(A);let n=0,a=0,i;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=s[a];i||(i=c),t[n]=l,s[n]=c;let d=a,h=0;for(;d!==n;)h+=t[d++],d=d%A;if(n=(n+1)%A,n===a&&(a=(a+1)%A),c-i<e)return;const f=u&&c-u;return f?Math.round(h*1e3/f):void 0}}function Wx(A,e){let t=0,s=1e3/e,n,a;const i=(c,u=Date.now())=>{t=u,n=null,a&&(clearTimeout(a),a=null),A.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-t;d>=s?i(c,u):(n=c,a||(a=setTimeout(()=>{a=null,i(n)},s-d)))},()=>n&&i(n)]}const cr=(A,e,t=3)=>{let s=0;const n=Jx(50,250);return Wx(a=>{const i=a.loaded,o=a.lengthComputable?a.total:void 0,l=i-s,c=n(l),u=i<=o;s=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&u?(o-i)/c:void 0,event:a,lengthComputable:o!=null,[e?"download":"upload"]:!0};A(d)},t)},Co=(A,e)=>{const t=A!=null;return[s=>e[0]({lengthComputable:t,total:A,loaded:s}),e[1]]},vo=A=>(...e)=>F.asap(()=>A(...e)),Xx=be.hasStandardBrowserEnv?((A,e)=>t=>(t=new URL(t,be.origin),A.protocol===t.protocol&&A.host===t.host&&(e||A.port===t.port)))(new URL(be.origin),be.navigator&&/(msie|trident)/i.test(be.navigator.userAgent)):()=>!0,qx=be.hasStandardBrowserEnv?{write(A,e,t,s,n,a){const i=[A+"="+encodeURIComponent(e)];F.isNumber(t)&&i.push("expires="+new Date(t).toGMTString()),F.isString(s)&&i.push("path="+s),F.isString(n)&&i.push("domain="+n),a===!0&&i.push("secure"),document.cookie=i.join("; ")},read(A){const e=document.cookie.match(new RegExp("(^|;\\s*)("+A+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(A){this.write(A,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function zx(A){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(A)}function Yx(A,e){return e?A.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):A}function Xc(A,e){return A&&!zx(e)?Yx(A,e):e}const Qo=A=>A instanceof Ne?{...A}:A;function PA(A,e){e=e||{};const t={};function s(c,u,d,h){return F.isPlainObject(c)&&F.isPlainObject(u)?F.merge.call({caseless:h},c,u):F.isPlainObject(u)?F.merge({},u):F.isArray(u)?u.slice():u}function n(c,u,d,h){if(F.isUndefined(u)){if(!F.isUndefined(c))return s(void 0,c,d,h)}else return s(c,u,d,h)}function a(c,u){if(!F.isUndefined(u))return s(void 0,u)}function i(c,u){if(F.isUndefined(u)){if(!F.isUndefined(c))return s(void 0,c)}else return s(void 0,u)}function o(c,u,d){if(d in e)return s(c,u);if(d in A)return s(void 0,c)}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(c,u,d)=>n(Qo(c),Qo(u),d,!0)};return F.forEach(Object.keys(Object.assign({},A,e)),function(u){const d=l[u]||n,h=d(A[u],e[u],u);F.isUndefined(h)&&d!==o||(t[u]=h)}),t}const qc=A=>{const e=PA({},A);let{data:t,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:a,headers:i,auth:o}=e;e.headers=i=Ne.from(i),e.url=Vc(Xc(e.baseURL,e.url),A.params,A.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(F.isFormData(t)){if(be.hasStandardBrowserEnv||be.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((l=i.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];i.setContentType([c||"multipart/form-data",...u].join("; "))}}if(be.hasStandardBrowserEnv&&(s&&F.isFunction(s)&&(s=s(e)),s||s!==!1&&Xx(e.url))){const c=n&&a&&qx.read(a);c&&i.set(n,c)}return e},Zx=typeof XMLHttpRequest<"u",ey=Zx&&function(A){return new Promise(function(t,s){const n=qc(A);let a=n.data;const i=Ne.from(n.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=n,u,d,h,f,m;function B(){f&&f(),m&&m(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout;function p(){if(!g)return;const N=Ne.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),v={data:!o||o==="text"||o==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:N,config:A,request:g};Wc(function(E){t(E),B()},function(E){s(E),B()},v),g=null}"onloadend"in g?g.onloadend=p:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(p)},g.onabort=function(){g&&(s(new $("Request aborted",$.ECONNABORTED,A,g)),g=null)},g.onerror=function(){s(new $("Network Error",$.ERR_NETWORK,A,g)),g=null},g.ontimeout=function(){let Q=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const v=n.transitional||Gc;n.timeoutErrorMessage&&(Q=n.timeoutErrorMessage),s(new $(Q,v.clarifyTimeoutError?$.ETIMEDOUT:$.ECONNABORTED,A,g)),g=null},a===void 0&&i.setContentType(null),"setRequestHeader"in g&&F.forEach(i.toJSON(),function(Q,v){g.setRequestHeader(v,Q)}),F.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),o&&o!=="json"&&(g.responseType=n.responseType),c&&([h,m]=cr(c,!0),g.addEventListener("progress",h)),l&&g.upload&&([d,f]=cr(l),g.upload.addEventListener("progress",d),g.upload.addEventListener("loadend",f)),(n.cancelToken||n.signal)&&(u=N=>{g&&(s(!N||N.type?new wt(null,A,g):N),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const w=$x(n.url);if(w&&be.protocols.indexOf(w)===-1){s(new $("Unsupported protocol "+w+":",$.ERR_BAD_REQUEST,A));return}g.send(a||null)})},Ay=(A,e)=>{const{length:t}=A=A?A.filter(Boolean):[];if(e||t){let s=new AbortController,n;const a=function(c){if(!n){n=!0,o();const u=c instanceof Error?c:this.reason;s.abort(u instanceof $?u:new wt(u instanceof Error?u.message:u))}};let i=e&&setTimeout(()=>{i=null,a(new $(`timeout ${e} of ms exceeded`,$.ETIMEDOUT))},e);const o=()=>{A&&(i&&clearTimeout(i),i=null,A.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),A=null)};A.forEach(c=>c.addEventListener("abort",a));const{signal:l}=s;return l.unsubscribe=()=>F.asap(o),l}},ty=function*(A,e){let t=A.byteLength;if(t<e){yield A;return}let s=0,n;for(;s<t;)n=s+e,yield A.slice(s,n),s=n},sy=async function*(A,e){for await(const t of ry(A))yield*ty(t,e)},ry=async function*(A){if(A[Symbol.asyncIterator]){yield*A;return}const e=A.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},Uo=(A,e,t,s)=>{const n=sy(A,e);let a=0,i,o=l=>{i||(i=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await n.next();if(c){o(),l.close();return}let d=u.byteLength;if(t){let h=a+=d;t(h)}l.enqueue(new Uint8Array(u))}catch(c){throw o(c),c}},cancel(l){return o(l),n.return()}},{highWaterMark:2})},Lr=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",zc=Lr&&typeof ReadableStream=="function",ny=Lr&&(typeof TextEncoder=="function"?(A=>e=>A.encode(e))(new TextEncoder):async A=>new Uint8Array(await new Response(A).arrayBuffer())),Yc=(A,...e)=>{try{return!!A(...e)}catch{return!1}},ay=zc&&Yc(()=>{let A=!1;const e=new Request(be.origin,{body:new ReadableStream,method:"POST",get duplex(){return A=!0,"half"}}).headers.has("Content-Type");return A&&!e}),Fo=64*1024,ra=zc&&Yc(()=>F.isReadableStream(new Response("").body)),ur={stream:ra&&(A=>A.body)};Lr&&(A=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ur[e]&&(ur[e]=F.isFunction(A[e])?t=>t[e]():(t,s)=>{throw new $(`Response type '${e}' is not supported`,$.ERR_NOT_SUPPORT,s)})})})(new Response);const iy=async A=>{if(A==null)return 0;if(F.isBlob(A))return A.size;if(F.isSpecCompliantForm(A))return(await new Request(be.origin,{method:"POST",body:A}).arrayBuffer()).byteLength;if(F.isArrayBufferView(A)||F.isArrayBuffer(A))return A.byteLength;if(F.isURLSearchParams(A)&&(A=A+""),F.isString(A))return(await ny(A)).byteLength},oy=async(A,e)=>{const t=F.toFiniteNumber(A.getContentLength());return t??iy(e)},ly=Lr&&(async A=>{let{url:e,method:t,data:s,signal:n,cancelToken:a,timeout:i,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=qc(A);c=c?(c+"").toLowerCase():"text";let f=Ay([n,a&&a.toAbortSignal()],i),m;const B=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&ay&&t!=="get"&&t!=="head"&&(g=await oy(u,s))!==0){let v=new Request(e,{method:"POST",body:s,duplex:"half"}),y;if(F.isFormData(s)&&(y=v.headers.get("content-type"))&&u.setContentType(y),v.body){const[E,b]=Co(g,cr(vo(l)));s=Uo(v.body,Fo,E,b)}}F.isString(d)||(d=d?"include":"omit");const p="credentials"in Request.prototype;m=new Request(e,{...h,signal:f,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:p?d:void 0});let w=await fetch(m);const N=ra&&(c==="stream"||c==="response");if(ra&&(o||N&&B)){const v={};["status","statusText","headers"].forEach(C=>{v[C]=w[C]});const y=F.toFiniteNumber(w.headers.get("content-length")),[E,b]=o&&Co(y,cr(vo(o),!0))||[];w=new Response(Uo(w.body,Fo,E,()=>{b&&b(),B&&B()}),v)}c=c||"text";let Q=await ur[F.findKey(ur,c)||"text"](w,A);return!N&&B&&B(),await new Promise((v,y)=>{Wc(v,y,{data:Q,headers:Ne.from(w.headers),status:w.status,statusText:w.statusText,config:A,request:m})})}catch(p){throw B&&B(),p&&p.name==="TypeError"&&/fetch/i.test(p.message)?Object.assign(new $("Network Error",$.ERR_NETWORK,A,m),{cause:p.cause||p}):$.from(p,p&&p.code,A,m)}}),na={http:vx,xhr:ey,fetch:ly};F.forEach(na,(A,e)=>{if(A){try{Object.defineProperty(A,"name",{value:e})}catch{}Object.defineProperty(A,"adapterName",{value:e})}});const Eo=A=>`- ${A}`,cy=A=>F.isFunction(A)||A===null||A===!1,Zc={getAdapter:A=>{A=F.isArray(A)?A:[A];const{length:e}=A;let t,s;const n={};for(let a=0;a<e;a++){t=A[a];let i;if(s=t,!cy(t)&&(s=na[(i=String(t)).toLowerCase()],s===void 0))throw new $(`Unknown adapter '${i}'`);if(s)break;n[i||"#"+a]=s}if(!s){const a=Object.entries(n).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let i=e?a.length>1?`since :
`+a.map(Eo).join(`
`):" "+Eo(a[0]):"as no adapter specified";throw new $("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return s},adapters:na};function xn(A){if(A.cancelToken&&A.cancelToken.throwIfRequested(),A.signal&&A.signal.aborted)throw new wt(null,A)}function No(A){return xn(A),A.headers=Ne.from(A.headers),A.data=wn.call(A,A.transformRequest),["post","put","patch"].indexOf(A.method)!==-1&&A.headers.setContentType("application/x-www-form-urlencoded",!1),Zc.getAdapter(A.adapter||os.adapter)(A).then(function(s){return xn(A),s.data=wn.call(A,A.transformResponse,s),s.headers=Ne.from(s.headers),s},function(s){return Jc(s)||(xn(A),s&&s.response&&(s.response.data=wn.call(A,A.transformResponse,s.response),s.response.headers=Ne.from(s.response.headers))),Promise.reject(s)})}const eu="1.7.9",Pr={};["object","boolean","number","function","string","symbol"].forEach((A,e)=>{Pr[A]=function(s){return typeof s===A||"a"+(e<1?"n ":" ")+A}});const jo={};Pr.transitional=function(e,t,s){function n(a,i){return"[Axios v"+eu+"] Transitional option '"+a+"'"+i+(s?". "+s:"")}return(a,i,o)=>{if(e===!1)throw new $(n(i," has been removed"+(t?" in "+t:"")),$.ERR_DEPRECATED);return t&&!jo[i]&&(jo[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,i,o):!0}};Pr.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function uy(A,e,t){if(typeof A!="object")throw new $("options must be an object",$.ERR_BAD_OPTION_VALUE);const s=Object.keys(A);let n=s.length;for(;n-- >0;){const a=s[n],i=e[a];if(i){const o=A[a],l=o===void 0||i(o,a,A);if(l!==!0)throw new $("option "+a+" must be "+l,$.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new $("Unknown option "+a,$.ERR_BAD_OPTION)}}const Xs={assertOptions:uy,validators:Pr},We=Xs.validators;class TA{constructor(e){this.defaults=e,this.interceptors={request:new yo,response:new yo}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const a=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=PA(this.defaults,t);const{transitional:s,paramsSerializer:n,headers:a}=t;s!==void 0&&Xs.assertOptions(s,{silentJSONParsing:We.transitional(We.boolean),forcedJSONParsing:We.transitional(We.boolean),clarifyTimeoutError:We.transitional(We.boolean)},!1),n!=null&&(F.isFunction(n)?t.paramsSerializer={serialize:n}:Xs.assertOptions(n,{encode:We.function,serialize:We.function},!0)),Xs.assertOptions(t,{baseUrl:We.spelling("baseURL"),withXsrfToken:We.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=a&&F.merge(a.common,a[t.method]);a&&F.forEach(["delete","get","head","post","put","patch","common"],m=>{delete a[m]}),t.headers=Ne.concat(i,a);const o=[];let l=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(t)===!1||(l=l&&B.synchronous,o.unshift(B.fulfilled,B.rejected))});const c=[];this.interceptors.response.forEach(function(B){c.push(B.fulfilled,B.rejected)});let u,d=0,h;if(!l){const m=[No.bind(this),void 0];for(m.unshift.apply(m,o),m.push.apply(m,c),h=m.length,u=Promise.resolve(t);d<h;)u=u.then(m[d++],m[d++]);return u}h=o.length;let f=t;for(d=0;d<h;){const m=o[d++],B=o[d++];try{f=m(f)}catch(g){B.call(this,g);break}}try{u=No.call(this,f)}catch(m){return Promise.reject(m)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=PA(this.defaults,e);const t=Xc(e.baseURL,e.url);return Vc(t,e.params,e.paramsSerializer)}}F.forEach(["delete","get","head","options"],function(e){TA.prototype[e]=function(t,s){return this.request(PA(s||{},{method:e,url:t,data:(s||{}).data}))}});F.forEach(["post","put","patch"],function(e){function t(s){return function(a,i,o){return this.request(PA(o||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}TA.prototype[e]=t(),TA.prototype[e+"Form"]=t(!0)});class La{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const s=this;this.promise.then(n=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](n);s._listeners=null}),this.promise.then=n=>{let a;const i=new Promise(o=>{s.subscribe(o),a=o}).then(n);return i.cancel=function(){s.unsubscribe(a)},i},e(function(a,i,o){s.reason||(s.reason=new wt(a,i,o),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new La(function(n){e=n}),cancel:e}}}function dy(A){return function(t){return A.apply(null,t)}}function hy(A){return F.isObject(A)&&A.isAxiosError===!0}const aa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(aa).forEach(([A,e])=>{aa[e]=A});function Au(A){const e=new TA(A),t=Sc(TA.prototype.request,e);return F.extend(t,TA.prototype,e,{allOwnKeys:!0}),F.extend(t,e,null,{allOwnKeys:!0}),t.create=function(n){return Au(PA(A,n))},t}const ae=Au(os);ae.Axios=TA;ae.CanceledError=wt;ae.CancelToken=La;ae.isCancel=Jc;ae.VERSION=eu;ae.toFormData=Tr;ae.AxiosError=$;ae.Cancel=ae.CanceledError;ae.all=function(e){return Promise.all(e)};ae.spread=dy;ae.isAxiosError=hy;ae.mergeConfig=PA;ae.AxiosHeaders=Ne;ae.formToJSON=A=>$c(F.isHTMLForm(A)?new FormData(A):A);ae.getAdapter=Zc.getAdapter;ae.HttpStatusCode=aa;ae.default=ae;const fy={0:1,45:5,90:4,"-45":2,"-90":3},my={0:1,10:2,15:22,20:11,25:12,30:3,35:13,40:4,45:14,50:6,60:5,90:7},gy=A=>A>0?1:2;function py(A){return Object.entries(fy).map(([s,n])=>({key:Number(s),value:n})).reduce((s,n)=>Math.abs(n.key-A)<Math.abs(s.key-A)?n:s).value}function By(A){return Object.entries(my).map(([s,n])=>({key:Number(s),value:n})).reduce((s,n)=>Math.abs(n.key-A)<Math.abs(s.key-A)?n:s).value}function wy(A,e,t){const s=py(A),n=By(e),a=gy(t);return{id_orientation_toit:String(s),id_inclinaison:String(n),masque_solaire:String(a)}}const jA=class jA{constructor(){MA(this,"baseUrl","https://abienergie.icoll.fr/api-v2");ae.defaults.timeout=3e4}static getInstance(){return jA.instance||(jA.instance=new jA),jA.instance}async getToken(){var e,t,s,n,a,i;try{const o=localStorage.getItem("icoll_token"),l=localStorage.getItem("icoll_token_expires");if(o&&l&&new Date(l)>new Date)return o;localStorage.removeItem("icoll_token"),localStorage.removeItem("icoll_token_expires");const c=await ae.post(`${this.baseUrl}/auth`,{username:"ilanl60",password:"rv5Z77*N$"},{headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!((s=(t=(e=c.data)==null?void 0:e.response)==null?void 0:t.data)!=null&&s.token))throw new Error("Token non reçu dans la réponse");const u=c.data.response.data.token,d=new Date;return d.setHours(d.getHours()+4),localStorage.setItem("icoll_token",u),localStorage.setItem("icoll_token_expires",d.toISOString()),u}catch(o){if(localStorage.removeItem("icoll_token"),localStorage.removeItem("icoll_token_expires"),ae.isAxiosError(o)){if(o.code==="ECONNABORTED")throw new Error("Délai d'attente dépassé");if(o.response){const l=((a=(n=o.response.data)==null?void 0:n.response)==null?void 0:a.message)||((i=o.response.data)==null?void 0:i.message);throw new Error(`Erreur ${o.response.status}: ${l||"Erreur serveur"}`)}if(o.request)throw new Error("Impossible de contacter le serveur")}throw new Error("Erreur d'authentification")}}async testConnection(){try{return!!await this.getToken()}catch(e){return console.error("Erreur lors du test de connexion:",e),!1}}async registerClientAndCreateQuote(e){var t,s,n,a,i,o,l,c,u,d;try{const h=await this.getToken(),f=e.orientation!==void 0&&e.inclinaison!==void 0&&e.masqueSolaire!==void 0?wy(e.orientation,e.inclinaison,e.masqueSolaire):void 0,m=await ae.post(`${this.baseUrl}/clients`,{clients:[{id_type_client:"PARTICULIER",sexe:e.civilite==="M"?"M":"F",nom:e.nom,prenom:e.prenom,adresse:e.adresse,cp:e.codePostal,ville:e.ville,tel_1:e.telephone,email:e.email,origine_client:"Simulateur",package:e.package,id_commercial:e.commercialId,...f}]},{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json",Accept:"application/json"}});if(!((a=(n=(s=(t=m.data)==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n[0])!=null&&a.id))throw new Error("ID client non reçu");const B=m.data.response.data[0].id,g=await ae.post(`${this.baseUrl}/devis`,{devis:[{id_client:B,id_commercial:e.commercialId,id_package:e.package,revenu_fiscal:e.revenuFiscal}]},{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json",Accept:"application/json"}});if(!((l=(o=(i=g.data)==null?void 0:i.response)==null?void 0:o.data)!=null&&l.devisId))throw new Error("ID devis non reçu");return{clientId:B,quoteId:g.data.response.data.devisId,pdfUrl:g.data.response.data.filePath,quoteUrl:`https://abienergie.icoll.fr/devis/${g.data.response.data.devisId}`}}catch(h){if(ae.isAxiosError(h)){if(h.code==="ECONNABORTED")throw new Error("Délai d'attente dépassé");if(h.response){const f=((u=(c=h.response.data)==null?void 0:c.response)==null?void 0:u.message)||((d=h.response.data)==null?void 0:d.message);throw new Error(`Erreur ${h.response.status}: ${f||"Erreur serveur"}`)}if(h.request)throw new Error("Impossible de contacter le serveur")}throw new Error("Erreur lors de la création du client")}}getIcollLoginUrl(e,t,s){const n=new URLSearchParams({redirect:s?"devis":"import",clientId:e.toString(),commercialId:t});return s&&n.append("devisId",s.toString()),`https://abienergie.icoll.fr/login?${n.toString()}`}};MA(jA,"instance");let ia=jA;const oa=ia.getInstance(),vA={"2.5":{10:"44",15:"42",20:"43",25:"27"},"3.0":{10:"46",15:"45",20:"28",25:"47"},"3.5":{10:"50",15:"49",20:"48",25:"29"},"4.0":{10:"53",15:"52",20:"51",25:"30"},"4.5":{10:"56",15:"55",20:"31",25:"54"},"5.0":{10:"59",15:"58",20:"57",25:"19"},"5.5":{10:"62",15:"61",20:"60",25:"32"},"6.0":{10:"65",15:"64",20:"63",25:"33"},"6.5":{10:"68",15:"67",20:"66",25:"34"},"7.0":{10:"71",15:"70",20:"69",25:"35"},"7.5":{10:"74",15:"73",20:"72",25:"36"},"8.0":{10:"77",15:"76",20:"75",25:"37"},"8.5":{10:"80",15:"79",20:"78",25:"38"},"9.0":{10:"81",15:"41",20:"40",25:"39"}};function xy(A,e){const t=Math.round(A*2)/2,s=t.toFixed(1);let n=20;if(e<=10?n=10:e<=15?n=15:e<=20?n=20:n=25,vA[s]&&vA[s][n]){const i=vA[s][n];return console.log(`Package ID pour ${s} kWc et ${n} ans: ${i}`),i}const a=Object.keys(vA).map(Number);if(a.length>0){const o=a.reduce((l,c)=>Math.abs(c-t)<Math.abs(l-t)?c:l).toFixed(1);if(vA[o]&&vA[o][n]){const l=vA[o][n];return console.log(`Utilisation du package le plus proche: ${o} kWc et ${n} ans: ${l}`),l}}return console.warn(`Pas de mapping trouvé pour ${s} kWc et ${n} ans, utilisation du package par défaut`),"44"}const Io=[{icon:ct,title:"Réponse sous 48H",duration:"2 jours",description:"Étude initiale de votre dossier"},{icon:uf,title:"Étude technique",duration:"15 jours",description:"Analyse détaillée et dimensionnement"},{icon:dA,title:"Démarches",duration:"30 jours",description:"Autorisations administratives"},{icon:bl,title:"Installation",duration:"45 jours",description:"Pose et mise en service"},{icon:tf,title:"Monitoring",duration:"Permanent",description:"Suivi de production et maintenance"}];function yy(){ft();const{clientInfo:A,address:e,updateClientInfo:t}=sA(),{params:s}=Qa(),{parameters:n}=Ha(),[a,i]=x.useState(""),[o,l]=x.useState(null),[c,u]=x.useState(null),[d,h]=x.useState([]),[f,m]=x.useState(null),[B,g]=x.useState(!1),[p,w]=x.useState(!1),[N,Q]=x.useState(""),[v,y]=x.useState([]),[E,b]=x.useState(""),[C,U]=x.useState(null),j=x.useCallback(()=>{const P=[];A.civilite||P.push("Civilité manquante"),A.nom||P.push("Nom manquant"),A.prenom||P.push("Prénom manquant"),A.telephone||P.push("Téléphone manquant"),A.email||P.push("Email manquant");const z=!!(A.adresse&&A.codePostal&&A.ville),Z=!!(e.rue&&e.codePostal&&e.ville);return!z&&!Z&&(!e.rue&&!A.adresse&&P.push("Adresse manquante"),!e.codePostal&&!A.codePostal&&P.push("Code postal manquant"),!e.ville&&!A.ville&&P.push("Ville manquante")),y(P),P.length===0},[A,e]);x.useEffect(()=>{j()},[A,e,j]);const O=P=>{const z=P.target.value.replace(/\D/g,"").slice(0,14);i(z)},_=P=>{const z=P.target.value;b(z),localStorage.setItem("commercial_id",z)},R=P=>z=>{var ee;const Z=(ee=z.target.files)==null?void 0:ee[0];if(Z){if(Z.size>10*1024*1024){m("Le fichier est trop volumineux. Taille maximum : 10MB");return}P==="tax"?l(Z):u(Z),m(null)}},I=P=>{const ee=Array.from(P.target.files||[]).filter(se=>se.size>10*1024*1024?(m("Une photo est trop volumineuse. Taille maximum : 10MB"),!1):!0).map(se=>({id:Math.random().toString(36).substring(2,9),file:se}));h(se=>[...se,...ee]),m(null)},D=P=>{h(z=>z.filter(Z=>Z.id!==P))},M=()=>{t({adresse:e.rue,codePostal:e.codePostal,ville:e.ville}),setTimeout(()=>{if(!j()){m("Informations client incomplètes. Veuillez remplir tous les champs obligatoires.");return}if(!E){m("Veuillez saisir l'ID du chargé d'affaire.");return}g(!0),m(null)},100)},te=async()=>{try{if(w(!0),m(null),t({adresse:e.rue,codePostal:e.codePostal,ville:e.ville}),await new Promise(de=>setTimeout(de,100)),!j()){m("Informations client incomplètes. Veuillez remplir tous les champs obligatoires."),w(!1);return}if(!E){m("Veuillez saisir l'ID du chargé d'affaire."),w(!1);return}Q("Préparation des données...");const P=s.nombreModules*s.puissanceModules/1e3,z=n.dureeAbonnement||20,Z=xy(P,z),ee={civilite:A.civilite,nom:A.nom,prenom:A.prenom,adresse:e.rue||A.adresse||"",codePostal:e.codePostal||A.codePostal||"",ville:e.ville||A.ville||"",telephone:A.telephone,email:A.email,pdl:a,package:Z,commercialId:E,orientation:s.orientation,inclinaison:s.inclinaison,masqueSolaire:s.masqueSolaire,revenuFiscal:localStorage.getItem("revenuFiscal")||void 0};Q("Création du dossier...");const se=await oa.registerClientAndCreateQuote(ee);U(se),se.pdfUrl&&localStorage.setItem("quote_pdf_url",se.pdfUrl),Q("Redirection vers iColl..."),window.location.href=oa.getIcollLoginUrl(se.clientId,E,se.quoteId)}catch(P){console.error("Erreur:",P),m(P instanceof Error?P.message:"Une erreur est survenue"),w(!1),g(!1)}},ue=()=>{const P=(C==null?void 0:C.pdfUrl)||localStorage.getItem("quote_pdf_url");P&&window.open(P,"_blank")};return r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs(it,{to:"/projection",className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[r.jsx(Ba,{className:"h-4 w-4 mr-1"}),"Retour à la projection financière"]})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Vérification d'éligibilité"}),v.length>0&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ye,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-700",children:"Informations client incomplètes"}),r.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Veuillez compléter les informations suivantes dans les étapes précédentes :"}),r.jsx("ul",{className:"text-sm text-red-600 mt-1 list-disc list-inside",children:v.map((P,z)=>r.jsx("li",{children:P},z))})]})]})}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Étapes de votre installation"}),r.jsx("div",{className:"relative flex justify-between",children:Io.map((P,z)=>r.jsxs("div",{className:"relative flex flex-col items-center w-32",children:[z<Io.length-1&&r.jsx("div",{className:"absolute w-full h-[2px] top-7 left-[50%] bg-blue-200",style:{width:"calc(200% - 2rem)"}}),r.jsx("div",{className:"relative z-10 flex items-center justify-center w-14 h-14 bg-white rounded-full border-2 border-blue-500",children:r.jsx(P.icon,{className:"h-6 w-6 text-blue-500"})}),r.jsxs("div",{className:"mt-3 text-center",children:[r.jsx("span",{className:"inline-block px-3 py-1 bg-blue-50 text-blue-700 text-sm font-medium rounded-full mb-2",children:P.duration}),r.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.title}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:P.description})]})]},z))})]}),r.jsxs("div",{className:"space-y-6 mt-8",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Numéro PDL (Point De Livraison)",r.jsxs("div",{className:"relative inline-block ml-2 group",children:[r.jsx(ye,{className:"h-4 w-4 text-gray-400 cursor-help"}),r.jsxs("div",{className:"absolute z-10 invisible group-hover:visible bg-gray-900 text-white text-sm rounded-lg py-2 px-3 w-72 bottom-full left-1/2 -translate-x-1/2 mb-2",children:[r.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"}),"Le numéro PDL (Point De Livraison) est un identifiant unique de 14 chiffres qui se trouve sur votre facture d'électricité et sur votre compteur Linky."]})]})]}),r.jsx("input",{type:"text",value:a,onChange:O,placeholder:"14 chiffres",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",maxLength:14})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["ID du chargé d'affaire",r.jsxs("div",{className:"relative inline-block ml-2 group",children:[r.jsx(ye,{className:"h-4 w-4 text-gray-400 cursor-help"}),r.jsxs("div",{className:"absolute z-10 invisible group-hover:visible bg-gray-900 text-white text-sm rounded-lg py-2 px-3 w-72 bottom-full left-1/2 -translate-x-1/2 mb-2",children:[r.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"}),"L'identifiant du chargé d'affaire qui gère ce dossier. Cet ID est nécessaire pour associer le client au bon chargé d'affaire dans iColl."]})]})]}),r.jsxs("div",{className:"relative mt-1",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ca,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",value:E,onChange:_,placeholder:"ID du chargé d'affaire",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Avis d'imposition"}),r.jsxs("div",{className:`relative flex items-center justify-center p-6 border-2 border-dashed rounded-lg transition-colors ${o?"border-green-300 bg-green-50":"border-gray-300 hover:border-blue-500 bg-gray-50"}`,children:[r.jsx("input",{type:"file",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:R("tax"),id:"tax-file"}),r.jsx("label",{htmlFor:"tax-file",className:"cursor-pointer text-center",children:o?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dA,{className:"h-5 w-5 text-green-500"}),r.jsx("span",{className:"text-green-700",children:o.name})]}):r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(Pt,{className:"h-8 w-8 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:"Cliquez pour sélectionner votre avis d'imposition"})]})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pièce d'identité"}),r.jsxs("div",{className:`relative flex items-center justify-center p-6 border-2 border-dashed rounded-lg transition-colors ${c?"border-green-300 bg-green-50":"border-gray-300 hover:border-blue-500 bg-gray-50"}`,children:[r.jsx("input",{type:"file",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:R("id"),id:"id-file"}),r.jsx("label",{htmlFor:"id-file",className:"cursor-pointer text-center",children:c?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dA,{className:"h-5 w-5 text-green-500"}),r.jsx("span",{className:"text-green-700",children:c.name})]}):r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(Pt,{className:"h-8 w-8 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:"Cliquez pour sélectionner votre pièce d'identité"})]})})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Photos de l'environnement",r.jsxs("div",{className:"relative inline-block ml-2 group",children:[r.jsx(ye,{className:"h-4 w-4 text-gray-400 cursor-help"}),r.jsxs("div",{className:"absolute z-10 invisible group-hover:visible bg-gray-900 text-white text-sm rounded-lg py-2 px-3 w-80 bottom-full left-1/2 -translate-x-1/2 mb-2",children:[r.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"}),"Nous avons besoin de photos de : • Votre toit à équiper • L'environnement proche (arbres, bâtiments) • Les éventuels masques solaires (ombres portées)"]})]})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:d.map(P=>r.jsx("div",{className:"relative bg-gray-50 p-3 rounded-lg border border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dA,{className:"h-5 w-5 text-gray-400"}),r.jsx("span",{className:"text-sm text-gray-600 truncate",children:P.file.name})]}),r.jsx("button",{type:"button",onClick:()=>D(P.id),className:"p-1 hover:bg-gray-200 rounded-full transition-colors",children:r.jsx(ye,{className:"h-4 w-4 text-gray-500"})})]})},P.id))}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("label",{className:"relative cursor-pointer",children:[r.jsx("input",{type:"file",className:"hidden",accept:"image/*",multiple:!0,onChange:I}),r.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[r.jsx(Pt,{className:"h-5 w-5 text-gray-600"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Ajouter des photos"})]})]})})]})]}),f&&r.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ye,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("div",{className:"text-sm text-red-600",children:f})]})}),r.jsx("div",{className:"flex justify-center mt-8",children:r.jsx("button",{onClick:M,disabled:v.length>0||!E,className:`px-6 py-3 rounded-lg shadow focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors ${v.length>0||!E?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"Valider mon dossier"})})]}),B&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full overflow-hidden shadow-xl",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"w-1/2",children:r.jsx("img",{src:"https://i.ibb.co/GQr7gmd/maison-panneaux-solaires-toit.jpg",alt:"Maison avec panneaux solaires",className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"w-1/2 p-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Félicitations !"}),r.jsx("div",{className:"text-gray-600 mb-4",children:"Bienvenue dans le monde de demain ! Vous venez de faire le premier pas vers une énergie plus propre et plus économique."}),r.jsx("div",{className:"text-gray-600 mb-6",children:"Notre équipe va étudier votre dossier et vous recevrez votre contrat d'abonnement sous 48H."}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:te,disabled:p,className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-wait",children:p?r.jsxs(r.Fragment,{children:[r.jsx(ut,{className:"h-5 w-5 animate-spin"}),N||"Préparation en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ml,{className:"h-5 w-5"}),"Continuer sur iColl"]})}),r.jsxs("button",{onClick:ue,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[r.jsx(dA,{className:"h-5 w-5"}),"Télécharger le devis"]}),r.jsx("button",{onClick:()=>g(!1),className:"w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Fermer"})]})]})]})})})]})}const by=[{title:"Un contrat flexible",icon:dA,color:"blue",points:["Résiliation possible dès la 5ème année","Transfert gratuit en cas de vente","Évolution possible de l'installation"]},{title:"Service premium",icon:Zh,color:"purple",points:["Service client basé en France","Accompagnement personnalisé","Suivi de production en temps réel"]},{title:"Garanties complètes",icon:Ca,color:"green",points:["Maintenance gratuite jusqu'à 25 ans","Matériel garanti 30 ans","Assurance tous risques incluse"]},{title:"Haute performance",icon:Pt,color:"orange",points:["Panneaux dernière génération","Micro-onduleurs optimisés","Monitoring avancé"]},{title:"Financement simplifié",icon:ya,color:"indigo",points:["Sans apport initial","Pas de crédit bancaire","Réponse sous 48h"]},{title:"Engagement durable",icon:Bl,color:"emerald",points:["Entreprise à mission","Transition énergétique","Production locale"]}];function Cy(){return r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Avantages de l'abonnement"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:by.map(A=>r.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow duration-300",children:r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg bg-${A.color}-50`,children:r.jsx(A.icon,{className:`h-6 w-6 text-${A.color}-500`})}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:A.title})]}),r.jsx("ul",{className:"space-y-3",children:A.points.map(e=>r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Ys,{className:`h-5 w-5 text-${A.color}-500 flex-shrink-0 mt-0.5`}),r.jsx("span",{className:"text-gray-600",children:e})]},e))})]})},A.title))}),r.jsxs("div",{className:"mt-8 bg-blue-50 p-6 rounded-xl text-center",children:[r.jsx("p",{className:"text-lg font-medium text-blue-900",children:"Rejoignez les 100 000 premiers foyers abonnés !"}),r.jsx("p",{className:"mt-2 text-blue-700",children:"Profitez d'une installation solaire clé en main sans investissement initial"})]})]})}const So=[{puissance:"2.5",mensualites:[49,51.6,56.4,67.2],remboursements:[["-",5269,5197,5108,5028,4978,4931,4910,4876,4827,4761,4675,4567,4433,4271,4076,3843,3569,3246,2870,2432,1924,1338,662,0],["-",5190,5071,4930,4937,4747,4685,4594,4476,4327,4144,3920,3649,3327,2944,2492,1961,1342,620,0],["-",5043,4916,4818,4636,4430,4191,3979,3721,3412,3044,2608,2095,775,0],["-",4714,4463,4164,3755,3387,2748,1893,863,0]]},{puissance:"3.0",mensualites:[59,63.6,73.2,86.4],remboursements:[["-",6951,6917,6855,6767,6625,6365,6251,6121,5971,5801,5608,5391,5148,4876,4572,4234,3860,3445,2988,2484,1929,1320,653,0],["-",6821,6711,6564,6382,6233,6054,5859,5633,5374,5077,4739,4356,3922,3432,2880,2260,1564,784,0],["-",6548,6280,6041,5760,5434,5055,4634,4154,3608,2989,2288,1495,1e3,0],["-",5982,5495,4942,4316,3609,2813,1930,1103,0]]},{puissance:"3.5",mensualites:[68.5,72,80.4,97.2],remboursements:[["-",7684,7619,7568,7471,7349,7227,7151,7055,6937,6794,6624,6423,6189,5917,5603,5244,4833,4366,3836,3236,2560,1799,944,0],["-",7582,7458,7339,7168,6962,6746,6558,6335,6073,5768,5413,5004,4534,3996,3382,2683,1889,989,0],["-",7192,7070,6915,6725,6493,6023,5608,5114,4530,3847,3051,2129,1068,0],["-",6641,6189,5663,5054,4351,3333,2352,1232,0]]},{puissance:"4.0",mensualites:[78,83,91,107],remboursements:[["-",8440,8346,8300,8194,8140,8064,7980,7874,7744,7586,7399,7178,6919,6620,6274,5878,5426,4912,4330,3671,2928,2093,1156,0],["-",8301,8125,7987,7778,7665,7469,7252,6997,6699,6353,5953,5493,4965,4363,3677,2896,2012,1010,0],["-",7977,7814,7612,7365,7068,6502,6062,5551,4963,4288,3514,2629,1251,0],["-",7452,6976,6421,5777,5033,3940,2935,1368,0]]},{puissance:"4.5",mensualites:[87,92,102,120],remboursements:[["-",9285,9165,9097,9065,9012,8850,8750,8624,8472,8290,8073,7820,7525,7185,6795,6348,5840,5265,4614,3880,3056,2131,1096,0],["-",9050,8879,8770,8629,8451,8232,7993,7711,7382,7e3,6559,6052,5471,4808,4052,3194,2222,1120,0],["-",8762,8559,8308,8005,7642,7058,6545,5952,5269,4485,3587,2560,1400,0],["-",8093,7496,6805,6009,5095,4049,2875,1538,0]]},{puissance:"5.0",mensualites:[96,100.8,111.6,134.4],remboursements:[["-",10322,10262,10178,10111,10065,9994,9906,9789,9641,9457,9233,8965,8647,8272,7835,7329,6744,6072,5302,4424,3424,2289,1002,0],["-",10183,10041,9864,9692,9527,9321,9075,8778,8426,8010,7523,6955,6299,5541,4670,3672,2531,1231,0],["-",9870,9543,9158,8750,8316,7807,7235,6576,5817,4948,3955,2821,1530,0],["-",9098,8492,7784,6959,6004,4827,3390,1724,0]]},{puissance:"5.5",mensualites:[105.5,111.6,122.4,144],remboursements:[["-",11283,11205,11074,10933,10860,10756,10641,10496,10317,10100,9841,9535,9177,8761,8281,7730,7099,6380,5564,4639,3595,2418,1094,0],["-",11106,10923,10674,10400,10176,9901,9606,9261,8859,8395,7861,7249,6550,5754,4850,3825,2667,1358,0],["-",10727,10490,10152,9760,9345,8387,7762,7047,6231,5301,4243,3042,1679,0],["-",9999,9392,8680,7848,6881,4815,3421,1845,0]]},{puissance:"6.0",mensualites:[115,120,130.8,153.6],remboursements:[["-",12342,12090,11922,11780,11626,11506,11377,11216,11019,10781,10498,10166,9778,9329,8812,8220,7544,6776,5906,4924,3817,2573,1177,0],["-",12194,11857,11592,11340,11147,10905,10620,10276,9867,9384,8817,8157,7391,6507,5489,4321,2985,1460,0],["-",11875,11535,11386,11190,10679,10091,9451,8665,7712,6573,5224,3640,1794,0],["-",11090,10463,9608,8805,7489,6139,4415,2400,0]]},{puissance:"6.5",mensualites:[124,129.6,142.8,165.6],remboursements:[["-",12885,12724,12661,12550,12429,12116,11983,11816,11610,11362,11066,10717,10310,9838,9294,8670,7958,7148,6230,5193,4025,2713,1242,0],["-",12347,12306,12232,12121,11968,11425,11122,10759,10328,9820,9227,8536,7737,6816,5756,4541,3152,1567,0],["-",12208,11880,11615,11285,10879,9842,9156,8353,7418,6332,5077,3629,1963,0],["-",11305,10628,9828,8889,7793,5694,4032,2124,0]]},{puissance:"7.0",mensualites:[132,138,150,174],remboursements:[["-",13300,13214,13093,12838,12620,12432,12250,12033,11776,11476,11128,10729,10272,9752,9165,8505,7765,6939,6021,5005,3884,2652,1303,0],["-",13124,12933,12692,12303,11933,11570,11206,10784,10298,9742,9109,8388,7572,6650,5611,4442,3131,1663,0],["-",12670,12291,11946,11524,11014,9958,9226,8388,7430,6336,5090,3673,2062,0],["-",11703,10910,9983,8904,7654,6118,4314,2231,0]]},{puissance:"7.5",mensualites:[140,146.4,159.6,178.8],remboursements:[["-",13790,13639,13534,13482,13393,13262,13124,12949,12731,12466,12149,11773,11332,10818,10225,9542,8761,7872,6861,5718,4429,2979,1353,0],["-",13602,13339,13164,12983,12746,12446,12116,11722,11254,10703,10060,9311,8445,7446,6297,4980,3474,1755,0],["-",13109,12843,12507,12092,11585,10973,10241,9371,8346,7143,5736,4099,2197,0],["-",12040,11159,10139,8961,7608,6059,4320,2291,0]]},{puissance:"8.0",mensualites:[149,156,169.2,192],remboursements:[["-",14529,14437,14274,14092,13783,13590,13405,13179,12909,12591,12220,11790,11295,10731,10090,9367,8553,7644,6630,5506,4265,2902,1411,0],["-",14321,14149,13861,13620,13383,13079,12744,12341,11860,11291,10622,9842,8936,7887,6676,5284,3688,1860,0],["-",13846,13563,13145,12651,12120,11477,10716,9813,8746,7493,6028,4319,2331,0],["-",12615,11701,10634,9394,7960,6204,4450,2464,0]]},{puissance:"8.5",mensualites:[158,164.4,177.6,200.4],remboursements:[["-",15135,14980,14710,14461,14292,14067,13855,13601,13300,12949,12543,12075,11542,10938,10257,9494,8643,7699,6657,5514,4268,2918,1466,0],["-",14945,14815,14668,14484,14313,13115,12702,12224,11673,11043,10324,9508,8584,7542,6370,5057,3589,1954,0],["-",14407,14092,13632,13090,12505,11153,10326,9387,8321,7112,5744,4196,2448,0],["-",13151,12196,11080,9784,8284,6449,4629,2572,0]]},{puissance:"9.0",mensualites:[167,174,189.6,206.4],remboursements:[["-",15706,15619,15524,15362,15179,14745,14554,14320,14038,13702,13309,12850,12322,11717,11029,10250,9375,8395,7305,6099,4771,3318,1739,0],["-",15496,15282,15040,14710,14334,13683,13269,12785,12225,11579,10839,9994,9034,7946,6718,5336,3786,2054,0],["-",14880,14625,14292,13868,13339,12689,11892,10930,9779,8408,6785,4870,2618,0],["-",14322,13722,12990,12104,11043,9395,6330,2648,0]]}];function vy({data:A}){const e=["25 ans","20 ans","15 ans","10 ans"],t=Array.from({length:25},(s,n)=>n+1);return r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsxs("caption",{className:"text-lg font-semibold py-2",children:["Puissance Crête : ",A.puissance," kWc"]}),r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durée"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mensualité"}),t.map(s=>r.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:s},s))]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((s,n)=>r.jsxs("tr",{className:n%2===0?"bg-white":"bg-gray-50",children:[r.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900",children:s}),r.jsxs("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-900",children:[A.mensualites[n].toFixed(2)," €"]}),A.remboursements[n].map((a,i)=>r.jsx("td",{className:`px-3 py-4 whitespace-nowrap text-sm text-right ${i<5?"bg-gray-100 text-gray-400":"text-gray-900"}`,children:a===0||a==="-"?"-":`${a} €`},i))]},n))})]})})}const Qy=5;function Uy(){return r.jsxs("div",{className:"mt-6 space-y-4",children:[r.jsx("div",{className:"bg-amber-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsxs("p",{className:"text-sm text-amber-800",children:["Les ",Qy," premières années sont grisées car elles correspondent à la période d'engagement minimum. Aucune sortie n'est possible pendant cette période"]}),r.jsxs("div",{className:"relative group",children:[r.jsx(xr,{className:"h-4 w-4 text-amber-600 cursor-help flex-shrink-0"}),r.jsxs("div",{className:"absolute z-10 invisible group-hover:visible bg-gray-900 text-white text-sm rounded-lg py-2 px-3 w-80 -right-2 top-6",children:[r.jsx("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-gray-900 rotate-45"}),r.jsx("p",{className:"font-medium mb-1",children:"Cas particuliers de sortie anticipée :"}),r.jsxs("ul",{className:"space-y-1",children:[r.jsx("li",{children:"• Décès du souscripteur"}),r.jsx("li",{children:"• Divorce ou dissolution de PACS"}),r.jsx("li",{children:"• Déménagement hors zone de couverture"})]}),r.jsx("p",{className:"mt-2 text-xs text-gray-300",children:"Ces situations font l'objet d'une étude au cas par cas et peuvent permettre une sortie anticipée sans pénalités."})]})]})]})}),r.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-800",children:"Les valeurs indiquées correspondent aux montants à verser pour sortir du contrat à la date anniversaire de l'année correspondante. Ces montants sont garantis et incluent la TVA."})})]})}function Fy(){const[A,e]=x.useState(0);return r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Modalités de sortie"}),r.jsx("div",{className:"flex justify-end mb-4",children:r.jsx("select",{value:A,onChange:t=>e(Number(t.target.value)),className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:So.map((t,s)=>r.jsxs("option",{value:s,children:[t.puissance," kWc"]},t.puissance))})}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsx(vy,{data:So[A]})}),r.jsx(Uy,{})]})}const IA=class IA{constructor(){MA(this,"accessToken",null);MA(this,"config",{clientId:"Y_LuB7HsQW3JWYudw7HRmN28FN8a",clientSecret:"Pb9H1p8zJ4IfX0xca5c7lficGo4a",redirectUri:"https://abienergie.github.io/Simulator/#/oauth/callback",authUrl:"https://mon-compte-particulier.enedis.fr/dataconnect/v1/oauth2/authorize",tokenUrl:"https://gw.hml.api.enedis.fr/oauth2/v3/token",apiUrl:"https://gw.hml.api.enedis.fr/v5/metering_data",scope:"fr_be_cons_detail_load_curve"});this.accessToken=localStorage.getItem("enedis_access_token"),console.log("Token récupéré du localStorage:",this.accessToken?"Présent":"Absent"),console.log("URL de redirection configurée:",this.config.redirectUri)}static getInstance(){return IA.instance||(IA.instance=new IA),IA.instance}async initiateAuth(){const e=new URLSearchParams({response_type:"code",client_id:this.config.clientId,duration:"P1Y",state:"AbieLink1"});return`${this.config.authUrl}?${e.toString()}`}async handleCallback(e){try{console.log("Échange du code contre un token...");const t=new URLSearchParams;t.append("grant_type","authorization_code"),t.append("client_id",this.config.clientId),t.append("client_secret",this.config.clientSecret),t.append("code",e),t.append("redirect_uri",this.config.redirectUri),console.log("Envoi de la requête au endpoint token:",this.config.tokenUrl),console.log("Paramètres:",{grant_type:"authorization_code",client_id:this.config.clientId,client_secret:"***",redirect_uri:this.config.redirectUri});const s=await fetch(this.config.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:t.toString()});if(console.log("Réponse reçue, status:",s.status),!s.ok){const i=await s.text();console.error("Erreur réponse token:",i);try{const o=JSON.parse(i);throw new Error(o.error_description||"Échec de l'échange du token")}catch{throw new Error(`Échec de l'échange du token: ${s.status} ${s.statusText}`)}}const n=await s.json();console.log("Token reçu avec succès, expires_in:",n.expires_in),localStorage.setItem("enedis_access_token",n.access_token),n.refresh_token&&localStorage.setItem("enedis_refresh_token",n.refresh_token);const a=new Date;a.setSeconds(a.getSeconds()+n.expires_in),localStorage.setItem("enedis_token_expires",a.toISOString()),this.accessToken=n.access_token,console.log("Token Enedis stocké avec succès")}catch(t){throw console.error("Erreur détaillée dans handleCallback:",t),t}}async testConnection(e){try{console.log("Test de connexion pour le PDL:",e);const t=await this.getValidToken();if(!t)return console.log("Pas de token valide disponible"),!1;const s=new Date().toISOString().split("T")[0],n=new Date;n.setDate(n.getDate()-7);const a=`${this.config.apiUrl}/daily_consumption?usage_point_id=${e}&start=${n.toISOString().split("T")[0]}&end=${s}`;console.log("URL de test:",a);const i=await fetch(a,{headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}});return console.log("Réponse du test de connexion:",i.status),i.ok}catch(t){return console.error("Erreur lors du test de connexion:",t),!1}}async getConsumptionData(e,t,s){var n;try{console.log("Récupération des données de consommation pour le PDL:",e);const a=await this.getValidToken();if(!a)throw console.error("Pas de token valide disponible"),new Error("Non authentifié");if(console.log("Récupération des données de consommation réelles..."),!t){const h=new Date;h.setFullYear(h.getFullYear()-1),t=h.toISOString().split("T")[0]}if(!s){const h=new Date;h.setDate(h.getDate()+1),s=h.toISOString().split("T")[0]}console.log(`PDL: ${e}, Période: ${t} à ${s}`);const i=`${this.config.apiUrl}/daily_consumption?usage_point_id=${e}&start=${t}&end=${s}`;console.log("URL de récupération des données:",i),console.log("Envoi de la requête avec token:",a.substring(0,10)+"...");const o="",l=o?`${o}${encodeURIComponent(i)}`:i,c=await fetch(l,{method:"GET",headers:{Authorization:`Bearer ${a}`,Accept:"application/json"}});if(console.log("Réponse reçue, status:",c.status),!c.ok){const h=await c.text();if(console.error("Erreur API:",c.status,h),c.status===401){console.log("Token expiré, tentative de rafraîchissement");const f=localStorage.getItem("enedis_refresh_token");if(f)return await this.refreshToken(f),this.getConsumptionData(e,t,s)}throw new Error(`Erreur API Enedis: ${c.status}`)}const u=await c.json();if(console.log("Données reçues:",u),localStorage.setItem("enedis_raw_response",JSON.stringify(u)),!((n=u==null?void 0:u.meter_reading)!=null&&n.interval_reading))throw console.error("Format de données invalide:",u),new Error("Format de données invalide");const d=this.formatConsumptionData(u,e);return{rawResponse:u,...d}}catch(a){throw console.error("Erreur lors de la récupération des données:",a),a}}async getValidToken(){if(this.accessToken)return console.log("Utilisation du token en mémoire"),this.accessToken;const e=localStorage.getItem("enedis_access_token"),t=localStorage.getItem("enedis_token_expires");if(!e||!t)return console.log("Pas de token dans le localStorage"),null;if(console.log("Token trouvé dans le localStorage, expiration:",t),new Date(t)<=new Date){console.log("Token expiré, tentative de rafraîchissement");const s=localStorage.getItem("enedis_refresh_token");if(s)try{return await this.refreshToken(s),localStorage.getItem("enedis_access_token")}catch(n){return console.error("Erreur refresh token:",n),null}return null}return this.accessToken=e,e}async refreshToken(e){console.log("Rafraîchissement du token...");const t=new URLSearchParams;t.append("grant_type","refresh_token"),t.append("client_id",this.config.clientId),t.append("client_secret",this.config.clientSecret),t.append("refresh_token",e);const s=await fetch(this.config.tokenUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t.toString()});if(!s.ok)throw new Error("Échec du rafraîchissement du token");const n=await s.json();localStorage.setItem("enedis_access_token",n.access_token),this.accessToken=n.access_token,n.refresh_token&&localStorage.setItem("enedis_refresh_token",n.refresh_token);const a=new Date;a.setSeconds(a.getSeconds()+n.expires_in),localStorage.setItem("enedis_token_expires",a.toISOString()),console.log("Token rafraîchi avec succès")}formatConsumptionData(e,t){var s;console.log("Formatage des données de consommation");try{if(!((s=e==null?void 0:e.meter_reading)!=null&&s.interval_reading))throw console.error("Format de données invalide:",e),new Error("Format de données invalide");const n=e.meter_reading.interval_reading;console.log(`Nombre de relevés: ${n.length}`);const a={};n.forEach(o=>{const l=o.date,c=parseFloat(o.value),u=o.measure_type;a[l]||(a[l]={peakHours:0,offPeakHours:0}),u==="HP"?a[l].peakHours+=c:u==="HC"?a[l].offPeakHours+=c:a[l].peakHours+=c});const i=Object.entries(a).map(([o,l])=>({date:o,peakHours:l.peakHours,offPeakHours:l.offPeakHours,prm:e.meter_reading.usage_point_id||t}));return console.log(`Données formatées: ${i.length} jours`),{consumption:i}}catch(n){throw console.error("Erreur lors du formatage des données:",n),n}}};MA(IA,"instance");let la=IA;const ca=la.getInstance(),tu="enedis_consumption_data";async function Ey(A){try{console.log(`Sauvegarde de ${A.length} jours de données de consommation`);const e=su(),t=Ny(e,A);return localStorage.setItem(tu,JSON.stringify(t)),t}catch(e){throw console.error("Erreur lors de la sauvegarde des données:",e),e}}async function Ho(A,e,t){try{console.log(`Récupération des données pour le PDL ${A} du ${e} au ${t}`);const s=su();return jy(s,A,e,t)}catch(s){throw console.error("Erreur lors de la récupération des données:",s),s}}function su(){const A=localStorage.getItem(tu);if(!A)return console.log("Aucune donnée stockée dans le localStorage"),[];try{const e=JSON.parse(A);return console.log(`${e.length} jours de données trouvés dans le localStorage`),e}catch(e){return console.error("Erreur lors du parsing des données stockées:",e),[]}}function Ny(A,e){console.log(`Fusion de ${A.length} jours existants avec ${e.length} nouveaux jours`);const t=new Map(A.map(n=>[`${n.prm}-${n.date}`,n]));e.forEach(n=>{t.set(`${n.prm}-${n.date}`,n)});const s=Array.from(t.values());return console.log(`Résultat de la fusion: ${s.length} jours`),s}function jy(A,e,t,s){console.log(`Filtrage des données pour le PDL ${e} du ${t} au ${s}`);const n=new Date(t),a=new Date(s),i=A.filter(o=>{const l=new Date(o.date);return o.prm===e&&l>=n&&l<=a}).sort((o,l)=>new Date(o.date).getTime()-new Date(l.date).getTime());return console.log(`${i.length} jours après filtrage`),i}function Iy(){const[A,e]=x.useState(!1),[t,s]=x.useState(null),[n,a]=x.useState(null),[i,o]=x.useState(!1),[l,c]=x.useState(null);x.useEffect(()=>{(async()=>{const m=localStorage.getItem("enedis_usage_point_id"),B=localStorage.getItem("enedis_access_token");if(console.log("Vérification de la connexion Enedis:",{pdl:m?"Présent":"Absent",token:B?"Présent":"Absent"}),m&&B){o(!0);const g=new Date().toISOString().split("T")[0],p=new Date(Date.now()-365*24*60*60*1e3).toISOString().split("T")[0];try{console.log("Chargement des données depuis le localStorage");const w=await Ho(m,p,g);if(w&&w.length>0)console.log(`${w.length} jours de données trouvés dans le localStorage`),a(w);else{console.log("Pas de données dans le localStorage, tentative de récupération depuis Enedis");try{await d(m)}catch(N){console.error("Échec de la récupération des données Enedis:",N)}}}catch(w){console.error("Erreur lors du chargement des données:",w);try{await d(m)}catch(N){console.error("Échec de la récupération des données Enedis:",N)}}}})()},[]);const u=x.useCallback(async f=>{e(!0),s(null);try{if(console.log("Test de connexion pour le PDL:",f),!localStorage.getItem("enedis_access_token"))return console.log("Pas de token disponible"),o(!1),!1;const B=await ca.testConnection(f);return console.log("Résultat du test de connexion:",B),o(B),B}catch(m){console.error("Erreur lors du test de connexion:",m);const B=m instanceof Error?m.message:"Erreur lors du test de connexion";return s(B),!1}finally{e(!1)}},[]),d=x.useCallback(async f=>{e(!0),s(null);try{console.log("Récupération des données pour le PDL:",f);const m=new Date().toISOString().split("T")[0],B=new Date(Date.now()-365*24*60*60*1e3).toISOString().split("T")[0];console.log(`Récupération des données pour le PDL ${f} du ${B} au ${m}`);const g=await ca.getConsumptionData(f,B,m);if(g.rawResponse&&(c(g.rawResponse),localStorage.setItem("enedis_raw_response",JSON.stringify(g.rawResponse))),!g||!g.consumption||g.consumption.length===0)throw console.log("Aucune donnée de consommation disponible"),new Error("Aucune donnée de consommation disponible");console.log(`${g.consumption.length} jours de données reçus`),await Ey(g.consumption);const p=await Ho(f,B,m);return console.log(`${p.length} jours de données sauvegardés dans le localStorage`),a(p),{consumption:p,rawResponse:g.rawResponse}}catch(m){console.error("Erreur lors de la récupération des données:",m);const B=m instanceof Error?m.message:"Erreur lors de la récupération des données";throw s(B),m}finally{e(!1)}},[]),h=x.useCallback(()=>{console.log("Réinitialisation des données Enedis"),localStorage.removeItem("enedis_consumption_data"),localStorage.removeItem("enedis_usage_point_id"),localStorage.removeItem("enedis_access_token"),localStorage.removeItem("enedis_refresh_token"),localStorage.removeItem("enedis_token_expires"),localStorage.removeItem("enedis_raw_response"),a(null),c(null),o(!1),s(null)},[]);return{isLoading:A,error:t,consumptionData:n,rawApiResponse:l,isConnected:i,testConnection:u,fetchConsumptionData:d,resetData:h}}const et={peakHours:.2062,offPeakHours:.1547},Sy=({data:A,onReset:e})=>{var v;const{clientInfo:t}=sA(),s=A.reduce((y,E)=>{const b=new Date(E.date),C=`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}`;return y[C]||(y[C]={date:C,peakHours:0,offPeakHours:0,peakCost:0,offPeakCost:0}),y[C].peakHours+=E.peakHours,y[C].offPeakHours+=E.offPeakHours,y[C].peakCost+=E.peakHours*et.peakHours,y[C].offPeakCost+=E.offPeakHours*et.offPeakHours,y},{}),n=Object.values(s).map(y=>({...y,date:new Date(y.date+"-01").toLocaleDateString("fr-FR",{month:"short",year:"numeric"})})),a=n.reduce((y,E)=>y+E.peakHours,0),i=n.reduce((y,E)=>y+E.offPeakHours,0),o=a+i,l=a*et.peakHours,c=i*et.offPeakHours,u=l+c,d=A.length,h=o/d,f=a/d,m=i/d,B=A.map(y=>({date:y.date,total:y.peakHours+y.offPeakHours})),g=Math.max(...B.map(y=>y.total)),p=(v=B.find(y=>y.total===g))==null?void 0:v.date,w=p?new Date(p).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"",N=a/o*100,Q=i/o*100;return A.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[r.jsx("p",{className:"text-gray-600",children:"Aucune donnée de consommation disponible."}),r.jsxs("button",{onClick:e,className:"mt-4 inline-flex items-center gap-2 px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[r.jsx(Zs,{className:"h-4 w-4"}),"Réinitialiser"]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Analyse de consommation"}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(ff,{className:"h-5 w-5"}),r.jsxs("span",{children:["Point de livraison de ",t.civilite," ",t.nom," ",t.prenom]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Consommation totale"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:[Math.round(o).toLocaleString()," kWh"]}),r.jsxs("div",{className:"mt-1 text-sm",children:[r.jsxs("p",{className:"text-blue-600",children:["HP: ",Math.round(a).toLocaleString()," kWh"]}),r.jsxs("p",{className:"text-blue-600",children:["HC: ",Math.round(i).toLocaleString()," kWh"]})]})]}),r.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Dépenses totales"}),r.jsxs("p",{className:"text-2xl font-bold text-green-700",children:[Math.round(u).toLocaleString()," €"]}),r.jsxs("p",{className:"mt-1 text-sm text-green-600",children:[(u/n.length).toFixed(2)," €/mois"]})]}),r.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-indigo-600 font-medium",children:"Prix heures pleines"}),r.jsxs("p",{className:"text-2xl font-bold text-indigo-700",children:[(et.peakHours*100).toFixed(2)," c€/kWh"]}),r.jsx("p",{className:"mt-1 text-sm text-indigo-600",children:"6h-22h en semaine"})]}),r.jsxs("div",{className:"bg-teal-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-teal-600 font-medium",children:"Prix heures creuses"}),r.jsxs("p",{className:"text-2xl font-bold text-teal-700",children:[(et.offPeakHours*100).toFixed(2)," c€/kWh"]}),r.jsx("p",{className:"mt-1 text-sm text-teal-600",children:"22h-6h + week-ends"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(va,{className:"h-5 w-5 text-purple-500"}),r.jsx("h3",{className:"font-medium text-purple-900",children:"Moyennes journalières"})]}),r.jsxs("p",{className:"text-2xl font-bold text-purple-700",children:[h.toFixed(1)," kWh/jour"]}),r.jsxs("div",{className:"mt-2 text-sm space-y-1",children:[r.jsxs("p",{className:"text-purple-600",children:["HP: ",f.toFixed(1)," kWh/jour"]}),r.jsxs("p",{className:"text-purple-600",children:["HC: ",m.toFixed(1)," kWh/jour"]})]})]}),r.jsxs("div",{className:"bg-amber-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(zt,{className:"h-5 w-5 text-amber-500"}),r.jsx("h3",{className:"font-medium text-amber-900",children:"Pic de consommation"})]}),r.jsxs("p",{className:"text-2xl font-bold text-amber-700",children:[g.toFixed(1)," kWh"]}),r.jsxs("p",{className:"mt-2 text-sm text-amber-600",children:["Atteint le ",w]})]}),r.jsxs("div",{className:"bg-rose-50 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ct,{className:"h-5 w-5 text-rose-500"}),r.jsx("h3",{className:"font-medium text-rose-900",children:"Répartition HP/HC"})]}),r.jsxs("div",{className:"relative pt-1",children:[r.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[r.jsx("div",{children:r.jsx("span",{className:"text-xs font-semibold inline-block text-rose-600",children:"Heures pleines"})}),r.jsx("div",{children:r.jsxs("span",{className:"text-xs font-semibold inline-block text-rose-600",children:[N.toFixed(1),"%"]})})]}),r.jsx("div",{className:"overflow-hidden h-2 text-xs flex rounded bg-rose-200",children:r.jsx("div",{style:{width:`${N}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-rose-500"})}),r.jsxs("div",{className:"flex mt-2 items-center justify-between",children:[r.jsx("div",{children:r.jsx("span",{className:"text-xs font-semibold inline-block text-rose-600",children:"Heures creuses"})}),r.jsx("div",{children:r.jsxs("span",{className:"text-xs font-semibold inline-block text-rose-600",children:[Q.toFixed(1),"%"]})})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Consommation électrique mensuelle (kWh)"}),r.jsx("div",{className:"h-[400px] w-full",children:r.jsx(Da,{width:"100%",height:"100%",children:r.jsxs(Ra,{data:n,margin:{top:5,right:30,left:20,bottom:20},barSize:20,barGap:0,children:[r.jsx(Ka,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),r.jsx(Ma,{dataKey:"date",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12}}),r.jsx(Va,{unit:" kWh",tick:{fontSize:12},width:80}),r.jsx(Ga,{formatter:(y,E)=>[`${Math.round(y)} kWh`,E==="peakHours"?"Heures pleines":"Heures creuses"],contentStyle:{backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:"0.375rem",padding:"8px 12px"},cursor:{fill:"rgba(229, 231, 235, 0.2)"}}),r.jsx($a,{verticalAlign:"top",height:36,formatter:y=>y==="peakHours"?"Heures pleines":"Heures creuses"}),r.jsx(cs,{dataKey:"peakHours",name:"peakHours",stackId:"consumption",fill:"#4F46E5",radius:[4,4,0,0]}),r.jsx(cs,{dataKey:"offPeakHours",name:"offPeakHours",stackId:"consumption",fill:"#14B8A6",radius:[4,4,0,0]})]})})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Dépenses mensuelles (€)"}),r.jsx("div",{className:"h-[400px] w-full",children:r.jsx(Da,{width:"100%",height:"100%",children:r.jsxs(Ra,{data:n,margin:{top:5,right:30,left:20,bottom:20},barSize:20,barGap:0,children:[r.jsx(Ka,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),r.jsx(Ma,{dataKey:"date",angle:-45,textAnchor:"end",height:60,tick:{fontSize:12}}),r.jsx(Va,{unit:" €",tick:{fontSize:12},width:80}),r.jsx(Ga,{formatter:(y,E)=>[`${y.toFixed(2)} €`,E==="peakCost"?"Coût heures pleines":"Coût heures creuses"],contentStyle:{backgroundColor:"white",border:"1px solid #E5E7EB",borderRadius:"0.375rem",padding:"8px 12px"},cursor:{fill:"rgba(229, 231, 235, 0.2)"}}),r.jsx($a,{verticalAlign:"top",height:36,formatter:y=>y==="peakCost"?"Coût heures pleines":"Coût heures creuses"}),r.jsx(cs,{dataKey:"peakCost",name:"peakCost",stackId:"cost",fill:"#8B5CF6",radius:[4,4,0,0]}),r.jsx(cs,{dataKey:"offPeakCost",name:"offPeakCost",stackId:"cost",fill:"#EC4899",radius:[4,4,0,0]})]})})})]}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("button",{onClick:e,className:"inline-flex items-center gap-2 px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[r.jsx(Zs,{className:"h-4 w-4"}),"Réinitialiser les données"]})})]})},Hy=()=>{const[A,e]=x.useState(!1),[t,s]=x.useState(null),[n,a]=x.useState(null),[i,o]=x.useState(null),l=ht(),{consumptionData:c,isConnected:u,fetchConsumptionData:d,resetData:h}=Iy();x.useEffect(()=>{if(l.state)if(l.state.success)if(a(l.state.message||"Connexion réussie"),l.state.pdl)console.log("PDL reçu dans les paramètres d'URL:",l.state.pdl),d(l.state.pdl).catch(g=>{console.error("Erreur lors de la récupération des données:",g),s(g instanceof Error?g.message:"Erreur lors de la récupération des données")});else{const g=localStorage.getItem("enedis_usage_point_id");g?(console.log("Utilisation du PDL stocké:",g),d(g).catch(p=>{console.error("Erreur lors de la récupération des données:",p),s(p instanceof Error?p.message:"Erreur lors de la récupération des données")})):(console.log("Aucun PDL disponible"),s("Aucun point de livraison (PDL) disponible"))}else l.state.error&&s(l.state.error)},[l,d]);const f=()=>{e(!0),s(null);try{window.open("https://mon-compte-particulier.enedis.fr/dataconnect/v1/oauth2/authorize?client_id=Y_LuB7HsQW3JWYudw7HRmN28FN8a&duration=P1Y&response_type=code&state=AbieLink1","_blank"),a("Redirection vers Enedis...")}catch(g){s("Erreur lors de la redirection"),console.error("Erreur:",g)}finally{e(!1)}},m=async()=>{e(!0),s(null),o(null);try{const g=localStorage.getItem("enedis_usage_point_id");if(!g)throw new Error("Aucun PDL disponible. Veuillez d'abord vous connecter à Enedis.");const p=await d(g);o(JSON.stringify(p,null,2)),a("Données récupérées avec succès")}catch(g){s(g instanceof Error?g.message:"Erreur lors de la récupération des données")}finally{e(!1)}},B=()=>{if(!i)return;const g=new Blob([i],{type:"application/json"}),p=URL.createObjectURL(g),w=document.createElement("a");w.href=p,w.download="enedis-data.json",document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(p)};return x.useEffect(()=>{const g=localStorage.getItem("enedis_raw_response");if(g)try{JSON.parse(g),o(g)}catch(p){console.error("Données brutes stockées invalides:",p)}},[]),r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 rounded-lg shadow-lg p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 text-white mb-4",children:[r.jsx(ba,{className:"h-8 w-8"}),r.jsx("h1",{className:"text-2xl font-bold",children:"Abie Link"})]}),r.jsx("p",{className:"text-blue-100",children:"Connectez votre compteur Linky pour suivre votre consommation d'énergie en temps réel et optimiser votre installation solaire."})]}),t&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start gap-3",children:[r.jsx(ye,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-red-700",children:t})]}),n&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:r.jsx("p",{className:"text-green-700",children:n})}),c?r.jsxs("div",{className:"space-y-6",children:[r.jsx(Sy,{data:c,onReset:h}),r.jsxs("div",{className:"flex justify-center space-x-4",children:[r.jsx("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",disabled:A,children:A?"Chargement...":"Récupérer vos données"}),r.jsx("button",{onClick:h,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"Réinitialiser"})]}),i&&r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Données brutes"}),r.jsxs("button",{onClick:B,className:"flex items-center gap-1 text-blue-600 hover:text-blue-800",children:[r.jsx(Xh,{className:"h-4 w-4"}),"Télécharger"]})]}),r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 overflow-auto max-h-96",children:r.jsx("pre",{className:"text-xs text-gray-800 whitespace-pre-wrap",children:i})})]})]}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(yl,{className:"h-5 w-5 text-blue-500"}),r.jsx("h3",{className:"font-medium text-gray-900",children:"Suivi en temps réel"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Visualisez votre consommation d'énergie au jour le jour"})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(yr,{className:"h-5 w-5 text-green-500"}),r.jsx("h3",{className:"font-medium text-gray-900",children:"Sécurisé"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Vos données sont protégées et confidentielles"})]}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Wt,{className:"h-5 w-5 text-purple-500"}),r.jsx("h3",{className:"font-medium text-gray-900",children:"Optimisation"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Optimisez votre installation solaire selon vos besoins"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Connecter mon compteur Linky"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-gray-600",children:"Pour connecter votre compteur Linky, cliquez sur le bouton ci-dessous. Vous serez redirigé vers le site d'Enedis où vous pourrez vous authentifier et autoriser l'accès à vos données de consommation."}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("button",{onClick:f,disabled:A,className:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[r.jsx(ml,{className:"h-5 w-5 mr-2"}),"Se connecter à Enedis"]})})]}),A&&r.jsx("div",{className:"flex justify-center mt-4",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:[r.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"Pourquoi connecter votre compteur Linky ?"}),r.jsx("p",{className:"text-blue-800 mb-4",children:"En connectant votre compteur Linky, vous pourrez visualiser votre consommation d'énergie en détail et optimiser votre installation solaire en fonction de vos habitudes de consommation."}),r.jsx("p",{className:"text-sm text-blue-700",children:"Vos données sont sécurisées et ne sont utilisées que pour vous fournir des recommandations personnalisées."})]})]})]})};function _y(){const A=ft(),e=ht(),[t,s]=x.useState("loading"),[n,a]=x.useState("Connexion à Enedis en cours...");return x.useEffect(()=>{(async()=>{try{console.log("Traitement du callback Enedis..."),console.log("URL complète:",window.location.href);const o=new URLSearchParams(e.search),l=e.hash;let c=o.get("code"),u=o.get("error"),d=o.get("state"),h=o.get("usage_point_id");if(l&&l.includes("?")){const f=new URLSearchParams(l.split("?")[1]);c=c||f.get("code"),u=u||f.get("error"),d=d||f.get("state"),h=h||f.get("usage_point_id")}if(console.log("Paramètres extraits:",{code:c?"***"+(c.length>6?c.slice(-6):c):null,error:u,state:d,usagePointId:h}),u){console.error("Erreur reçue:",u),s("error"),a(u),setTimeout(()=>{A("/abie-link",{state:{error:u},replace:!0})},3e3);return}if(c){a("Échange du code contre un token...");try{await ca.handleCallback(c),console.log("Échange du code réussi"),h&&(console.log("Sauvegarde du PDL:",h),localStorage.setItem("enedis_usage_point_id",h)),s("success"),a("Connexion réussie, redirection..."),setTimeout(()=>{A("/abie-link",{state:{success:!0,pdl:h,message:"Connexion à Enedis réussie"},replace:!0})},2e3)}catch(f){console.error("Erreur lors de l'échange du code:",f),s("error"),a(f instanceof Error?f.message:"Erreur lors de l'échange du code"),setTimeout(()=>{A("/abie-link",{state:{error:f instanceof Error?f.message:"Échec de la connexion à Enedis"},replace:!0})},3e3)}return}s("error"),a("Aucun paramètre d'authentification reçu"),setTimeout(()=>{A("/abie-link",{state:{error:"Aucun paramètre d'authentification reçu"},replace:!0})},3e3)}catch(o){console.error("Erreur détaillée lors de la connexion Enedis:",o),s("error"),a(o instanceof Error?o.message:"Erreur inconnue"),setTimeout(()=>{A("/abie-link",{state:{error:o instanceof Error?o.message:"Échec de la connexion à Enedis"},replace:!0})},3e3)}})()},[A,e]),r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md w-full",children:[t==="loading"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 mb-2",children:n}),r.jsx("p",{className:"text-sm text-gray-500",children:"Veuillez patienter pendant que nous traitons votre demande"})]}),t==="success"&&r.jsxs(r.Fragment,{children:[r.jsx(Mh,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 mb-2",children:n}),r.jsx("p",{className:"text-sm text-gray-500",children:"Vous allez être redirigé automatiquement"})]}),t==="error"&&r.jsxs(r.Fragment,{children:[r.jsx(ye,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600 mb-2",children:"Erreur de connexion"}),r.jsx("p",{className:"text-sm text-red-500 mb-4",children:n}),r.jsx("button",{onClick:()=>A("/abie-link"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retour à Abie Link"})]})]})})}function ky(){const[A,e]=x.useState([]),[t,s]=x.useState(!0),[n,a]=x.useState(null);return x.useEffect(()=>{async function i(){try{const{data:o,error:l}=await rs.from("agency_commissions").select("*").order("power_kwc");if(l)throw l;e(o)}catch(o){console.error("Error fetching commissions:",o),a(o instanceof Error?o.message:"Failed to fetch commissions")}finally{s(!1)}}i()},[]),{commissions:A,loading:t,error:n}}const Ty="151515";function Ly(){const[A,e]=x.useState(!1),[t,s]=x.useState(""),[n,a]=x.useState(""),{commissions:i,loading:o,error:l}=ky(),c=d=>{d.preventDefault(),t===Ty?(e(!0),a("")):a("Code d'accès incorrect")};if(!A)return r.jsx("div",{className:"min-h-screen flex flex-col justify-start bg-gray-50 px-4 pt-12",children:r.jsxs("div",{className:"max-w-md w-full mx-auto",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"mx-auto h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(yr,{className:"h-6 w-6 text-blue-600"})}),r.jsx("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:"Accès restreint"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Veuillez saisir le code d'accès pour consulter les informations agence"})]}),r.jsx("form",{onSubmit:c,className:"bg-white p-6 rounded-lg shadow-md",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"accessCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Code d'accès"}),r.jsx("input",{id:"accessCode",type:"password",value:t,onChange:d=>s(d.target.value),className:"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Entrez le code d'accès",required:!0})]}),n&&r.jsx("div",{className:"rounded-md bg-red-50 p-4",children:r.jsx("p",{className:"text-sm text-red-700",children:n})}),r.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Accéder"})]})})]})});if(o)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ut,{className:"h-8 w-8 animate-spin text-blue-500 mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement des données..."})]})});if(l)return r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[r.jsx(ye,{className:"h-5 w-5"}),r.jsx("p",{children:"Erreur lors du chargement des commissions"})]})})});const u=(i==null?void 0:i.reduce((d,h)=>Math.max(d,h.commission_super_regie||0),0))||0;return r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Informations agence"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Barème applicable aux commerciaux et super régies"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:r.jsx(dl,{className:"h-6 w-6 text-blue-500"})}),r.jsx("h3",{className:"font-medium text-gray-900",children:"Rémunération maximale"})]}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[u.toLocaleString("fr-FR")," €"]}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Pour les super régies"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:r.jsx(va,{className:"h-6 w-6 text-green-500"})}),r.jsx("h3",{className:"font-medium text-gray-900",children:"Progression moyenne"})]}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:"+100 €"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Par palier de puissance"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:r.jsx(Dh,{className:"h-6 w-6 text-purple-500"})}),r.jsx("h3",{className:"font-medium text-gray-900",children:"Bonus super régie"})]}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"+200 €"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"En moyenne par installation"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-gray-100",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(mf,{className:"h-5 w-5 text-gray-400"}),r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Barème détaillé"})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Puissance crête"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commercial"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Super régie (≥10/mois)"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i==null?void 0:i.map((d,h)=>{var f,m,B;return r.jsxs("tr",{className:h%2===0?"bg-white":"bg-gray-50",children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[(f=d.power_kwc)==null?void 0:f.toFixed(1)," kWc"]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:[(m=d.commission_commercial)==null?void 0:m.toLocaleString("fr-FR")," €"]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:[(B=d.commission_super_regie)==null?void 0:B.toLocaleString("fr-FR")," €"]})]},d.id)})})]})})]}),r.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Note :"})," Les super régies doivent réaliser un minimum de 10 installations par mois pour bénéficier du barème majoré. Les rémunérations sont versées à la mise en service de l'installation."]})})]})}function Py(){const{settings:A,updateSettings:e,addInstallationPrice:t,removeInstallationPrice:s}=RA(),[n,a]=x.useState(A),[i,o]=x.useState(!1),[l,c]=x.useState(""),[u,d]=x.useState(""),[h,f]=x.useState(null),[m,B]=x.useState(!1),[g,p]=x.useState([]),[w,N]=x.useState(!1),[Q,v]=x.useState(null),[y,E]=x.useState([]),[b,C]=x.useState(""),[U,j]=x.useState(""),[O,_]=x.useState(null),[R,I]=x.useState(!1),[D,M]=x.useState({physicalBattery:!0,myBattery:!0,smartBattery:!0}),[te,ue]=x.useState(!0),[P,z]=x.useState({financial:!1,prices:!1,proPrices:!1,subsidies:!1,options:!1,promoCodes:!1});x.useEffect(()=>{const S=localStorage.getItem("battery_options");S&&M(JSON.parse(S));const G=localStorage.getItem("subscription_enabled");G!==null&&ue(G==="true");const q=localStorage.getItem("local_promo_codes");if(q)try{E(JSON.parse(q))}catch(fe){console.error("Error parsing local promo codes:",fe),E([])}},[]),x.useEffect(()=>{const S=async()=>{N(!0),v(null);try{const{data:G,error:q}=await rs.from("subsidies").select("*").order("effective_date",{ascending:!1});if(q)throw q;p(G||[])}catch(G){console.error("Error fetching subsidies:",G),v("Error retrieving subsidies")}finally{N(!1)}};P.subsidies&&S()},[P.subsidies]);const Z=S=>G=>{const q=parseFloat(G.target.value);isNaN(q)||a(fe=>({...fe,[S]:q}))},ee=(S,G)=>q=>{const fe=parseFloat(q.target.value);isNaN(fe)||a(Ce=>({...Ce,[S==="surplus"?"surplusSellPrices":"totalSellPrices"]:{...Ce[S==="surplus"?"surplusSellPrices":"totalSellPrices"],[G]:fe}}))},se=S=>{a(G=>({...G,sellPriceDate:S.target.value}))},de=S=>G=>{const q=parseFloat(G.target.value);if(!isNaN(q)){const fe=[...n.installationPrices];fe[S]={...fe[S],price:q},a(Or=>({...Or,installationPrices:fe}));const Ce=localStorage.getItem("installation_prices"),KA=Ce?JSON.parse(Ce):[],yA=fe[S].power,ls=KA.findIndex(Or=>Math.abs(Or.power-yA)<.01);ls>=0?KA[ls].price=q:KA.push({power:yA,price:q}),localStorage.setItem("installation_prices",JSON.stringify(KA)),console.log("Updated price in localStorage:",{power:yA,price:q})}},je=()=>{const S=parseFloat(l),G=parseFloat(u);if(isNaN(S)||isNaN(G)||S<=0||G<=0){f("Please enter valid values");return}if(S<=9){f("Power must be greater than 9 kWc");return}try{t(S,G);const q=localStorage.getItem("installation_prices"),Ce=(q?JSON.parse(q):[]).filter(yA=>Math.abs(yA.power-S)>=.01);Ce.push({power:S,price:G}),Ce.sort((yA,ls)=>yA.power-ls.power),localStorage.setItem("installation_prices",JSON.stringify(Ce)),console.log("Updated custom prices in localStorage:",Ce),c(""),d(""),f(null),B(!0);const KA=setTimeout(()=>B(!1),3e3);return()=>clearTimeout(KA)}catch(q){console.error("Error saving custom price:",q),f("Failed to save custom price")}},_e=()=>{if(!b||!U){_("Veuillez remplir tous les champs");return}const S=parseFloat(U);if(isNaN(S)||S<=0){_("La remise doit être un nombre positif");return}if(y.find(Ce=>Ce.code.toUpperCase()===b.toUpperCase())){_("Ce code promo existe déjà");return}const q={id:crypto.randomUUID(),code:b.toUpperCase(),discount:S,active:!0,expiration_date:null,created_at:new Date().toISOString()},fe=[...y,q];E(fe),localStorage.setItem("local_promo_codes",JSON.stringify(fe)),C(""),j(""),_(null),I(!0),setTimeout(()=>I(!1),3e3)},wA=S=>{const G=y.filter(q=>q.id!==S);E(G),localStorage.setItem("local_promo_codes",JSON.stringify(G))},xA=S=>{const G=y.map(q=>q.id===S?{...q,active:!q.active}:q);E(G),localStorage.setItem("local_promo_codes",JSON.stringify(G))},V=S=>{const G={...D,[S]:!D[S]};M(G),localStorage.setItem("battery_options",JSON.stringify(G)),window.dispatchEvent(new CustomEvent("batteryOptionsUpdated",{detail:G}))},Ke=()=>{const S=!te;ue(S),localStorage.setItem("subscription_enabled",S.toString()),window.dispatchEvent(new CustomEvent("subscriptionEnabledUpdated",{detail:S}))},ke=()=>{e(n),o(!0),setTimeout(()=>o(!1),3e3)},K=S=>{z(G=>({...G,[S]:!G[S]}))};return r.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Réglages"}),r.jsxs("button",{onClick:ke,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(df,{className:"h-4 w-4 mr-2"}),"Appliquer les modifications"]})]}),i&&r.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-md",children:r.jsx("p",{className:"text-sm text-green-600",children:"Modifications appliquées avec succès"})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("button",{onClick:()=>K("promoCodes"),className:"w-full px-6 py-4 flex items-center justify-between text-left",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Et,{className:"h-5 w-5 text-purple-500"}),r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Codes promo"})]}),P.promoCodes?r.jsx(UA,{className:"h-5 w-5 text-gray-400"}):r.jsx(lA,{className:"h-5 w-5 text-gray-400"})]}),P.promoCodes&&r.jsxs("div",{className:"px-6 pb-6 space-y-6",children:[r.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:r.jsx("p",{className:"text-sm text-purple-800",children:"Créez des codes promo pour offrir des remises à vos clients. Les codes sont stockés localement et peuvent être utilisés dans le menu latéral."})}),y.length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-base font-medium text-gray-900 mb-3",children:"Codes promo existants"}),r.jsx("div",{className:"space-y-2",children:y.map(S=>r.jsxs("div",{className:`p-3 rounded-lg border flex items-center justify-between ${S.active?"bg-white border-gray-200":"bg-gray-50 border-gray-200"}`,children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-gray-900",children:S.code}),!S.active&&r.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-200 text-gray-700 rounded-full",children:"Inactif"})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Remise: ",S.discount.toLocaleString()," €"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>xA(S.id),className:`p-2 rounded-full ${S.active?"text-gray-500 hover:bg-gray-100":"text-green-500 hover:bg-green-50"}`,title:S.active?"Désactiver":"Activer",children:S.active?r.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-800 rounded-full",children:"Actif"}):r.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-800 rounded-full",children:"Inactif"})}),r.jsx("button",{onClick:()=>wA(S.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-full",title:"Supprimer",children:r.jsx(ui,{className:"h-4 w-4"})})]})]},S.id))})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[r.jsx("h3",{className:"text-base font-medium text-gray-900 mb-3",children:"Ajouter un code promo"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),r.jsx("input",{type:"text",value:b,onChange:S=>C(S.target.value.toUpperCase()),placeholder:"SOLEIL2025",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant de la remise (€)"}),r.jsx("input",{type:"number",value:U,onChange:S=>j(S.target.value),placeholder:"500",min:"0",step:"50",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500 sm:text-sm"})]})]}),O&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:O}),R&&r.jsx("p",{className:"mt-2 text-sm text-green-600",children:"Code promo ajouté avec succès"}),r.jsx("button",{onClick:_e,className:"mt-4 w-full px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:"Ajouter"})]}),r.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-100",children:[r.jsx("h3",{className:"text-base font-medium text-indigo-900 mb-3",children:"Codes promo spéciaux"}),r.jsx("p",{className:"text-sm text-indigo-700 mb-4",children:"Ces codes promo spéciaux sont intégrés au système et ne peuvent pas être modifiés. Ils offrent des avantages spécifiques."}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-white border border-indigo-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-indigo-900",children:"CAUTIONFREE"}),r.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 rounded-full",children:"Spécial abonnement"})]}),r.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"Caution offerte (équivalent à 2 mois d'abonnement)"})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-white border border-indigo-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-indigo-900",children:"BATTERYFREE"}),r.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 rounded-full",children:"Spécial offre MyBattery"})]}),r.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"Frais d'activation MyBattery offerts (179€)"})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-white border border-indigo-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-indigo-900",children:"SMARTFREE"}),r.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 rounded-full",children:"Spécial paiement comptant"})]}),r.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"Frais de mise en service SmartBattery offerts (2000€)"})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-white border border-indigo-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-indigo-900",children:"ABO3MOIS"}),r.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 rounded-full",children:"Spécial abonnement"})]}),r.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"3 premiers mois d'abonnement offerts"})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-white border border-indigo-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-indigo-900",children:"ABO2MOIS"}),r.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 rounded-full",children:"Spécial abonnement"})]}),r.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"2 premiers mois d'abonnement offerts"})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-white border border-indigo-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium text-indigo-900",children:"ABO1MOIS"}),r.jsx("span",{className:"text-xs px-2 py-0.5 bg-indigo-100 text-indigo-800 rounded-full",children:"Spécial abonnement"})]}),r.jsx("p",{className:"text-sm text-indigo-700 mt-1",children:"Premier mois d'abonnement offert"})]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("button",{onClick:()=>K("options"),className:"w-full px-6 py-4 flex items-center justify-between text-left",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ct,{className:"h-5 w-5 text-green-500"}),r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Options disponibles"})]}),P.options?r.jsx(UA,{className:"h-5 w-5 text-gray-400"}):r.jsx(lA,{className:"h-5 w-5 text-gray-400"})]}),P.options&&r.jsxs("div",{className:"px-6 pb-6 space-y-6",children:[r.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ct,{className:"h-5 w-5 text-blue-500"}),r.jsx("h3",{className:"text-base font-medium text-gray-900",children:"Option d'abonnement"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:te,onChange:Ke,className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Activer ou désactiver l'option de financement par abonnement dans l'application"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-base font-medium text-gray-900 mb-4",children:"Options de batterie"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(EA,{className:"h-5 w-5 text-gray-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Batterie physique"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:D.physicalBattery,onChange:()=>V("physicalBattery"),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(fl,{className:"h-5 w-5 text-gray-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"MyBattery"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:D.myBattery,onChange:()=>V("myBattery"),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(hl,{className:"h-5 w-5 text-gray-500"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Smart Battery"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:D.smartBattery,onChange:()=>V("smartBattery"),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("button",{onClick:()=>K("financial"),className:"w-full px-6 py-4 flex items-center justify-between text-left",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(qh,{className:"h-5 w-5 text-blue-500"}),r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Paramètres financiers"})]}),P.financial?r.jsx(UA,{className:"h-5 w-5 text-gray-400"}):r.jsx(lA,{className:"h-5 w-5 text-gray-400"})]}),P.financial&&r.jsxs("div",{className:"px-6 pb-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix du kWh par défaut"}),r.jsxs("div",{className:"relative mt-1 rounded-md shadow-sm",children:[r.jsx("input",{type:"number",value:n.baseKwhPrice,onChange:Z("baseKwhPrice"),step:"0.0001",min:"0",className:"block w-full rounded-md border-gray-300 pl-3 pr-12 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"€/kWh"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de validité des prix"}),r.jsx("input",{type:"date",value:n.sellPriceDate,onChange:se,className:"block w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Prix de vente du surplus"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"0-9 kWc"}),r.jsxs("div",{className:"relative mt-1 rounded-md shadow-sm",children:[r.jsx("input",{type:"number",value:n.surplusSellPrices.under9kw,onChange:ee("surplus","under9kw"),step:"0.0001",min:"0",className:"block w-full rounded-md border-gray-300 pl-3 pr-12 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"€/kWh"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"9-36 kWc"}),r.jsxs("div",{className:"relative mt-1 rounded-md shadow-sm",children:[r.jsx("input",{type:"number",value:n.surplusSellPrices.from9to36kw,onChange:ee("surplus","from9to36kw"),step:"0.0001",min:"0",className:"block w-full rounded-md border-gray-300 pl-3 pr-12 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"€/kWh"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"36-100 kWc"}),r.jsxs("div",{className:"relative mt-1 rounded-md shadow-sm",children:[r.jsx("input",{type:"number",value:n.surplusSellPrices.from36to100kw,onChange:ee("surplus","from36to100kw"),step:"0.0001",min:"0",className:"block w-full rounded-md border-gray-300 pl-3 pr-12 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"€/kWh"})})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Prix de vente totale"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"0-9 kWc"}),r.jsxs("div",{className:"relative mt-1 rounded-md shadow-sm",children:[r.jsx("input",{type:"number",value:n.totalSellPrices.under9kw,onChange:ee("total","under9kw"),step:"0.0001",min:"0",className:"block w-full rounded-md border-gray-300 pl-3 pr-12 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"€/kWh"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"9-36 kWc"}),r.jsxs("div",{className:"relative mt-1 rounded-md shadow-sm",children:[r.jsx("input",{type:"number",value:n.totalSellPrices.from9to36kw,onChange:ee("total","from9to36kw"),step:"0.0001",min:"0",className:"block w-full rounded-md border-gray-300 pl-3 pr-12 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"€/kWh"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"36-100 kWc"}),r.jsxs("div",{className:"relative mt-1 rounded-md shadow-sm",children:[r.jsx("input",{type:"number",value:n.totalSellPrices.from36to100kw,onChange:ee("total","from36to100kw"),step:"0.0001",min:"0",className:"block w-full rounded-md border-gray-300 pl-3 pr-12 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"€/kWh"})})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau d'autoconsommation par défaut"}),r.jsxs("div",{className:"relative mt-1 rounded-md shadow-sm",children:[r.jsx("input",{type:"number",value:n.defaultAutoconsumption,onChange:Z("defaultAutoconsumption"),step:"1",min:"0",max:"100",className:"block w-full rounded-md border-gray-300 pl-3 pr-12 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"%"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Revalorisation annuelle par défaut"}),r.jsxs("div",{className:"relative mt-1 rounded-md shadow-sm",children:[r.jsx("input",{type:"number",value:n.defaultEnergyRevaluation,onChange:Z("defaultEnergyRevaluation"),step:"0.1",className:"block w-full rounded-md border-gray-300 pl-3 pr-12 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"%"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Indexation des ventes par défaut"}),r.jsxs("div",{className:"relative mt-1 rounded-md shadow-sm",children:[r.jsx("input",{type:"number",value:n.defaultSellIndexation,onChange:Z("defaultSellIndexation"),step:"0.1",className:"block w-full rounded-md border-gray-300 pl-3 pr-12 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"%"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dégradation des panneaux par défaut"}),r.jsxs("div",{className:"relative mt-1 rounded-md shadow-sm",children:[r.jsx("input",{type:"number",value:n.defaultPanelDegradation,onChange:Z("defaultPanelDegradation"),step:"0.1",className:"block w-full rounded-md border-gray-300 pl-3 pr-12 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"%"})})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("button",{onClick:()=>K("prices"),className:"w-full px-6 py-4 flex items-center justify-between text-left",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(xa,{className:"h-5 w-5 text-indigo-500"}),r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Prix des installations"})]}),P.prices?r.jsx(UA,{className:"h-5 w-5 text-gray-400"}):r.jsx(lA,{className:"h-5 w-5 text-gray-400"})]}),P.prices&&r.jsx("div",{className:"px-6 pb-6",children:r.jsx("div",{className:"grid grid-cols-2 gap-4",children:n.installationPrices.filter(S=>S.power<=9).map((S,G)=>r.jsxs("div",{className:"space-y-1",children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[S.power," kWc"]}),r.jsxs("div",{className:"relative mt-1 rounded-md shadow-sm",children:[r.jsx("input",{type:"number",value:S.price,onChange:de(G),step:"10",min:"0",className:"block w-full rounded-md border-gray-300 pl-3 pr-12 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:r.jsx("span",{className:"text-gray-500 sm:text-sm",children:"€"})})]})]},S.power))})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("button",{onClick:()=>K("proPrices"),className:"w-full px-6 py-4 flex items-center justify-between text-left",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Rh,{className:"h-5 w-5 text-purple-500"}),r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Prix des installations professionnelles"})]}),P.proPrices?r.jsx(UA,{className:"h-5 w-5 text-gray-400"}):r.jsx(lA,{className:"h-5 w-5 text-gray-400"})]}),P.proPrices&&r.jsx("div",{className:"px-6 pb-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"grid grid-cols-2 gap-4",children:n.installationPrices.filter(S=>S.power>9).map(S=>r.jsxs("div",{className:"relative bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"font-medium",children:[S.power," kWc"]}),r.jsx("button",{onClick:()=>s(S.power),className:"text-gray-400 hover:text-red-500",children:r.jsx(ui,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[S.price.toLocaleString()," €"]})]},S.power))}),r.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Ajouter un nouveau kit pro"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Puissance (kWc)"}),r.jsx("input",{type:"number",value:l,onChange:S=>c(S.target.value),min:"9.5",step:"0.5",className:"block w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (€)"}),r.jsx("input",{type:"number",value:u,onChange:S=>d(S.target.value),min:"0",step:"100",className:"block w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]})]}),h&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:h}),m&&r.jsx("p",{className:"mt-2 text-sm text-green-600",children:"Kit ajouté avec succès"}),r.jsx("button",{onClick:je,className:"mt-3 w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Ajouter"})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("button",{onClick:()=>K("subsidies"),className:"w-full px-6 py-4 flex items-center justify-between text-left",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Jh,{className:"h-5 w-5 text-purple-500"}),r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Subventions Supabase"})]}),P.subsidies?r.jsx(UA,{className:"h-5 w-5 text-gray-400"}):r.jsx(lA,{className:"h-5 w-5 text-gray-400"})]}),P.subsidies&&r.jsx("div",{className:"px-6 pb-6",children:w?r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-purple-500 border-t-transparent rounded-full mx-auto"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Chargement des subventions..."})]}):Q?r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[r.jsx(ye,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-700",children:Q})]}):g.length===0?r.jsx("p",{className:"text-center py-4 text-gray-500",children:"Aucune subvention trouvée"}):r.jsx("div",{className:"mt-4",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Puissance"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date d'effet"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(S=>r.jsxs("tr",{children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[S.power_range," kWc"]}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-gray-900",children:[S.amount," €/kWc"]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(S.effective_date).toLocaleDateString("fr-FR")})]},S.id))})]})})})]})]})]})}function Oy(){const[A,e]=x.useState(null),[t,s]=x.useState(!1),[n,a]=x.useState(null),[i,o]=x.useState(!1),l=async()=>{s(!0),a(null),e(null),o(!1);try{const d=await oa.getToken();e(d),o(!0)}catch(d){a(d instanceof Error?d.message:"Erreur de connexion")}finally{s(!1)}},c=()=>{localStorage.removeItem("icoll_token"),localStorage.removeItem("icoll_token_expires"),e(null),o(!1),a(null)},u=d=>{if(!d)return"N/A";try{return new Date(d).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Date invalide"}};return r.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(yr,{className:"h-6 w-6 text-blue-500"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Test de connexion iColl"})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:r.jsx("p",{className:"text-sm text-blue-800",children:"Cette page permet de tester la connexion à l'API iColl avec les identifiants configurés. Les informations de connexion sont affichées ci-dessous pour faciliter le débogage."})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:l,disabled:t,className:"flex-1 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:t?r.jsxs(r.Fragment,{children:[r.jsx(ut,{className:"h-4 w-4 mr-2 animate-spin"}),"Test en cours..."]}):"Tester la connexion"}),r.jsxs("button",{onClick:c,disabled:t,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(lf,{className:"h-4 w-4 mr-2"}),"Vider le cache"]})]}),n&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ye,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-red-800",children:"Erreur de connexion"}),r.jsx("p",{className:"mt-1 text-sm text-red-700",children:n})]})]})}),i&&A&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Ys,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-green-800",children:"Connexion réussie"}),r.jsxs("p",{className:"mt-1 text-xs text-green-700 font-mono break-all",children:["Token: ",A.substring(0,20),"...",A.substring(A.length-20)]})]})]})}),r.jsxs("div",{className:"mt-6 space-y-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Informations de débogage :"}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Token en cache :"}),r.jsx("span",{className:"text-sm font-medium",children:localStorage.getItem("icoll_token")?"Oui":"Non"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Expiration :"}),r.jsx("span",{className:"text-sm",children:u(localStorage.getItem("icoll_token_expires"))})]})]})]})]})]})})}const Pa=async A=>{var s,n;const e=new fu,t=A.dureeAbonnement&&((n=(s=A.projectionAnnuelle)==null?void 0:s[0])!=null&&n.coutAbonnement)?A.projectionAnnuelle[0].coutAbonnement/12:0;return e.setFontSize(12),e.text("Form Data:",20,20),e.text(`Monthly Payment: ${t}€`,20,30),e},Dy=async A=>{(await Pa(A)).save("form.pdf")},Ry=async A=>{const t=(await Pa(A)).output("datauristring");window.open(t)};async function Ky(A,e){try{const t=await Oa.load(A);for(const s of e)try{const n=await s.arrayBuffer(),a=new Uint8Array(n),i=await Oa.load(a);(await t.copyPages(i,i.getPageIndices())).forEach(l=>{t.addPage(l)}),console.log(`Successfully merged attachment: ${s.name}`)}catch(n){console.error(`Error processing attachment ${s.name}:`,n)}return await t.save()}catch(t){throw console.error("Error merging PDFs:",t),new Error("Failed to merge PDF documents")}}function My({attachments:A,onAttachmentsChange:e}){const[t,s]=x.useState(!1),[n,a]=x.useState(null),i=x.useRef(null),o=async c=>{const u=Array.from(c.target.files||[]);if(u.length!==0){s(!0),a(null);try{const d=u.filter(f=>f.type!=="application/pdf"?(a("Seuls les fichiers PDF sont acceptés"),!1):f.size>10485760?(a("La taille maximale par fichier est de 10MB"),!1):!0);if(d.length===0){s(!1);return}const h=d.map(f=>({id:crypto.randomUUID(),file:f,name:f.name}));e([...A,...h]),i.current&&(i.current.value="")}catch(d){console.error("Error processing PDF attachments:",d),a("Une erreur est survenue lors du traitement des fichiers")}finally{s(!1)}}},l=c=>{e(A.filter(u=>u.id!==c))};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Pièces jointes PDF"}),r.jsxs("button",{onClick:()=>{var c;return(c=i.current)==null?void 0:c.click()},disabled:t,className:"inline-flex items-center gap-1 px-3 py-1 text-xs font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 disabled:opacity-50",children:[r.jsx(ci,{className:"h-3.5 w-3.5"}),"Ajouter un fichier"]}),r.jsx("input",{type:"file",ref:i,onChange:o,accept:"application/pdf",className:"hidden",multiple:!0})]}),t&&r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 text-sm",children:[r.jsx(ut,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:"Chargement des fichiers..."})]}),n&&r.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[r.jsx(ye,{className:"h-4 w-4"}),r.jsx("span",{children:n})]}),A.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Ces fichiers seront ajoutés à la fin du rapport PDF généré"}),r.jsx("div",{className:"space-y-2",children:A.map(c=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 border border-gray-200 rounded-md",children:[r.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[r.jsx(ci,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),r.jsx("span",{className:"text-sm text-gray-700 truncate",children:c.name})]}),r.jsx("button",{onClick:()=>l(c.id),className:"p-1 text-gray-400 hover:text-red-500 rounded-full hover:bg-gray-100",children:r.jsx(qt,{className:"h-4 w-4"})})]},c.id))})]}),A.length===0&&r.jsx("p",{className:"text-xs text-gray-500",children:"Ajoutez des fichiers PDF (fiches techniques, plans, etc.) qui seront inclus à la fin du rapport"})]})}function ru({clientInfo:A,installation:e,templateUrl:t="https://xpxbxfuckljqdvkajlmx.supabase.co/storage/v1/object/public/pdf-template/rapport-pdf-template.pdf",projection:s,disabled:n=!1}){const[a,i]=x.useState(!1),[o,l]=x.useState(null),[c,u]=x.useState([]),[d,h]=x.useState(null);x.useEffect(()=>{const g=localStorage.getItem("satellite_image_url");if(g){const p=new Image;p.crossOrigin="anonymous",p.onload=()=>{const w=document.createElement("canvas");w.width=p.width,w.height=p.height;const N=w.getContext("2d");if(N){N.drawImage(p,0,0);try{const Q=w.toDataURL("image/png");h(Q),console.log("Satellite image loaded from localStorage URL")}catch(Q){console.error("Error converting image to data URL:",Q)}}},p.onerror=w=>{console.error("Error loading satellite image from URL:",w)},p.src=g}},[]);const f=g=>g==null?"":String(g),m=()=>{var y;const g=["nom","prenom","telephone","email","civilite"],p=["adresse","codePostal","ville","region"],w=["typeCompteur","consommationAnnuelle","orientation","inclinaison","masqueSolaire","puissanceCrete"],N=g.filter(E=>!(A!=null&&A[E]));if(N.length>0)throw new Error(`Informations client manquantes: ${N.join(", ")}`);const Q=p.filter(E=>!(A!=null&&A[E]));if(Q.length>0)throw new Error(`Informations d'adresse manquantes: ${Q.join(", ")}. Veuillez compléter l'adresse avant de générer le rapport.`);const v=w.filter(E=>(e==null?void 0:e[E])===void 0||(e==null?void 0:e[E])===null);if(v.length>0)throw new Error(`Informations d'installation manquantes: ${v.join(", ")}`);if(!((y=s==null?void 0:s.projectionAnnuelle)!=null&&y.length))throw new Error("Les données de projection financière sont manquantes ou invalides")},B=async g=>{i(!0),l(null);try{m();const p={...A,nom:f(A.nom),prenom:f(A.prenom),telephone:f(A.telephone),email:f(A.email),adresse:f(A.adresse),codePostal:f(A.codePostal),ville:f(A.ville),region:f(A.region),date:f(A.date),ensoleillement:f(A.ensoleillement),conseiller:f(A.conseiller),telephoneConseiller:f(A.telephoneConseiller),commentaire:f(A.commentaire),civilite:f(A.civilite),pdl:f(A.pdl),coordinates:A.coordinates?{lat:Number(A.coordinates.lat)||0,lon:Number(A.coordinates.lon)||0}:void 0},w={...e,typeCompteur:f(e.typeCompteur),consommationAnnuelle:Number(e.consommationAnnuelle)||0,orientation:Number(e.orientation)||0,inclinaison:Number(e.inclinaison)||0,masqueSolaire:Number(e.masqueSolaire)||0,puissanceCrete:Number(e.puissanceCrete)||0,degradationPanneau:Number(e.degradationPanneau)||0,nombreModules:Number(e.nombreModules)||Math.ceil(e.puissanceCrete*2),surfaceTotale:Number(e.surfaceTotale)||(e.nombreModules?e.nombreModules*2.25:e.puissanceCrete*4.5),pertes:Number(e.pertes)||14},N=await Pa(t,p,w,d,s);let Q=N;if(c.length>0&&(Q=await Ky(N,c.map(v=>v.file))),g==="download"){const v=`Rapport_${p.nom}_${p.prenom}.pdf`;Dy(Q,v)}else Ry(Q)}catch(p){console.error("Error generating PDF:",p);let w="Une erreur est survenue lors de la génération du PDF";p instanceof Error&&(p.message.includes("Failed to fetch")?w="Impossible d'accéder au modèle de rapport PDF. Veuillez vérifier votre connexion internet et réessayer.":w=p.message),l(w)}finally{i(!1)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx("button",{onClick:()=>B("download"),disabled:a||n,className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50",children:a?r.jsxs(r.Fragment,{children:[r.jsx(ut,{className:"h-5 w-5 animate-spin"}),"Génération..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pl,{className:"h-5 w-5"}),"Télécharger le rapport"]})}),r.jsx("button",{onClick:()=>B("preview"),disabled:a||n,className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-md border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50",children:a?r.jsxs(r.Fragment,{children:[r.jsx(ut,{className:"h-5 w-5 animate-spin"}),"Génération..."]}):r.jsxs(r.Fragment,{children:[r.jsx(gl,{className:"h-5 w-5"}),"Prévisualiser"]})})]}),o&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md flex items-start gap-2",children:[r.jsx(ye,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-red-700",children:o})]}),r.jsx("div",{className:"border-t border-gray-200 pt-4",children:r.jsx(My,{attachments:c,onAttachmentsChange:u})}),r.jsx("div",{className:"text-sm text-gray-500",children:r.jsx("p",{children:"Le rapport inclut toutes les informations client et les détails de l'installation"})})]})}const Vy="https://xpxbxfuckljqdvkajlmx.supabase.co/storage/v1/object/public/pdf-template/rapport-pdf-template.pdf";function Gy(){var Q;const{clientInfo:A,address:e}=sA(),{params:t}=Qa(),[s,n]=x.useState(""),[a,i]=x.useState(""),[o,l]=x.useState(""),[c,u]=x.useState(""),{parameters:d,projection:h,calculateProjection:f}=Ha(),[m,B]=x.useState(null);x.useEffect(()=>{!e.rue||!e.codePostal||!e.ville||!e.region?B("Veuillez compléter toutes les informations d'adresse avant de générer le rapport."):B(null)},[e]),x.useEffect(()=>{const v=localStorage.getItem("solarResults");if(v){const{productionAnnuelle:y,puissanceCrete:E}=JSON.parse(v),b=localStorage.getItem("financialMode"),C=localStorage.getItem("subscriptionDuration"),U=localStorage.getItem("primeAutoconsommation"),j=localStorage.getItem("remiseCommerciale");b&&(d.financingMode=b),C&&(d.dureeAbonnement=parseInt(C,10)),U&&(d.primeAutoconsommation=parseFloat(U)),j&&(d.remiseCommerciale=parseFloat(j)),f(y,E)}},[f,d]);const g=v=>{const y=v.target.value.replace(/\D/g,"").slice(0,14);n(y)},p=localStorage.getItem("solarResults")?JSON.parse(localStorage.getItem("solarResults")):null,w={civilite:A.civilite,nom:A.nom,prenom:A.prenom,adresse:e.rue||"",codePostal:e.codePostal||"",ville:e.ville||"",region:e.region||"",telephone:A.telephone,email:A.email,pdl:s,date:Lf(new Date),ensoleillement:`${br(((Q=e.codePostal)==null?void 0:Q.substring(0,2))||"75")} kWh/m²/an`,conseiller:a,telephoneConseiller:o,commentaire:c,coordinates:e.coordinates},N={typeCompteur:t.typeCompteur==="monophase"?"Monophasé":"Triphasé",consommationAnnuelle:t.consommationAnnuelle,orientation:t.orientation,inclinaison:t.inclinaison,masqueSolaire:t.masqueSolaire,puissanceCrete:(p==null?void 0:p.puissanceCrete)||0,degradationPanneau:d.degradationPanneau||-.2,nombreModules:t.nombreModules,pertes:t.pertes};return r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-6",children:r.jsxs(it,{to:"/projection",className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700",children:[r.jsx(Ba,{className:"h-4 w-4 mr-1"}),"Retour à la projection financière"]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Rapport détaillé"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informations client"}),r.jsxs("dl",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Nom complet"}),r.jsx("dd",{className:"text-sm text-gray-900",children:`${A.civilite} ${A.prenom} ${A.nom}`})]}),r.jsxs("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Téléphone"}),r.jsx("dd",{className:"text-sm text-gray-900",children:A.telephone})]}),r.jsxs("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Email"}),r.jsx("dd",{className:"text-sm text-gray-900",children:A.email})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Adresse"}),r.jsxs("dl",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Rue"}),r.jsx("dd",{className:"text-sm text-gray-900",children:e.rue||"-"})]}),r.jsxs("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Code postal"}),r.jsx("dd",{className:"text-sm text-gray-900",children:e.codePostal||"-"})]}),r.jsxs("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Ville"}),r.jsx("dd",{className:"text-sm text-gray-900",children:e.ville||"-"})]}),r.jsxs("div",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Région"}),r.jsx("dd",{className:"text-sm text-gray-900",children:e.region||"-"})]})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Numéro PDL (Point De Livraison)"}),r.jsxs("div",{className:"relative group",children:[r.jsx(xr,{className:"h-4 w-4 text-gray-400 cursor-help"}),r.jsxs("div",{className:"absolute z-10 invisible group-hover:visible bg-gray-900 text-white text-sm rounded-lg py-2 px-3 w-72 bottom-full left-1/2 -translate-x-1/2 mb-2",children:[r.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-900 rotate-45"}),"Le numéro PDL (Point De Livraison) est un identifiant unique de 14 chiffres qui se trouve sur votre facture d'électricité et sur votre compteur Linky."]})]})]}),r.jsx("input",{type:"text",value:s,onChange:g,placeholder:"14 chiffres",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",maxLength:14}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Facultatif - Vous trouverez ce numéro sur votre facture d'électricité ou sur votre compteur Linky"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom du conseiller"}),r.jsx("input",{type:"text",value:a,onChange:v=>i(v.target.value),placeholder:"Prénom et nom du conseiller",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Numéro du conseiller"}),r.jsx("input",{type:"text",value:o,onChange:v=>l(v.target.value),placeholder:"Téléphone du conseiller",className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commentaire"}),r.jsx("textarea",{value:c,onChange:v=>u(v.target.value),placeholder:"Informations complémentaires à inclure dans le rapport",rows:4,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Générer un rapport PDF"}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6 flex items-start gap-3",children:[r.jsx(dA,{className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-blue-800",children:"Générez un rapport PDF personnalisé contenant toutes les informations de votre projet solaire. Ce document peut être partagé avec votre installateur ou conservé pour référence."}),m&&r.jsx("p",{className:"text-sm text-red-600 mt-2",children:m})]})]}),r.jsx(ru,{clientInfo:w,installation:N,templateUrl:Vy,projection:h,disabled:!!m})]})]})]})]})}const $y="/templates/Presentation_rapport.pdf";function Jy(){const[A]=x.useState({nom:"Doe",prenom:"John",telephone:"0123456789",email:"john.doe@example.com",adresse:"123 Main Street",codePostal:"75001",ville:"Paris",date:new Date().toLocaleDateString(),ensoleillement:"Optimal"}),[e]=x.useState({typeCompteur:"Linky",consommationAnnuelle:5e3,orientation:180,inclinaison:30,masqueSolaire:0,puissanceCrete:3});return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Générateur de Rapport PDF"}),r.jsx(ru,{clientInfo:A,installation:e,templateUrl:$y})]})}function _o({children:A}){const{clientInfo:e}=sA();return!(e.civilite&&e.nom&&e.prenom)?r.jsx(cu,{to:"/",replace:!0}):r.jsx(r.Fragment,{children:A})}function Wy({onLogin:A}){const[e,t]=x.useState(""),[s,n]=x.useState(""),[a,i]=x.useState(!1),[o,l]=x.useState(null),[c,u]=x.useState(!1),[d,h]=x.useState(!1),f=g=>{g.preventDefault(),i(!0),l(null),e==="abi_energie@abie.fr"&&s==="Abie2024!"?setTimeout(()=>{i(!1),A()},500):(i(!1),l("Identifiants incorrects"))},m=async g=>{g.preventDefault(),i(!0),l(null);try{l("Un email de réinitialisation vous a été envoyé")}catch{l("Erreur lors de l'envoi de l'email")}finally{i(!1)}},B=g=>{g.preventDefault(),h(!d)};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:r.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:[r.jsxs("div",{children:[r.jsx("img",{src:"https://i.ibb.co/qLHXqbw/Logo-ABI.jpg",alt:"ABI Énergie",className:"h-32 mx-auto"}),r.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"Simulateur Solaire"}),r.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Pour accéder au simulateur, veuillez vous connecter"})]}),r.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c?m:f,children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:r.jsx(wl,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:e,onChange:g=>t(g.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Email"})]})]}),!c&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"sr-only",children:"Mot de passe"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:r.jsx(yr,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"password",name:"password",type:d?"text":"password",required:!0,value:s,onChange:g=>n(g.target.value),className:"block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Mot de passe"}),r.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center",children:r.jsx("button",{type:"button",onClick:B,className:"p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md",children:d?r.jsx(zh,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):r.jsx(gl,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})})]})]})]}),o&&r.jsx("div",{className:"rounded-md bg-red-50 p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(ye,{className:"h-5 w-5 text-red-400"})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:a?"Chargement...":c?"Envoyer le lien":"Se connecter"})}),r.jsx("div",{className:"text-sm text-center",children:r.jsx("button",{type:"button",onClick:()=>u(!c),className:"font-medium text-blue-600 hover:text-blue-500",children:c?"Retour à la connexion":"Mot de passe oublié ?"})})]}),r.jsxs("div",{className:"mt-6 text-center",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-300"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Vous souhaitez faire une simulation ?"})})]}),r.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Rapprochez-vous d'un conseiller ABI Énergie"}),r.jsx("p",{className:"mt-2 text-sm",children:r.jsx("a",{href:"tel:0183835150",className:"font-medium text-blue-600 hover:text-blue-800",children:"01 83 83 51 50"})}),r.jsx("p",{className:"mt-2 text-sm",children:r.jsx("a",{href:"mailto:contact@abie.fr",className:"font-medium text-blue-600 hover:text-blue-800",children:"contact@abie.fr"})})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("p",{className:"text-xs text-gray-500",children:"Version 6.8.8"})})]})})}function Xy(){const[A,e]=x.useState(!1),t=()=>{e(!0)};return A?r.jsx(uu,{children:r.jsx(Cu,{children:r.jsx(kh,{children:r.jsxs("div",{className:"min-h-screen flex flex-col",children:[r.jsx(Bf,{}),r.jsx(pf,{children:r.jsxs(du,{children:[r.jsx(Te,{path:"/",element:r.jsx(Xf,{})}),r.jsx(Te,{path:"/projection",element:r.jsx(_o,{children:r.jsx(Pw,{})})}),r.jsx(Te,{path:"/eligibilite",element:r.jsx(_o,{children:r.jsx(yy,{})})}),r.jsx(Te,{path:"/modalites-abonnement",element:r.jsx(Cy,{})}),r.jsx(Te,{path:"/modalites-sortie",element:r.jsx(Fy,{})}),r.jsx(Te,{path:"/abie-link",element:r.jsx(Hy,{})}),r.jsx(Te,{path:"/oauth/callback",element:r.jsx(_y,{})}),r.jsx(Te,{path:"/agence",element:r.jsx(Ly,{})}),r.jsx(Te,{path:"/settings",element:r.jsx(Py,{})}),r.jsx(Te,{path:"/test-icoll",element:r.jsx(Oy,{})}),r.jsx(Te,{path:"/report",element:r.jsx(Gy,{})}),r.jsx(Te,{path:"/pdf-generator",element:r.jsx(Jy,{})})]})})]})})})}):r.jsx(Wy,{onLogin:t})}const nu=document.getElementById("root");if(!nu)throw new Error("Failed to find root element");Lo(nu).render(r.jsx(hu.StrictMode,{children:r.jsx(Xy,{})}));export{cb as h};
